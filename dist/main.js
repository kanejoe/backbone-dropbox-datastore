!function(t,e){function n(t){var e=t.length,n=oe.type(t);return oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t){var e=pe[t]={};return oe.each(t.match(ae)||[],function(t,n){e[n]=!0}),e}function i(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=oe.expando+Math.random()}function o(t,n,r){var i;if(r===e&&1===t.nodeType)if(i="data-"+n.replace(ve,"-$1").toLowerCase(),r=t.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:_e.test(r)?JSON.parse(r):r}catch(o){}ge.set(t,n,r)}else r=e;return r}function s(){return!0}function a(){return!1}function u(){try{return W.activeElement}catch(t){}}function l(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t,e,n){if(oe.isFunction(e))return oe.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return oe.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(Ce.test(e))return oe.filter(e,t,n);e=oe.filter(e,t)}return oe.grep(t,function(t){return ee.call(e,t)>=0!==n})}function h(t,e){return oe.nodeName(t,"table")&&oe.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function f(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function d(t){var e=Fe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function p(t,e){for(var n=t.length,r=0;n>r;r++)me.set(t[r],"globalEval",!e||me.get(e[r],"globalEval"))}function g(t,e){var n,r,i,o,s,a,u,l;if(1===e.nodeType){if(me.hasData(t)&&(o=me.access(t),s=me.set(e,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)oe.event.add(e,i,l[i][n])}ge.hasData(t)&&(a=ge.access(t),u=oe.extend({},a),ge.set(e,u))}}function m(t,n){var r=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return n===e||n&&oe.nodeName(t,n)?oe.merge([t],r):r}function _(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Ie.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function v(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),r=e,i=Qe.length;i--;)if(e=Qe[i]+n,e in t)return e;return r}function y(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)}function b(e){return t.getComputedStyle(e,null)}function w(t,e){for(var n,r,i,o=[],s=0,a=t.length;a>s;s++)r=t[s],r.style&&(o[s]=me.get(r,"olddisplay"),n=r.style.display,e?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&y(r)&&(o[s]=me.access(r,"olddisplay",T(r.nodeName)))):o[s]||(i=y(r),(n&&"none"!==n||!i)&&me.set(r,"olddisplay",i?n:oe.css(r,"display"))));for(s=0;a>s;s++)r=t[s],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[s]||"":"none"));return t}function x(t,e,n){var r=$e.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function k(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=oe.css(t,n+Ze[o],!0,i)),r?("content"===n&&(s-=oe.css(t,"padding"+Ze[o],!0,i)),"margin"!==n&&(s-=oe.css(t,"border"+Ze[o]+"Width",!0,i))):(s+=oe.css(t,"padding"+Ze[o],!0,i),"padding"!==n&&(s+=oe.css(t,"border"+Ze[o]+"Width",!0,i)));return s}function S(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=b(t),s=oe.support.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=He(t,e,o),(0>i||null==i)&&(i=t.style[e]),Ve.test(i))return i;r=s&&(oe.support.boxSizingReliable||i===t.style[e]),i=parseFloat(i)||0}return i+k(t,e,n||(s?"border":"content"),r,o)+"px"}function T(t){var e=W,n=Ge[t];return n||(n=D(t,e),"none"!==n&&n||(qe=(qe||oe("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(qe[0].contentWindow||qe[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=D(t,e),qe.detach()),Ge[t]=n),n}function D(t,e){var n=oe(e.createElement(t)).appendTo(e.body),r=oe.css(n[0],"display");return n.remove(),r}function E(t,e,n,r){var i;if(oe.isArray(e))oe.each(e,function(e,i){n||en.test(t)?r(t,i):E(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==oe.type(e))r(t,e);else for(i in e)E(t+"["+i+"]",e[i],n,r)}function C(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(ae)||[];if(oe.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function A(t,n,r,i){function o(u){var l;return s[u]=!0,oe.each(t[u]||[],function(t,u){var c=u(n,r,i);return"string"!=typeof c||a||s[c]?a?!(l=c):e:(n.dataTypes.unshift(c),o(c),!1)}),l}var s={},a=t===yn;return o(n.dataTypes[0])||!s["*"]&&o("*")}function O(t,n){var r,i,o=oe.ajaxSettings.flatOptions||{};for(r in n)n[r]!==e&&((o[r]?t:i||(i={}))[r]=n[r]);return i&&oe.extend(!0,t,i),t}function N(t,n,r){for(var i,o,s,a,u=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),i===e&&(i=t.mimeType||n.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){l.unshift(o);break}if(l[0]in r)s=l[0];else{for(o in r){if(!l[0]||t.converters[o+" "+l[0]]){s=o;break}a||(a=o)}s=s||a}return s?(s!==l[0]&&l.unshift(s),r[s]):e}function P(t,e,n,r){var i,o,s,a,u,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function L(){return setTimeout(function(){Cn=e}),Cn=oe.now()}function M(t,e,n){for(var r,i=(Mn[e]||[]).concat(Mn["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,e,t))return r}function j(t,e,n){var r,i,o=0,s=Ln.length,a=oe.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=Cn||L(),n=Math.max(0,l.startTime+l.duration-e),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(t,[l,o,n]),1>o&&u?n:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Cn||L(),duration:n.duration,tweens:[],createTween:function(e,n){var r=oe.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return e?a.resolveWith(t,[l,e]):a.rejectWith(t,[l,e]),this}}),c=l.props;for(I(c,l.opts.specialEasing);s>o;o++)if(r=Ln[o].call(l,t,c,l.opts))return r;return oe.map(c,M,l),oe.isFunction(l.opts.start)&&l.opts.start.call(t,l),oe.fx.timer(oe.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function I(t,e){var n,r,i,o,s;for(n in t)if(r=oe.camelCase(n),i=e[r],o=t[n],oe.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),s=oe.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function U(t,n,r){var i,o,s,a,u,l,c=this,h={},f=t.style,d=t.nodeType&&y(t),p=me.get(t,"fxshow");r.queue||(u=oe._queueHooks(t,"fx"),null==u.unqueued&&(u.unqueued=0,l=u.empty.fire,u.empty.fire=function(){u.unqueued||l()}),u.unqueued++,c.always(function(){c.always(function(){u.unqueued--,oe.queue(t,"fx").length||u.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(r.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===oe.css(t,"display")&&"none"===oe.css(t,"float")&&(f.display="inline-block")),r.overflow&&(f.overflow="hidden",c.always(function(){f.overflow=r.overflow[0],f.overflowX=r.overflow[1],f.overflowY=r.overflow[2]}));for(i in n)if(o=n[i],On.exec(o)){if(delete n[i],s=s||"toggle"===o,o===(d?"hide":"show")){if("show"!==o||!p||p[i]===e)continue;d=!0}h[i]=p&&p[i]||oe.style(t,i)}if(!oe.isEmptyObject(h)){p?"hidden"in p&&(d=p.hidden):p=me.access(t,"fxshow",{}),s&&(p.hidden=!d),d?oe(t).show():c.done(function(){oe(t).hide()}),c.done(function(){var e;me.remove(t,"fxshow");for(e in h)oe.style(t,e,h[e])});for(i in h)a=M(d?p[i]:0,i,c),i in p||(p[i]=a.start,d&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function R(t,e,n,r,i){return new R.prototype.init(t,e,n,r,i)}function F(t,e){var n,r={height:t},i=0;for(e=e?1:0;4>i;i+=2-e)n=Ze[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function z(t){return oe.isWindow(t)?t:9===t.nodeType&&t.defaultView}var B,H,q=typeof e,X=t.location,W=t.document,$=W.documentElement,V=t.jQuery,Y=t.$,G={},J=[],K="2.0.3",Z=J.concat,Q=J.push,te=J.slice,ee=J.indexOf,ne=G.toString,re=G.hasOwnProperty,ie=K.trim,oe=function(t,e){return new oe.fn.init(t,e,B)},se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=/\S+/g,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,le=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ce=/^-ms-/,he=/-([\da-z])/gi,fe=function(t,e){return e.toUpperCase()},de=function(){W.removeEventListener("DOMContentLoaded",de,!1),t.removeEventListener("load",de,!1),oe.ready()};oe.fn=oe.prototype={jquery:K,constructor:oe,init:function(t,n,r){var i,o;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ue.exec(t),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(t):this.constructor(n).find(t);if(i[1]){if(n=n instanceof oe?n[0]:n,oe.merge(this,oe.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:W,!0)),le.test(i[1])&&oe.isPlainObject(n))for(i in n)oe.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}return o=W.getElementById(i[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=W,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?r.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))},selector:"",length:0,toArray:function(){return te.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},ready:function(t){return oe.ready.promise().done(t),this},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:[].sort,splice:[].splice},oe.fn.init.prototype=oe.fn,oe.extend=oe.fn.extend=function(){var t,n,r,i,o,s,a=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},u=2),"object"==typeof a||oe.isFunction(a)||(a={}),l===u&&(a=this,--u);l>u;u++)if(null!=(t=arguments[u]))for(n in t)r=a[n],i=t[n],a!==i&&(c&&i&&(oe.isPlainObject(i)||(o=oe.isArray(i)))?(o?(o=!1,s=r&&oe.isArray(r)?r:[]):s=r&&oe.isPlainObject(r)?r:{},a[n]=oe.extend(c,s,i)):i!==e&&(a[n]=i));return a},oe.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===oe&&(t.$=Y),e&&t.jQuery===oe&&(t.jQuery=V),oe},isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){(t===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,t!==!0&&--oe.readyWait>0||(H.resolveWith(W,[oe]),oe.fn.trigger&&oe(W).trigger("ready").off("ready")))},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?G[ne.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!re.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||W;var r=le.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=oe.buildFragment([t],e,i),i&&oe(i).remove(),oe.merge([],r.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var n,r;if(!t||"string"!=typeof t)return null;try{r=new DOMParser,n=r.parseFromString(t,"text/xml")}catch(i){n=e}return(!n||n.getElementsByTagName("parsererror").length)&&oe.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(t){var e,n=eval;t=oe.trim(t),t&&(1===t.indexOf("use strict")?(e=W.createElement("script"),e.text=t,W.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(ce,"ms-").replace(he,fe)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var i,o=0,s=t.length,a=n(t);if(r){if(a)for(;s>o&&(i=e.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],r),i===!1)break}else if(a)for(;s>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":ie.call(t)},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?oe.merge(r,"string"==typeof t?[t]:t):Q.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:ee.call(e,t,n)},merge:function(t,n){var r=n.length,i=t.length,o=0;if("number"==typeof r)for(;r>o;o++)t[i++]=n[o];else for(;n[o]!==e;)t[i++]=n[o++];return t.length=i,t},grep:function(t,e,n){var r,i=[],o=0,s=t.length;for(n=!!n;s>o;o++)r=!!e(t[o],o),n!==r&&i.push(t[o]);return i},map:function(t,e,r){var i,o=0,s=t.length,a=n(t),u=[];if(a)for(;s>o;o++)i=e(t[o],o,r),null!=i&&(u[u.length]=i);else for(o in t)i=e(t[o],o,r),null!=i&&(u[u.length]=i);return Z.apply([],u)},guid:1,proxy:function(t,n){var r,i,o;return"string"==typeof n&&(r=t[n],n=t,t=r),oe.isFunction(t)?(i=te.call(arguments,2),o=function(){return t.apply(n||this,i.concat(te.call(arguments)))},o.guid=t.guid=t.guid||oe.guid++,o):e},access:function(t,n,r,i,o,s,a){var u=0,l=t.length,c=null==r;if("object"===oe.type(r)){o=!0;for(u in r)oe.access(t,n,u,r[u],!0,s,a)}else if(i!==e&&(o=!0,oe.isFunction(i)||(a=!0),c&&(a?(n.call(t,i),n=null):(c=n,n=function(t,e,n){return c.call(oe(t),n)})),n))for(;l>u;u++)n(t[u],r,a?i:i.call(t[u],u,n(t[u],r)));return o?t:c?n.call(t):l?n(t[0],r):s},now:Date.now,swap:function(t,e,n,r){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=s[o];return i}}),oe.ready.promise=function(e){return H||(H=oe.Deferred(),"complete"===W.readyState?setTimeout(oe.ready):(W.addEventListener("DOMContentLoaded",de,!1),t.addEventListener("load",de,!1))),H.promise(e)},oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){G["[object "+e+"]"]=e.toLowerCase()}),B=oe(W),function(t,e){function n(t,e,n,r){var i,o,s,a,u,l,c,h,p,g;if((e?e.ownerDocument||e:z)!==P&&N(e),e=e||P,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(M&&!r){if(i=ye.exec(t))if(s=i[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&R(e,o)&&o.id===s)return n.push(o),n}else{if(i[2])return te.apply(n,e.getElementsByTagName(t)),n;if((s=i[3])&&k.getElementsByClassName&&e.getElementsByClassName)return te.apply(n,e.getElementsByClassName(s)),n}if(k.qsa&&(!j||!j.test(t))){if(h=c=F,p=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(l=f(t),(c=e.getAttribute("id"))?h=c.replace(xe,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",u=l.length;u--;)l[u]=h+d(l[u]);p=de.test(t)&&e.parentNode||e,g=l.join(",")}if(g)try{return te.apply(n,p.querySelectorAll(g)),n}catch(m){}finally{c||e.removeAttribute("id")}}}return w(t.replace(ce,"$1"),e,n,r)}function r(){function t(n,r){return e.push(n+=" ")>T.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function i(t){return t[F]=!0,t}function o(t){var e=P.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var n=t.split("|"),r=t.length;r--;)T.attrHandle[n[r]]=e}function a(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function u(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return i(function(e){return e=+e,i(function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function h(){}function f(t,e){var r,i,o,s,a,u,l,c=X[t+" "];if(c)return e?0:c.slice(0);for(a=t,u=[],l=T.preFilter;a;){(!r||(i=he.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=fe.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ce," ")}),a=a.slice(r.length));for(s in T.filter)!(i=_e[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return e?a.length:a?n.error(t):X(t,u).slice(0)}function d(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function p(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=H++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,s){var a,u,l,c=B+" "+o;if(s){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,s))return!0}else for(;e=e[r];)if(1===e.nodeType||i)if(l=e[F]||(e[F]={}),(u=l[r])&&u[0]===c){if((a=u[1])===!0||a===S)return a===!0}else if(u=l[r]=[c],u[1]=t(e,n,s)||S,u[1]===!0)return!0}}function g(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function m(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,l=null!=e;u>a;a++)(o=t[a])&&(!n||n(o,r,i))&&(s.push(o),l&&e.push(a));return s}function _(t,e,n,r,o,s){return r&&!r[F]&&(r=_(r)),o&&!o[F]&&(o=_(o,s)),i(function(i,s,a,u){var l,c,h,f=[],d=[],p=s.length,g=i||b(e||"*",a.nodeType?[a]:a,[]),_=!t||!i&&e?g:m(g,f,t,a,u),v=n?o||(i?t:p||r)?[]:s:_;if(n&&n(_,v,a,u),r)for(l=m(v,d),r(l,[],a,u),c=l.length;c--;)(h=l[c])&&(v[d[c]]=!(_[d[c]]=h));if(i){if(o||t){if(o){for(l=[],c=v.length;c--;)(h=v[c])&&l.push(_[c]=h);o(null,v=[],l,u)}for(c=v.length;c--;)(h=v[c])&&(l=o?ne.call(i,h):f[c])>-1&&(i[l]=!(s[l]=h))}}else v=m(v===s?v.splice(p,v.length):v),o?o(null,s,v,u):te.apply(s,v)})}function v(t){for(var e,n,r,i=t.length,o=T.relative[t[0].type],s=o||T.relative[" "],a=o?1:0,u=p(function(t){return t===e},s,!0),l=p(function(t){return ne.call(e,t)>-1},s,!0),c=[function(t,n,r){return!o&&(r||n!==A)||((e=n).nodeType?u(t,n,r):l(t,n,r))}];i>a;a++)if(n=T.relative[t[a].type])c=[p(g(c),n)];else{if(n=T.filter[t[a].type].apply(null,t[a].matches),n[F]){for(r=++a;i>r&&!T.relative[t[r].type];r++);return _(a>1&&g(c),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ce,"$1"),n,r>a&&v(t.slice(a,r)),i>r&&v(t=t.slice(r)),i>r&&d(t))}c.push(n)}return g(c)}function y(t,e){var r=0,o=e.length>0,s=t.length>0,a=function(i,a,u,l,c){var h,f,d,p=[],g=0,_="0",v=i&&[],y=null!=c,b=A,w=i||s&&T.find.TAG("*",c&&a.parentNode||a),x=B+=null==b?1:Math.random()||.1;for(y&&(A=a!==P&&a,S=r);null!=(h=w[_]);_++){if(s&&h){for(f=0;d=t[f++];)if(d(h,a,u)){l.push(h);break}y&&(B=x,S=++r)}o&&((h=!d&&h)&&g--,i&&v.push(h))}if(g+=_,o&&_!==g){for(f=0;d=e[f++];)d(v,p,a,u);if(i){if(g>0)for(;_--;)v[_]||p[_]||(p[_]=Z.call(l));p=m(p)}te.apply(l,p),y&&!i&&p.length>0&&g+e.length>1&&n.uniqueSort(l)}return y&&(B=x,A=b),v};return o?i(a):a}function b(t,e,r){for(var i=0,o=e.length;o>i;i++)n(t,e[i],r);return r}function w(t,e,n,r){var i,o,s,a,u,l=f(t);if(!r&&1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&k.getById&&9===e.nodeType&&M&&T.relative[o[1].type]){if(e=(T.find.ID(s.matches[0].replace(ke,Se),e)||[])[0],!e)return n;t=t.slice(o.shift().value.length)}for(i=_e.needsContext.test(t)?0:o.length;i--&&(s=o[i],!T.relative[a=s.type]);)if((u=T.find[a])&&(r=u(s.matches[0].replace(ke,Se),de.test(o[0].type)&&e.parentNode||e))){if(o.splice(i,1),t=r.length&&d(o),!t)return te.apply(n,r),n;break}}return C(t,l)(r,e,!M,n,de.test(t)),n}var x,k,S,T,D,E,C,A,O,N,P,L,M,j,I,U,R,F="sizzle"+-new Date,z=t.document,B=0,H=0,q=r(),X=r(),W=r(),$=!1,V=function(t,e){return t===e?($=!0,0):0},Y=typeof e,G=1<<31,J={}.hasOwnProperty,K=[],Z=K.pop,Q=K.push,te=K.push,ee=K.slice,ne=K.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},re="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",se="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=se.replace("w","w#"),ue="\\["+ie+"*("+se+")"+ie+"*(?:([*^$|!~]?=)"+ie+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ae+")|)|)"+ie+"*\\]",le=":("+se+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ue.replace(3,8)+")*)|.*)\\)|)",ce=RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),he=RegExp("^"+ie+"*,"+ie+"*"),fe=RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=RegExp(ie+"*[+~]"),pe=RegExp("="+ie+"*([^\\]'\"]*)"+ie+"*\\]","g"),ge=RegExp(le),me=RegExp("^"+ae+"$"),_e={ID:RegExp("^#("+se+")"),CLASS:RegExp("^\\.("+se+")"),TAG:RegExp("^("+se.replace("w","w*")+")"),ATTR:RegExp("^"+ue),PSEUDO:RegExp("^"+le),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:RegExp("^(?:"+re+")$","i"),needsContext:RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/^(?:input|select|textarea|button)$/i,we=/^h\d$/i,xe=/'|\\/g,ke=RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),Se=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{te.apply(K=ee.call(z.childNodes),z.childNodes),K[z.childNodes.length].nodeType}catch(Te){te={apply:K.length?function(t,e){Q.apply(t,ee.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}E=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},k=n.support={},N=n.setDocument=function(t){var n=t?t.ownerDocument||t:z,r=n.defaultView;return n!==P&&9===n.nodeType&&n.documentElement?(P=n,L=n.documentElement,M=!E(n),r&&r.attachEvent&&r!==r.top&&r.attachEvent("onbeforeunload",function(){N()}),k.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),k.getElementsByTagName=o(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),k.getElementsByClassName=o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),k.getById=o(function(t){return L.appendChild(t).id=F,!n.getElementsByName||!n.getElementsByName(F).length}),k.getById?(T.find.ID=function(t,e){if(typeof e.getElementById!==Y&&M){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(t){var e=t.replace(ke,Se);return function(t){return t.getAttribute("id")===e}}):(delete T.find.ID,T.filter.ID=function(t){var e=t.replace(ke,Se);return function(t){var n=typeof t.getAttributeNode!==Y&&t.getAttributeNode("id");return n&&n.value===e}}),T.find.TAG=k.getElementsByTagName?function(t,n){return typeof n.getElementsByTagName!==Y?n.getElementsByTagName(t):e}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=k.getElementsByClassName&&function(t,n){return typeof n.getElementsByClassName!==Y&&M?n.getElementsByClassName(t):e},I=[],j=[],(k.qsa=ve.test(n.querySelectorAll))&&(o(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||j.push("\\["+ie+"*(?:value|"+re+")"),t.querySelectorAll(":checked").length||j.push(":checked")}),o(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&j.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||j.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),j.push(",.*:")})),(k.matchesSelector=ve.test(U=L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&o(function(t){k.disconnectedMatch=U.call(t,"div"),U.call(t,"[s!='']:x"),I.push("!=",le)}),j=j.length&&RegExp(j.join("|")),I=I.length&&RegExp(I.join("|")),R=ve.test(L.contains)||L.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=L.compareDocumentPosition?function(t,e){if(t===e)return $=!0,0;var r=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return r?1&r||!k.sortDetached&&e.compareDocumentPosition(t)===r?t===n||R(z,t)?-1:e===n||R(z,e)?1:O?ne.call(O,t)-ne.call(O,e):0:4&r?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var r,i=0,o=t.parentNode,s=e.parentNode,u=[t],l=[e];if(t===e)return $=!0,0;if(!o||!s)return t===n?-1:e===n?1:o?-1:s?1:O?ne.call(O,t)-ne.call(O,e):0;if(o===s)return a(t,e);for(r=t;r=r.parentNode;)u.unshift(r);for(r=e;r=r.parentNode;)l.unshift(r);for(;u[i]===l[i];)i++;return i?a(u[i],l[i]):u[i]===z?-1:l[i]===z?1:0},n):P},n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){if((t.ownerDocument||t)!==P&&N(t),e=e.replace(pe,"='$1']"),!(!k.matchesSelector||!M||I&&I.test(e)||j&&j.test(e)))try{var r=U.call(t,e);if(r||k.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return n(e,P,null,[t]).length>0},n.contains=function(t,e){return(t.ownerDocument||t)!==P&&N(t),R(t,e)},n.attr=function(t,n){(t.ownerDocument||t)!==P&&N(t);var r=T.attrHandle[n.toLowerCase()],i=r&&J.call(T.attrHandle,n.toLowerCase())?r(t,n,!M):e;return i===e?k.attributes||!M?t.getAttribute(n):(i=t.getAttributeNode(n))&&i.specified?i.value:null:i},n.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},n.uniqueSort=function(t){var e,n=[],r=0,i=0;if($=!k.detectDuplicates,O=!k.sortStable&&t.slice(0),t.sort(V),$){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return t},D=n.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=D(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r];r++)n+=D(e);return n},T=n.selectors={cacheLength:50,createPseudo:i,match:_e,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(ke,Se),t[3]=(t[4]||t[5]||"").replace(ke,Se),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||n.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&n.error(t[0]),t},PSEUDO:function(t){var n,r=!t[5]&&t[2];return _e.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:r&&ge.test(r)&&(n=f(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(t[0]=t[0].slice(0,n),t[2]=r.slice(0,n)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(ke,Se).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==Y&&t.getAttribute("class")||"")})},ATTR:function(t,e,r){return function(i){var o=n.attr(i,t);return null==o?"!="===e:e?(o+="","="===e?o===r:"!="===e?o!==r:"^="===e?r&&0===o.indexOf(r):"*="===e?r&&o.indexOf(r)>-1:"$="===e?r&&o.slice(-r.length)===r:"~="===e?(" "+o+" ").indexOf(r)>-1:"|="===e?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,f,d,p,g=o!==s?"nextSibling":"previousSibling",m=e.parentNode,_=a&&e.nodeName.toLowerCase(),v=!u&&!a;if(m){if(o){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===_:1===h.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?m.firstChild:m.lastChild],s&&v){for(c=m[F]||(m[F]={}),l=c[t]||[],d=l[0]===B&&l[1],f=l[0]===B&&l[2],h=d&&m.childNodes[d];h=++d&&h&&h[g]||(f=d=0)||p.pop();)if(1===h.nodeType&&++f&&h===e){c[t]=[B,d,f];break}}else if(v&&(l=(e[F]||(e[F]={}))[t])&&l[0]===B)f=l[1];else for(;(h=++d&&h&&h[g]||(f=d=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==_:1!==h.nodeType)||!++f||(v&&((h[F]||(h[F]={}))[t]=[B,f]),h!==e)););return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(t,e){var r,o=T.pseudos[t]||T.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return o[F]?o(e):o.length>1?(r=[t,t,"",e],T.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,n){for(var r,i=o(t,e),s=i.length;s--;)r=ne.call(t,i[s]),t[r]=!(n[r]=i[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=C(t.replace(ce,"$1"));return r[F]?i(function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),!n.pop()}}),has:i(function(t){return function(e){return n(t,e).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||D(e)).indexOf(t)>-1}}),lang:i(function(t){return me.test(t||"")||n.error("unsupported lang: "+t),t=t.replace(ke,Se).toLowerCase(),function(e){var n;do if(n=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===L},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!T.pseudos.empty(t)},header:function(t){return we.test(t.nodeName)},input:function(t){return be.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:c(function(t,e,n){for(var r=0>n?n+e:n;e>++r;)t.push(r);return t})}},T.pseudos.nth=T.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[x]=u(x);for(x in{submit:!0,reset:!0})T.pseudos[x]=l(x);
h.prototype=T.filters=T.pseudos,T.setFilters=new h,C=n.compile=function(t,e){var n,r=[],i=[],o=W[t+" "];if(!o){for(e||(e=f(t)),n=e.length;n--;)o=v(e[n]),o[F]?r.push(o):i.push(o);o=W(t,y(i,r))}return o},k.sortStable=F.split("").sort(V).join("")===F,k.detectDuplicates=$,N(),k.sortDetached=o(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,n,r){return r?e:t.getAttribute(n,"type"===n.toLowerCase()?1:2)}),k.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,n,r){return r||"input"!==t.nodeName.toLowerCase()?e:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||s(re,function(t,n,r){var i;return r?e:(i=t.getAttributeNode(n))&&i.specified?i.value:t[n]===!0?n.toLowerCase():null}),oe.find=n,oe.expr=n.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=n.uniqueSort,oe.text=n.getText,oe.isXMLDoc=n.isXML,oe.contains=n.contains}(t);var pe={};oe.Callbacks=function(t){t="string"==typeof t?pe[t]||r(t):oe.extend({},t);var n,i,o,s,a,u,l=[],c=!t.once&&[],h=function(e){for(n=t.memory&&e,i=!0,u=s||0,s=0,a=l.length,o=!0;l&&a>u;u++)if(l[u].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}o=!1,l&&(c?c.length&&h(c.shift()):n?l=[]:f.disable())},f={add:function(){if(l){var e=l.length;!function r(e){oe.each(e,function(e,n){var i=oe.type(n);"function"===i?t.unique&&f.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),o?a=l.length:n&&(s=e,h(n))}return this},remove:function(){return l&&oe.each(arguments,function(t,e){for(var n;(n=oe.inArray(e,l,n))>-1;)l.splice(n,1),o&&(a>=n&&a--,u>=n&&u--)}),this},has:function(t){return t?oe.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=c=n=e,this},disabled:function(){return!l},lock:function(){return c=e,n||f.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!l||i&&!c||(e=e||[],e=[t,e.slice?e.slice():e],o?c.push(e):h(e)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!i}};return f},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,o){var s=o[0],a=oe.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,r):r}},i={};return r.pipe=r.then,oe.each(e,function(t,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=te.call(arguments),s=o.length,a=1!==s||t&&oe.isFunction(t.promise)?s:0,u=1===a?t:oe.Deferred(),l=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?te.call(arguments):i,r===e?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(e=Array(s),n=Array(s),r=Array(s);s>i;i++)o[i]&&oe.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,e)):--a;return a||u.resolveWith(r,o),u.promise()}}),oe.support=function(e){var n=W.createElement("input"),r=W.createDocumentFragment(),i=W.createElement("div"),o=W.createElement("select"),s=o.appendChild(W.createElement("option"));return n.type?(n.type="checkbox",e.checkOn=""!==n.value,e.optSelected=s.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,o.disabled=!0,e.optDisabled=!s.disabled,n=W.createElement("input"),n.value="t",n.type="radio",e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),r.appendChild(n),e.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===i.style.backgroundClip,oe(function(){var n,r,o="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",s=W.getElementsByTagName("body")[0];s&&(n=W.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(i),i.innerHTML="",i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",oe.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===i.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(i,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(i,null)||{width:"4px"}).width,r=i.appendChild(W.createElement("div")),r.style.cssText=i.style.cssText=o,r.style.marginRight=r.style.width="0",i.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight)),s.removeChild(n))}),e):e}({});var ge,me,_e=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ve=/([A-Z])/g;i.uid=1,i.accepts=function(t){return t.nodeType?1===t.nodeType||9===t.nodeType:!0},i.prototype={key:function(t){if(!i.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=i.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,oe.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(oe.isEmptyObject(o))oe.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,n){var r=this.cache[this.key(t)];return n===e?r:r[n]},access:function(t,n,r){var i;return n===e||n&&"string"==typeof n&&r===e?(i=this.get(t,n),i!==e?i:this.get(t,oe.camelCase(n))):(this.set(t,n,r),r!==e?r:n)},remove:function(t,n){var r,i,o,s=this.key(t),a=this.cache[s];if(n===e)this.cache[s]={};else{oe.isArray(n)?i=n.concat(n.map(oe.camelCase)):(o=oe.camelCase(n),n in a?i=[n,o]:(i=o,i=i in a?[i]:i.match(ae)||[])),r=i.length;for(;r--;)delete a[i[r]]}},hasData:function(t){return!oe.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},ge=new i,me=new i,oe.extend({acceptData:i.accepts,hasData:function(t){return ge.hasData(t)||me.hasData(t)},data:function(t,e,n){return ge.access(t,e,n)},removeData:function(t,e){ge.remove(t,e)},_data:function(t,e,n){return me.access(t,e,n)},_removeData:function(t,e){me.remove(t,e)}}),oe.fn.extend({data:function(t,n){var r,i,s=this[0],a=0,u=null;if(t===e){if(this.length&&(u=ge.get(s),1===s.nodeType&&!me.get(s,"hasDataAttrs"))){for(r=s.attributes;r.length>a;a++)i=r[a].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),o(s,i,u[i]));me.set(s,"hasDataAttrs",!0)}return u}return"object"==typeof t?this.each(function(){ge.set(this,t)}):oe.access(this,function(n){var r,i=oe.camelCase(t);if(s&&n===e){if(r=ge.get(s,t),r!==e)return r;if(r=ge.get(s,i),r!==e)return r;if(r=o(s,i,e),r!==e)return r}else this.each(function(){var r=ge.get(this,i);ge.set(this,i,n),-1!==t.indexOf("-")&&r!==e&&ge.set(this,t,n)})},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ge.remove(this,t)})}}),oe.extend({queue:function(t,n,r){var i;return t?(n=(n||"fx")+"queue",i=me.get(t,n),r&&(!i||oe.isArray(r)?i=me.access(t,n,oe.makeArray(r)):i.push(r)),i||[]):e},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),r=n.length,i=n.shift(),o=oe._queueHooks(t,e),s=function(){oe.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return me.get(t,n)||me.access(t,n,{empty:oe.Callbacks("once memory").add(function(){me.remove(t,[e+"queue",n])})})}}),oe.fn.extend({queue:function(t,n){var r=2;return"string"!=typeof t&&(n=t,t="fx",r--),r>arguments.length?oe.queue(this[0],t):n===e?this:this.each(function(){var e=oe.queue(this,t,n);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},delay:function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var r,i=1,o=oe.Deferred(),s=this,a=this.length,u=function(){--i||o.resolveWith(s,[s])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)r=me.get(s[a],t+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var ye,be,we=/[\t\r\n\f]/g,xe=/\r/g,ke=/^(?:input|select|textarea|button)$/i;oe.fn.extend({attr:function(t,e){return oe.access(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})},prop:function(t,e){return oe.access(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[oe.propFix[t]||t]})},addClass:function(t){var e,n,r,i,o,s=0,a=this.length,u="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(we," "):" ")){for(o=0;i=e[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=oe.trim(r)}return this},removeClass:function(t){var e,n,r,i,o,s=0,a=this.length,u=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(ae)||[];a>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(we," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=t?oe.trim(r):""}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):oe.isFunction(t)?this.each(function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,r=0,i=oe(this),o=t.match(ae)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(n===q||"boolean"===n)&&(this.className&&me.set(this,"__className__",this.className),this.className=this.className||t===!1?"":me.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(we," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,r,i,o=this[0];return arguments.length?(i=oe.isFunction(t),this.each(function(r){var o;1===this.nodeType&&(o=i?t.call(this,r,oe(this).val()):t,null==o?o="":"number"==typeof o?o+="":oe.isArray(o)&&(o=oe.map(o,function(t){return null==t?"":t+""})),n=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==e||(this.value=o))})):o?(n=oe.valHooks[o.type]||oe.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(o,"value"))!==e?r:(r=o.value,"string"==typeof r?r.replace(xe,""):null==r?"":r)):void 0}}),oe.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(oe.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=oe.makeArray(e),s=i.length;s--;)r=i[s],(r.selected=oe.inArray(oe(r).val(),o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}},attr:function(t,n,r){var i,o,s=t.nodeType;return t&&3!==s&&8!==s&&2!==s?typeof t.getAttribute===q?oe.prop(t,n,r):(1===s&&oe.isXMLDoc(t)||(n=n.toLowerCase(),i=oe.attrHooks[n]||(oe.expr.match.bool.test(n)?be:ye)),r===e?i&&"get"in i&&null!==(o=i.get(t,n))?o:(o=oe.find.attr(t,n),null==o?e:o):null!==r?i&&"set"in i&&(o=i.set(t,r,n))!==e?o:(t.setAttribute(n,r+""),r):(oe.removeAttr(t,n),e)):void 0},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(ae);if(o&&1===t.nodeType)for(;n=o[i++];)r=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!oe.support.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,n,r){var i,o,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(s=1!==a||!oe.isXMLDoc(t),s&&(n=oe.propFix[n]||n,o=oe.propHooks[n]),r!==e?o&&"set"in o&&(i=o.set(t,r,n))!==e?i:t[n]=r:o&&"get"in o&&null!==(i=o.get(t,n))?i:t[n]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ke.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),be={set:function(t,e,n){return e===!1?oe.removeAttr(t,n):t.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(t,n){var r=oe.expr.attrHandle[n]||oe.find.attr;oe.expr.attrHandle[n]=function(t,n,i){var o=oe.expr.attrHandle[n],s=i?e:(oe.expr.attrHandle[n]=e)!=r(t,n,i)?n.toLowerCase():null;return oe.expr.attrHandle[n]=o,s}}),oe.support.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,n){return oe.isArray(n)?t.checked=oe.inArray(oe(t).val(),n)>=0:e}},oe.support.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Se=/^key/,Te=/^(?:mouse|contextmenu)|click/,De=/^(?:focusinfocus|focusoutblur)$/,Ee=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,n,r,i,o){var s,a,u,l,c,h,f,d,p,g,m,_=me.get(t);if(_){for(r.handler&&(s=r,r=s.handler,o=s.selector),r.guid||(r.guid=oe.guid++),(l=_.events)||(l=_.events={}),(a=_.handle)||(a=_.handle=function(t){return typeof oe===q||t&&oe.event.triggered===t.type?e:oe.event.dispatch.apply(a.elem,arguments)},a.elem=t),n=(n||"").match(ae)||[""],c=n.length;c--;)u=Ee.exec(n[c])||[],p=m=u[1],g=(u[2]||"").split(".").sort(),p&&(f=oe.event.special[p]||{},p=(o?f.delegateType:f.bindType)||p,f=oe.event.special[p]||{},h=oe.extend({type:p,origType:m,data:i,handler:r,guid:r.guid,selector:o,needsContext:o&&oe.expr.match.needsContext.test(o),namespace:g.join(".")},s),(d=l[p])||(d=l[p]=[],d.delegateCount=0,f.setup&&f.setup.call(t,i,g,a)!==!1||t.addEventListener&&t.addEventListener(p,a,!1)),f.add&&(f.add.call(t,h),h.handler.guid||(h.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,h):d.push(h),oe.event.global[p]=!0);t=null}},remove:function(t,e,n,r,i){var o,s,a,u,l,c,h,f,d,p,g,m=me.hasData(t)&&me.get(t);if(m&&(u=m.events)){for(e=(e||"").match(ae)||[""],l=e.length;l--;)if(a=Ee.exec(e[l])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d){for(h=oe.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,f=u[d]||[],a=a[2]&&RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)c=f[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(t,c));s&&!f.length&&(h.teardown&&h.teardown.call(t,p,m.handle)!==!1||oe.removeEvent(t,d,m.handle),delete u[d])}else for(d in u)oe.event.remove(t,d+e[l],n,r,!0);oe.isEmptyObject(u)&&(delete m.handle,me.remove(t,"events"))}},trigger:function(n,r,i,o){var s,a,u,l,c,h,f,d=[i||W],p=re.call(n,"type")?n.type:n,g=re.call(n,"namespace")?n.namespace.split("."):[];if(a=u=i=i||W,3!==i.nodeType&&8!==i.nodeType&&!De.test(p+oe.event.triggered)&&(p.indexOf(".")>=0&&(g=p.split("."),p=g.shift(),g.sort()),c=0>p.indexOf(":")&&"on"+p,n=n[oe.expando]?n:new oe.Event(p,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=i),r=null==r?[n]:oe.makeArray(r,[n]),f=oe.event.special[p]||{},o||!f.trigger||f.trigger.apply(i,r)!==!1)){if(!o&&!f.noBubble&&!oe.isWindow(i)){for(l=f.delegateType||p,De.test(l+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),u=a;u===(i.ownerDocument||W)&&d.push(u.defaultView||u.parentWindow||t)}for(s=0;(a=d[s++])&&!n.isPropagationStopped();)n.type=s>1?l:f.bindType||p,h=(me.get(a,"events")||{})[n.type]&&me.get(a,"handle"),h&&h.apply(a,r),h=c&&a[c],h&&oe.acceptData(a)&&h.apply&&h.apply(a,r)===!1&&n.preventDefault();return n.type=p,o||n.isDefaultPrevented()||f._default&&f._default.apply(d.pop(),r)!==!1||!oe.acceptData(i)||c&&oe.isFunction(i[p])&&!oe.isWindow(i)&&(u=i[c],u&&(i[c]=null),oe.event.triggered=p,i[p](),oe.event.triggered=e,u&&(i[c]=u)),n.result}},dispatch:function(t){t=oe.event.fix(t);var n,r,i,o,s,a=[],u=te.call(arguments),l=(me.get(this,"events")||{})[t.type]||[],c=oe.event.special[t.type]||{};if(u[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(a=oe.event.handlers.call(this,t,l),n=0;(o=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(s=o.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(s.namespace))&&(t.handleObj=s,t.data=s.data,i=((oe.event.special[s.origType]||{}).handle||s.handler).apply(o.elem,u),i!==e&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,n){var r,i,o,s,a=[],u=n.delegateCount,l=t.target;if(u&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(i=[],r=0;u>r;r++)s=n[r],o=s.selector+" ",i[o]===e&&(i[o]=s.needsContext?oe(o,this).index(l)>=0:oe.find(o,this,null,[l]).length),i[o]&&i.push(s);i.length&&a.push({elem:l,handlers:i})}return n.length>u&&a.push({elem:this,handlers:n.slice(u)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var r,i,o,s=n.button;return null==t.pageX&&null!=n.clientX&&(r=t.target.ownerDocument||W,i=r.documentElement,o=r.body,t.pageX=n.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),t.pageY=n.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[oe.expando])return t;var e,n,r,i=t.type,o=t,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Te.test(i)?this.mouseHooks:Se.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,t=new oe.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=W),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):e},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oe.nodeName(this,"input")?(this.click(),!1):e},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?oe.event.trigger(i,null,e):oe.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},oe.Event=function(t,n){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?s:a):this.type=t,n&&oe.extend(this,n),this.timeStamp=t&&t.timeStamp||oe.now(),this[oe.expando]=!0,e):new oe.Event(t,n)},oe.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=s,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=s,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!oe.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),oe.support.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,r=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){0===n++&&W.addEventListener(t,r,!0)},teardown:function(){0===--n&&W.removeEventListener(t,r,!0)}}}),oe.fn.extend({on:function(t,n,r,i,o){var s,u;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=e);for(u in t)this.on(u,n,r,t[u],o);return this}if(null==r&&null==i?(i=n,r=n=e):null==i&&("string"==typeof n?(i=r,r=e):(i=r,r=n,n=e)),i===!1)i=a;else if(!i)return this;return 1===o&&(s=i,i=function(t){return oe().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,i,r,n)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,n,r){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,oe(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=e),r===!1&&(r=a),this.each(function(){oe.event.remove(this,t,r,n)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,n){var r=this[0];return r?oe.event.trigger(t,n,r,!0):e}});var Ce=/^.[^:#\[\.,]*$/,Ae=/^(?:parents|prev(?:Until|All))/,Oe=oe.expr.match.needsContext,Ne={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({find:function(t){var e,n=[],r=this,i=r.length;if("string"!=typeof t)return this.pushStack(oe(t).filter(function(){for(e=0;i>e;e++)if(oe.contains(r[e],this))return!0}));for(e=0;i>e;e++)oe.find(t,r[e],n);return n=this.pushStack(i>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e=oe(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(oe.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(c(this,t||[],!0))},filter:function(t){return this.pushStack(c(this,t||[],!1))},is:function(t){return!!c(this,"string"==typeof t&&Oe.test(t)?oe(t):t||[],!1).length},closest:function(t,e){for(var n,r=0,i=this.length,o=[],s=Oe.test(t)||"string"!=typeof t?oe(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(11>n.nodeType&&(s?s.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){n=o.push(n);break}return this.pushStack(o.length>1?oe.unique(o):o)},index:function(t){return t?"string"==typeof t?ee.call(oe(t),this[0]):ee.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?oe(t,e):oe.makeArray(t&&t.nodeType?[t]:t),r=oe.merge(this.get(),n);return this.pushStack(oe.unique(r))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return l(t,"nextSibling")},prev:function(t){return l(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return t.contentDocument||oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,r){var i=oe.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=oe.filter(r,i)),this.length>1&&(Ne[t]||oe.unique(i),Ae.test(t)&&i.reverse()),this.pushStack(i)}}),oe.extend({filter:function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?oe.find.matchesSelector(r,t)?[r]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,r){for(var i=[],o=r!==e;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&oe(t).is(r))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Le=/<([\w:]+)/,Me=/<|&#?\w+;/,je=/<(?:script|style|link)/i,Ie=/^(?:checkbox|radio)$/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^$|\/(?:java|ecma)script/i,Fe=/^true\/(.*)/,ze=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Be={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Be.optgroup=Be.option,Be.tbody=Be.tfoot=Be.colgroup=Be.caption=Be.thead,Be.th=Be.td,oe.fn.extend({text:function(t){return oe.access(this,function(t){return t===e?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=h(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?oe.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||oe.cleanData(m(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&p(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(oe.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return oe.access(this,function(t){var n=this[0]||{},r=0,i=this.length;if(t===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!je.test(t)&&!Be[(Le.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Pe,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(oe.cleanData(m(n,!1)),n.innerHTML=t);n=0}catch(o){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=oe.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var r=t[e++],i=t[e++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),oe(this).remove(),i.insertBefore(n,r))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=Z.apply([],t);var r,i,o,s,a,u,l=0,c=this.length,h=this,p=c-1,g=t[0],_=oe.isFunction(g);if(_||!(1>=c||"string"!=typeof g||oe.support.checkClone)&&Ue.test(g))return this.each(function(r){var i=h.eq(r);_&&(t[0]=g.call(this,r,i.html())),i.domManip(t,e,n)});if(c&&(r=oe.buildFragment(t,this[0].ownerDocument,!1,!n&&this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(o=oe.map(m(r,"script"),f),s=o.length;c>l;l++)a=r,l!==p&&(a=oe.clone(a,!0,!0),s&&oe.merge(o,m(a,"script"))),e.call(this[l],a,l);if(s)for(u=o[o.length-1].ownerDocument,oe.map(o,d),l=0;s>l;l++)a=o[l],Re.test(a.type||"")&&!me.access(a,"globalEval")&&oe.contains(u,a)&&(a.src?oe._evalUrl(a.src):oe.globalEval(a.textContent.replace(ze,"")))}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,r=[],i=oe(t),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),oe(i[s])[e](n),Q.apply(r,n.get());return this.pushStack(r)}}),oe.extend({clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),u=oe.contains(t.ownerDocument,t);if(!(oe.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(s=m(a),o=m(t),r=0,i=o.length;i>r;r++)_(o[r],s[r]);if(e)if(n)for(o=o||m(t),s=s||m(a),r=0,i=o.length;i>r;r++)g(o[r],s[r]);else g(t,a);return s=m(a,"script"),s.length>0&&p(s,!u&&m(t,"script")),a},buildFragment:function(t,e,n,r){for(var i,o,s,a,u,l,c=0,h=t.length,f=e.createDocumentFragment(),d=[];h>c;c++)if(i=t[c],i||0===i)if("object"===oe.type(i))oe.merge(d,i.nodeType?[i]:i);else if(Me.test(i)){for(o=o||f.appendChild(e.createElement("div")),s=(Le.exec(i)||["",""])[1].toLowerCase(),a=Be[s]||Be._default,o.innerHTML=a[1]+i.replace(Pe,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;oe.merge(d,o.childNodes),o=f.firstChild,o.textContent=""}else d.push(e.createTextNode(i));for(f.textContent="",c=0;i=d[c++];)if((!r||-1===oe.inArray(i,r))&&(u=oe.contains(i.ownerDocument,i),o=m(f.appendChild(i),"script"),u&&p(o),n))for(l=0;i=o[l++];)Re.test(i.type||"")&&n.push(i);return f},cleanData:function(t){for(var n,r,o,s,a,u,l=oe.event.special,c=0;(r=t[c])!==e;c++){if(i.accepts(r)&&(a=r[me.expando],a&&(n=me.cache[a]))){if(o=Object.keys(n.events||{}),o.length)for(u=0;(s=o[u])!==e;u++)l[s]?oe.event.remove(r,s):oe.removeEvent(r,s,n.handle);me.cache[a]&&delete me.cache[a]}delete ge.cache[r[ge.expando]]}},_evalUrl:function(t){return oe.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),oe.fn.extend({wrapAll:function(t){var e;return oe.isFunction(t)?this.each(function(e){oe(this).wrapAll(t.call(this,e))}):(this[0]&&(e=oe(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return oe.isFunction(t)?this.each(function(e){oe(this).wrapInner(t.call(this,e))}):this.each(function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}});var He,qe,Xe=/^(none|table(?!-c[ea]).+)/,We=/^margin/,$e=RegExp("^("+se+")(.*)$","i"),Ve=RegExp("^("+se+")(?!px)[a-z%]+$","i"),Ye=RegExp("^([+-])=("+se+")","i"),Ge={BODY:"block"},Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:0,fontWeight:400},Ze=["Top","Right","Bottom","Left"],Qe=["Webkit","O","Moz","ms"];oe.fn.extend({css:function(t,n){return oe.access(this,function(t,n,r){var i,o,s={},a=0;if(oe.isArray(n)){for(i=b(t),o=n.length;o>a;a++)s[n[a]]=oe.css(t,n[a],!1,i);return s
}return r!==e?oe.style(t,n,r):oe.css(t,n)},t,n,arguments.length>1)},show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){y(this)?oe(this).show():oe(this).hide()})}}),oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=He(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,n,r,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,a,u=oe.camelCase(n),l=t.style;return n=oe.cssProps[u]||(oe.cssProps[u]=v(l,u)),a=oe.cssHooks[n]||oe.cssHooks[u],r===e?a&&"get"in a&&(o=a.get(t,!1,i))!==e?o:l[n]:(s=typeof r,"string"===s&&(o=Ye.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(oe.css(t,n)),s="number"),null==r||"number"===s&&isNaN(r)||("number"!==s||oe.cssNumber[u]||(r+="px"),oe.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),a&&"set"in a&&(r=a.set(t,r,i))===e||(l[n]=r)),e)}},css:function(t,n,r,i){var o,s,a,u=oe.camelCase(n);return n=oe.cssProps[u]||(oe.cssProps[u]=v(t.style,u)),a=oe.cssHooks[n]||oe.cssHooks[u],a&&"get"in a&&(o=a.get(t,!0,r)),o===e&&(o=He(t,n,i)),"normal"===o&&n in Ke&&(o=Ke[n]),""===r||r?(s=parseFloat(o),r===!0||oe.isNumeric(s)?s||0:o):o}}),He=function(t,n,r){var i,o,s,a=r||b(t),u=a?a.getPropertyValue(n)||a[n]:e,l=t.style;return a&&(""!==u||oe.contains(t.ownerDocument,t)||(u=oe.style(t,n)),Ve.test(u)&&We.test(n)&&(i=l.width,o=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=a.width,l.width=i,l.minWidth=o,l.maxWidth=s)),u},oe.each(["height","width"],function(t,n){oe.cssHooks[n]={get:function(t,r,i){return r?0===t.offsetWidth&&Xe.test(oe.css(t,"display"))?oe.swap(t,Je,function(){return S(t,n,i)}):S(t,n,i):e},set:function(t,e,r){var i=r&&b(t);return x(t,e,r?k(t,n,r,oe.support.boxSizing&&"border-box"===oe.css(t,"boxSizing",!1,i),i):0)}}}),oe(function(){oe.support.reliableMarginRight||(oe.cssHooks.marginRight={get:function(t,n){return n?oe.swap(t,{display:"inline-block"},He,[t,"marginRight"]):e}}),!oe.support.pixelPosition&&oe.fn.position&&oe.each(["top","left"],function(t,n){oe.cssHooks[n]={get:function(t,r){return r?(r=He(t,n),Ve.test(r)?oe(t).position()[n]+"px":r):e}}})}),oe.expr&&oe.expr.filters&&(oe.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+Ze[r]+e]=o[r]||o[r-2]||o[0];return i}},We.test(t)||(oe.cssHooks[t+e].set=x)});var tn=/%20/g,en=/\[\]$/,nn=/\r?\n/g,rn=/^(?:submit|button|image|reset|file)$/i,on=/^(?:input|select|textarea|keygen)/i;oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&on.test(this.nodeName)&&!rn.test(t)&&(this.checked||!Ie.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(nn,"\r\n")}}):{name:e.name,value:n.replace(nn,"\r\n")}}).get()}}),oe.param=function(t,n){var r,i=[],o=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){o(this.name,this.value)});else for(r in t)E(r,t[r],n,o);return i.join("&").replace(tn,"+")},oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var sn,an,un=oe.now(),ln=/\?/,cn=/#.*$/,hn=/([?&])_=[^&]*/,fn=/^(.*?):[ \t]*([^\r\n]*)$/gm,dn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pn=/^(?:GET|HEAD)$/,gn=/^\/\//,mn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_n=oe.fn.load,vn={},yn={},bn="*/".concat("*");try{an=X.href}catch(wn){an=W.createElement("a"),an.href="",an=an.href}sn=mn.exec(an.toLowerCase())||[],oe.fn.load=function(t,n,r){if("string"!=typeof t&&_n)return _n.apply(this,arguments);var i,o,s,a=this,u=t.indexOf(" ");return u>=0&&(i=t.slice(u),t=t.slice(0,u)),oe.isFunction(n)?(r=n,n=e):n&&"object"==typeof n&&(o="POST"),a.length>0&&oe.ajax({url:t,type:o,dataType:"html",data:n}).done(function(t){s=arguments,a.html(i?oe("<div>").append(oe.parseHTML(t)).find(i):t)}).complete(r&&function(t,e){a.each(r,s||[t.responseText,e,t])}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:an,type:"GET",isLocal:dn.test(sn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?O(O(t,oe.ajaxSettings),e):O(oe.ajaxSettings,t)},ajaxPrefilter:C(vn),ajaxTransport:C(yn),ajax:function(t,n){function r(t,n,r,a){var l,h,v,y,w,k=n;2!==b&&(b=2,u&&clearTimeout(u),i=e,s=a||"",x.readyState=t>0?4:0,l=t>=200&&300>t||304===t,r&&(y=N(f,x,r)),y=P(f,y,x,l),l?(f.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(oe.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(oe.etag[o]=w)),204===t||"HEAD"===f.type?k="nocontent":304===t?k="notmodified":(k=y.state,h=y.data,v=y.error,l=!v)):(v=k,(t||!k)&&(k="error",0>t&&(t=0))),x.status=t,x.statusText=(n||k)+"",l?g.resolveWith(d,[h,k,x]):g.rejectWith(d,[x,k,v]),x.statusCode(_),_=e,c&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,f,l?h:v]),m.fireWith(d,[x,k]),c&&(p.trigger("ajaxComplete",[x,f]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var i,o,s,a,u,l,c,h,f=oe.ajaxSetup({},n),d=f.context||f,p=f.context&&(d.nodeType||d.jquery)?oe(d):oe.event,g=oe.Deferred(),m=oe.Callbacks("once memory"),_=f.statusCode||{},v={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!a)for(a={};e=fn.exec(s);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return b||(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)_[e]=[_[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return i&&i.abort(e),r(0,e),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,f.url=((t||f.url||an)+"").replace(cn,"").replace(gn,sn[1]+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=oe.trim(f.dataType||"*").toLowerCase().match(ae)||[""],null==f.crossDomain&&(l=mn.exec(f.url.toLowerCase()),f.crossDomain=!(!l||l[1]===sn[1]&&l[2]===sn[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(sn[3]||("http:"===sn[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=oe.param(f.data,f.traditional)),A(vn,f,n,x),2===b)return x;c=f.global,c&&0===oe.active++&&oe.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!pn.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(ln.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=hn.test(o)?o.replace(hn,"$1_="+un++):o+(ln.test(o)?"&":"?")+"_="+un++)),f.ifModified&&(oe.lastModified[o]&&x.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&x.setRequestHeader("If-None-Match",oe.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",f.contentType),x.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+bn+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)x.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(f.beforeSend.call(d,x,f)===!1||2===b))return x.abort();w="abort";for(h in{success:1,error:1,complete:1})x[h](f[h]);if(i=A(yn,f,n,x)){x.readyState=1,c&&p.trigger("ajaxSend",[x,f]),f.async&&f.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},f.timeout));try{b=1,i.send(v,r)}catch(k){if(!(2>b))throw k;r(-1,k)}}else r(-1,"No Transport");return x},getJSON:function(t,e,n){return oe.get(t,e,n,"json")},getScript:function(t,n){return oe.get(t,e,n,"script")}}),oe.each(["get","post"],function(t,n){oe[n]=function(t,r,i,o){return oe.isFunction(r)&&(o=o||i,i=r,r=e),oe.ajax({url:t,type:n,dataType:o,data:r,success:i})}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=oe("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),W.head.appendChild(e[0])},abort:function(){n&&n()}}}});var xn=[],kn=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=xn.pop()||oe.expando+"_"+un++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(n,r,i){var o,s,a,u=n.jsonp!==!1&&(kn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&kn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=oe.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(kn,"$1"+o):n.jsonp!==!1&&(n.url+=(ln.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||oe.error(o+" was not called"),a[0]},n.dataTypes[0]="json",s=t[o],t[o]=function(){a=arguments},i.always(function(){t[o]=s,n[o]&&(n.jsonpCallback=r.jsonpCallback,xn.push(o)),a&&oe.isFunction(s)&&s(a[0]),a=s=e}),"script"):e}),oe.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Sn=oe.ajaxSettings.xhr(),Tn={0:200,1223:204},Dn=0,En={};t.ActiveXObject&&oe(t).on("unload",function(){for(var t in En)En[t]();En=e}),oe.support.cors=!!Sn&&"withCredentials"in Sn,oe.support.ajax=Sn=!!Sn,oe.ajaxTransport(function(t){var n;return oe.support.cors||Sn&&!t.crossDomain?{send:function(r,i){var o,s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)a.setRequestHeader(o,r[o]);n=function(t){return function(){n&&(delete En[s],n=a.onload=a.onerror=null,"abort"===t?a.abort():"error"===t?i(a.status||404,a.statusText):i(Tn[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:e,a.getAllResponseHeaders()))}},a.onload=n(),a.onerror=n("error"),n=En[s=Dn++]=n("abort"),a.send(t.hasContent&&t.data||null)},abort:function(){n&&n()}}:e});var Cn,An,On=/^(?:toggle|show|hide)$/,Nn=RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),Pn=/queueHooks$/,Ln=[U],Mn={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=Nn.exec(e),o=i&&i[3]||(oe.cssNumber[t]?"":"px"),s=(oe.cssNumber[t]||"px"!==o&&+r)&&Nn.exec(oe.css(n.elem,t)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,oe.style(n.elem,t,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};oe.Animation=oe.extend(j,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],Mn[n]=Mn[n]||[],Mn[n].unshift(e)},prefilter:function(t,e){e?Ln.unshift(t):Ln.push(t)}}),oe.Tween=R,R.prototype={constructor:R,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var t=R.propHooks[this.prop];return t&&t.get?t.get(this):R.propHooks._default.get(this)},run:function(t){var e,n=R.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(F(e,!0),t,r,i)}}),oe.fn.extend({fadeTo:function(t,e,n,r){return this.filter(y).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=oe.isEmptyObject(t),o=oe.speed(e,n,r),s=function(){var e=j(this,oe.extend({},t),o);(i||me.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,n,r){var i=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof t&&(r=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",o=oe.timers,s=me.get(this);if(n)s[n]&&s[n].stop&&i(s[n]);else for(n in s)s[n]&&s[n].stop&&Pn.test(n)&&i(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=t&&o[n].queue!==t||(o[n].anim.stop(r),e=!1,o.splice(n,1));(e||!r)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=me.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=oe.timers,s=r?r.length:0;for(n.finish=!0,oe.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),oe.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),oe.speed=function(t,e,n){var r=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return r.duration=oe.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in oe.fx.speeds?oe.fx.speeds[r.duration]:oe.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){oe.isFunction(r.old)&&r.old.call(this),r.queue&&oe.dequeue(this,r.queue)},r},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.timers=[],oe.fx=R.prototype.init,oe.fx.tick=function(){var t,n=oe.timers,r=0;for(Cn=oe.now();n.length>r;r++)t=n[r],t()||n[r]!==t||n.splice(r--,1);n.length||oe.fx.stop(),Cn=e},oe.fx.timer=function(t){t()&&oe.timers.push(t)&&oe.fx.start()},oe.fx.interval=13,oe.fx.start=function(){An||(An=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(An),An=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fx.step={},oe.expr&&oe.expr.filters&&(oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length}),oe.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var n,r,i=this[0],o={top:0,left:0},s=i&&i.ownerDocument;return s?(n=s.documentElement,oe.contains(n,i)?(typeof i.getBoundingClientRect!==q&&(o=i.getBoundingClientRect()),r=z(s),{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}):o):void 0},oe.offset={setOffset:function(t,e,n){var r,i,o,s,a,u,l,c=oe.css(t,"position"),h=oe(t),f={};"static"===c&&(t.style.position="relative"),a=h.offset(),o=oe.css(t,"top"),u=oe.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=h.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),oe.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(f.top=e.top-a.top+s),null!=e.left&&(f.left=e.left-a.left+i),"using"in e?e.using.call(t,f):h.css(f)}},oe.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===oe.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(r=t.offset()),r.top+=oe.css(t[0],"borderTopWidth",!0),r.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-oe.css(n,"marginTop",!0),left:e.left-r.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||$;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||$})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,r){var i="pageYOffset"===r;oe.fn[n]=function(o){return oe.access(this,function(n,o,s){var a=z(n);return s===e?a?a[r]:n[o]:(a?a.scrollTo(i?t.pageXOffset:s,i?s:t.pageYOffset):n[o]=s,e)},n,o,arguments.length,null)}}),oe.each({Height:"height",Width:"width"},function(t,n){oe.each({padding:"inner"+t,content:n,"":"outer"+t},function(r,i){oe.fn[i]=function(i,o){var s=arguments.length&&(r||"boolean"!=typeof i),a=r||(i===!0||o===!0?"margin":"border");return oe.access(this,function(n,r,i){var o;return oe.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+t],o["scroll"+t],n.body["offset"+t],o["offset"+t],o["client"+t])):i===e?oe.css(n,r,a):oe.style(n,r,i,a)},n,s?i:e,s,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=oe:"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe}),"object"==typeof t&&"object"==typeof t.document&&(t.jQuery=t.$=oe)}(window),!function(t){function e(t,e){var n;if(t&&pe[typeof t])for(n in t)if(De.call(t,n)&&e(t[n],n,t)===te)break}function n(t,e){var n;if(t&&pe[typeof t])for(n in t)if(e(t[n],n,t)===te)break}function r(t){var e,n=[];if(!t||!pe[typeof t])return n;for(e in t)De.call(t,e)&&n.push(e);return n}function i(t,e,n){n=(n||0)-1;for(var r=t.length;++n<r;)if(t[n]===e)return n;return-1}function o(t,e){var n=t.m,r=e.m;if(t=t.l,e=e.l,t!==e){if(t>e||"undefined"==typeof t)return 1;if(e>t||"undefined"==typeof e)return-1}return r>n?-1:1}function s(t){return"\\"+ge[t]}function a(){}function u(t){return t instanceof u?t:new l(t)}function l(t){this.__wrapped__=t}function c(t,e,n){function r(){var u=arguments,l=o?this:e;return i||(t=e[s]),n.length&&(u=u.length?(u=Fe.call(u),a?u.concat(n):n.concat(u)):n),this instanceof r?(l=h(t.prototype),u=t.apply(l,u),k(u)?u:l):t.apply(l,u)}var i=x(t),o=!n,s=e;if(o){var a=void 0;n=e}else if(!i)throw new TypeError;return r}function h(t){return k(t)?Ne(t):{}}function f(t){return Xe[t]}function d(){var t=(t=u.indexOf)===H?i:t;return t}function p(t){return We[t]}function g(t){return Ae.call(t)==se}function m(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)t[i]=r[i]}return t}function _(t){if(!t)return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];if(r)for(var i in r)t[i]==K&&(t[i]=r[i])}return t}function v(t){var e=[];return n(t,function(t,n){x(t)&&e.push(n)}),e.sort()}function y(t){for(var e=-1,n=qe(t),r=n.length,i={};++e<r;){var o=n[e];i[t[o]]=o}return i}function b(t){if(!t)return J;if(He(t)||T(t))return!t.length;for(var e in t)if(De.call(t,e))return Z;return J}function w(t,e,r,i){if(t===e)return 0!==t||1/t==1/e;var o=typeof t,s=typeof e;if(t===t&&(!t||"function"!=o&&"object"!=o)&&(!e||"function"!=s&&"object"!=s))return Z;if(t==K||e==K)return t===e;if(s=Ae.call(t),o=Ae.call(e),s!=o)return Z;switch(s){case ue:case le:return+t==+e;case ce:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case fe:case de:return t==e+""}if(o=s==ae,!o){if(t instanceof u||e instanceof u)return w(t.__wrapped__||t,e.__wrapped__||e,r,i);if(s!=he)return Z;var s=t.constructor,a=e.constructor;if(!(s==a||x(s)&&s instanceof s&&x(a)&&a instanceof a))return Z}for(r||(r=[]),i||(i=[]),s=r.length;s--;)if(r[s]==t)return i[s]==e;var l=J,c=0;if(r.push(t),i.push(e),o){if(c=e.length,l=c==t.length)for(;c--&&(l=w(t[c],e[c],r,i)););return l}return n(e,function(e,n,o){return De.call(o,n)?(c++,!(l=De.call(t,n)&&w(t[n],e,r,i))&&te):void 0}),l&&n(t,function(t,e,n){return De.call(n,e)?!(l=-1<--c)&&te:void 0}),l}function x(t){return"function"==typeof t}function k(t){return!(!t||!pe[typeof t])}function S(t){return"number"==typeof t||Ae.call(t)==ce}function T(t){return"string"==typeof t||Ae.call(t)==de}function D(t){for(var e=-1,n=qe(t),r=n.length,i=Array(r);++e<r;)i[e]=t[n[e]];return i}function E(t,n){var r=d(),i=t?t.length:0,o=Z;return i&&"number"==typeof i?o=-1<r(t,n):e(t,function(t){return(o=t===n)&&te}),o}function C(t,n,r){var i=J;n=V(n,r),r=-1;var o=t?t.length:0;if("number"==typeof o)for(;++r<o&&(i=!!n(t[r],r,t)););else e(t,function(t,e,r){return!(i=!!n(t,e,r))&&te});return i}function A(t,n,r){var i=[];n=V(n,r),r=-1;var o=t?t.length:0;if("number"==typeof o)for(;++r<o;){var s=t[r];n(s,r,t)&&i.push(s)}else e(t,function(t,e,r){n(t,e,r)&&i.push(t)});return i}function O(t,n,r){n=V(n,r),r=-1;var i=t?t.length:0;if("number"!=typeof i){var o;return e(t,function(t,e,r){return n(t,e,r)?(o=t,te):void 0}),o}for(;++r<i;){var s=t[r];if(n(s,r,t))return s}}function N(t,n,r){var i=-1,o=t?t.length:0;if(n=n&&"undefined"==typeof r?n:V(n,r),"number"==typeof o)for(;++i<o&&n(t[i],i,t)!==te;);else e(t,n)}function P(t,n,r){var i=-1,o=t?t.length:0;if(n=V(n,r),"number"==typeof o)for(var s=Array(o);++i<o;)s[i]=n(t[i],i,t);else s=[],e(t,function(t,e,r){s[++i]=n(t,e,r)});return s}function L(t,e,n){var r=-1/0,i=r,o=-1,s=t?t.length:0;if(e||"number"!=typeof s)e=V(e,n),N(t,function(t,n,o){n=e(t,n,o),n>r&&(r=n,i=t)});else for(;++o<s;)n=t[o],n>i&&(i=n);return i}function M(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r)for(var i=Array(r);++n<r;)i[n]=t[n][e];return i||P(t,e)}function j(t,n,r,i){if(!t)return r;var o=3>arguments.length;n=V(n,i,4);var s=-1,a=t.length;if("number"==typeof a)for(o&&(r=t[++s]);++s<a;)r=n(r,t[s],s,t);else e(t,function(t,e,i){r=o?(o=Z,t):n(r,t,e,i)});return r}function I(t,e,n,r){var i=t?t.length:0,o=3>arguments.length;if("number"!=typeof i)var s=qe(t),i=s.length;return e=V(e,r,4),N(t,function(r,a,u){a=s?s[--i]:--i,n=o?(o=Z,t[a]):e(n,t[a],a,u)}),n}function U(t,n,r){var i;n=V(n,r),r=-1;var o=t?t.length:0;if("number"==typeof o)for(;++r<o&&!(i=n(t[r],r,t)););else e(t,function(t,e,r){return(i=n(t,e,r))&&te});return!!i}function R(t,e,n){return n&&b(e)?K:(n?O:A)(t,e)}function F(t){for(var e=-1,n=d(),r=t.length,i=Se.apply(ye,Fe.call(arguments,1)),o=[];++e<r;){var s=t[e];0>n(i,s)&&o.push(s)}return o}function z(t,e,n){if(t){var r=0,i=t.length;if("number"!=typeof e&&e!=K){var o=-1;for(e=V(e,n);++o<i&&e(t[o],o,t);)r++}else if(r=e,r==K||n)return t[0];return Fe.call(t,0,Ue(Ie(0,r),i))}}function B(t,e){for(var n=-1,r=t?t.length:0,i=[];++n<r;){var o=t[n];He(o)?Ee.apply(i,e?o:B(o)):i.push(o)}return i}function H(t,e,n){if("number"==typeof n){var r=t?t.length:0;n=0>n?Ie(0,r+n):n||0}else if(n)return n=X(t,e),t[n]===e?n:-1;return t?i(t,e,n):-1}function q(t,e,n){if("number"!=typeof e&&e!=K){var r=0,i=-1,o=t?t.length:0;for(e=V(e,n);++i<o&&e(t[i],i,t);)r++}else r=e==K||n?1:Ie(0,e);return Fe.call(t,r)}function X(t,e,n,r){var i=0,o=t?t.length:i;for(n=n?V(n,r,1):Y,e=n(e);o>i;)r=i+o>>>1,n(t[r])<e?i=r+1:o=r;return i}function W(t,e,n,r){var i=-1,o=d(),s=t?t.length:0,a=[],u=a;for("boolean"!=typeof e&&e!=K&&(r=n,n=e,e=Z),n!=K&&(u=[],n=V(n,r));++i<s;){r=t[i];var l=n?n(r,i,t):r;(e?!i||u[u.length-1]!==l:0>o(u,l))&&(n&&u.push(l),a.push(r))}return a}function $(t,e){return Be.fastBind||Oe&&2<arguments.length?Oe.call.apply(Oe,arguments):c(t,e,Fe.call(arguments,2))}function V(t,e,n){if(t==K)return Y;var r=typeof t;if("function"!=r){if("object"!=r)return function(e){return e[t]};var i=qe(t);return function(e){for(var n=i.length,r=Z;n--&&(r=e[i[n]]===t[i[n]]););return r}}return"undefined"==typeof e?t:1===n?function(n){return t.call(e,n)}:2===n?function(n,r){return t.call(e,n,r)}:4===n?function(n,r,i,o){return t.call(e,n,r,i,o)}:function(n,r,i){return t.call(e,n,r,i)}}function Y(t){return t}function G(t){N(v(t),function(e){var n=u[e]=t[e];u.prototype[e]=function(){var t=[this.__wrapped__];return Ee.apply(t,arguments),t=n.apply(u,t),this.__chain__&&(t=new l(t),t.__chain__=J),t}})}var J=!0,K=null,Z=!1,Q=0,te={},ee=+new Date+"",ne=/&(?:amp|lt|gt|quot|#39);/g,re=/($^)/,ie=/[&<>"']/g,oe=/['\n\r\t\u2028\u2029\\]/g,se="[object Arguments]",ae="[object Array]",ue="[object Boolean]",le="[object Date]",ce="[object Number]",he="[object Object]",fe="[object RegExp]",de="[object String]",pe={"boolean":Z,"function":J,object:J,number:Z,string:Z,undefined:Z},ge={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},me=pe[typeof exports]&&exports,_e=pe[typeof module]&&module&&module.exports==me&&module,ve=pe[typeof global]&&global;!ve||ve.global!==ve&&ve.window!==ve||(t=ve);var ye=[],ve=Object.prototype,be=t._,we=RegExp("^"+(ve.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),xe=Math.ceil,ke=t.clearTimeout,Se=ye.concat,Te=Math.floor,De=ve.hasOwnProperty,Ee=ye.push,Ce=t.setTimeout,Ae=ve.toString,Oe=we.test(Oe=Ae.bind)&&Oe,Ne=we.test(Ne=Object.create)&&Ne,Pe=we.test(Pe=Array.isArray)&&Pe,Le=t.isFinite,Me=t.isNaN,je=we.test(je=Object.keys)&&je,Ie=Math.max,Ue=Math.min,Re=Math.random,Fe=ye.slice,ve=we.test(t.attachEvent),ze=Oe&&!/\n|true/.test(Oe+ve);l.prototype=u.prototype;var Be={};!function(){var t={0:1,length:1};Be.fastBind=Oe&&!ze,Be.spliceObjects=(ye.splice.call(t,0,1),!t[0])}(1),u.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""},Ne||(h=function(t){if(k(t)){a.prototype=t;var e=new a;a.prototype=K}return e||{}}),g(arguments)||(g=function(t){return t?De.call(t,"callee"):Z});var He=Pe||function(t){return t?"object"==typeof t&&Ae.call(t)==ae:Z},qe=je?function(t){return k(t)?je(t):[]}:r,Xe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},We=y(Xe);x(/x/)&&(x=function(t){return"function"==typeof t&&"[object Function]"==Ae.call(t)}),u.after=function(t,e){return 1>t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},u.bind=$,u.bindAll=function(t){for(var e=1<arguments.length?Se.apply(ye,Fe.call(arguments,1)):v(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=$(t[i],t)}return t},u.compact=function(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r},u.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}},u.countBy=function(t,e,n){var r={};return e=V(e,n),N(t,function(t,n,i){n=e(t,n,i)+"",De.call(r,n)?r[n]++:r[n]=1}),r},u.debounce=function(t,e,n){function r(){a=K,n||(o=t.apply(s,i))}var i,o,s,a=K;return function(){var u=n&&!a;return i=arguments,s=this,ke(a),a=Ce(r,e),u&&(o=t.apply(s,i)),o}},u.defaults=_,u.defer=function(t){var e=Fe.call(arguments,1);return Ce(function(){t.apply(void 0,e)},1)},u.delay=function(t,e){var n=Fe.call(arguments,2);return Ce(function(){t.apply(void 0,n)},e)},u.difference=F,u.filter=A,u.flatten=B,u.forEach=N,u.functions=v,u.groupBy=function(t,e,n){var r={};return e=V(e,n),N(t,function(t,n,i){n=e(t,n,i)+"",(De.call(r,n)?r[n]:r[n]=[]).push(t)}),r},u.initial=function(t,e,n){if(!t)return[];var r=0,i=t.length;if("number"!=typeof e&&e!=K){var o=i;for(e=V(e,n);o--&&e(t[o],o,t);)r++}else r=e==K||n?1:e||r;return Fe.call(t,0,Ue(Ie(0,i-r),i))},u.intersection=function(t){var e=arguments,n=e.length,r=-1,i=d(),o=t?t.length:0,s=[];t:for(;++r<o;){var a=t[r];if(0>i(s,a)){for(var u=n;--u;)if(0>i(e[u],a))continue t;s.push(a)}}return s},u.invert=y,u.invoke=function(t,e){var n=Fe.call(arguments,2),r=-1,i="function"==typeof e,o=t?t.length:0,s=Array("number"==typeof o?o:0);return N(t,function(t){s[++r]=(i?e:t[e]).apply(t,n)}),s},u.keys=qe,u.map=P,u.max=L,u.memoize=function(t,e){var n={};return function(){var r=ee+(e?e.apply(this,arguments):arguments[0]);return De.call(n,r)?n[r]:n[r]=t.apply(this,arguments)}},u.min=function(t,e,n){var r=1/0,i=r,o=-1,s=t?t.length:0;if(e||"number"!=typeof s)e=V(e,n),N(t,function(t,n,o){n=e(t,n,o),r>n&&(r=n,i=t)});else for(;++o<s;)n=t[o],i>n&&(i=n);return i},u.omit=function(t){var e=d(),r=Se.apply(ye,Fe.call(arguments,1)),i={};return n(t,function(t,n){0>e(r,n)&&(i[n]=t)}),i},u.once=function(t){var e,n;return function(){return e?n:(e=J,n=t.apply(this,arguments),t=K,n)}},u.pairs=function(t){for(var e=-1,n=qe(t),r=n.length,i=Array(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i},u.partial=function(t){return c(t,Fe.call(arguments,1))},u.pick=function(t){for(var e=-1,n=Se.apply(ye,Fe.call(arguments,1)),r=n.length,i={};++e<r;){var o=n[e];o in t&&(i[o]=t[o])}return i},u.pluck=M,u.range=function(t,e,n){t=+t||0,n=+n||1,e==K&&(e=t,t=0);var r=-1;e=Ie(0,xe((e-t)/n));for(var i=Array(e);++r<e;)i[r]=t,t+=n;return i},u.reject=function(t,e,n){return e=V(e,n),A(t,function(t,n,r){return!e(t,n,r)})},u.rest=q,u.shuffle=function(t){var e=-1,n=t?t.length:0,r=Array("number"==typeof n?n:0);return N(t,function(t){var n=Te(Re()*(++e+1));r[e]=r[n],r[n]=t}),r},u.sortBy=function(t,e,n){var r=-1,i=t?t.length:0,s=Array("number"==typeof i?i:0);for(e=V(e,n),N(t,function(t,n,i){s[++r]={l:e(t,n,i),m:r,n:t}}),i=s.length,s.sort(o);i--;)s[i]=s[i].n;return s},u.tap=function(t,e){return e(t),t},u.throttle=function(t,e){function n(){s=new Date,a=K,i=t.apply(o,r)}var r,i,o,s=0,a=K;return function(){var u=new Date,l=e-(u-s);return r=arguments,o=this,l>0?a||(a=Ce(n,l)):(ke(a),a=K,s=u,i=t.apply(o,r)),i}},u.times=function(t,e,n){for(var r=-1,i=Array(t>-1?t:0);++r<t;)i[r]=e.call(n,r);return i},u.toArray=function(t){return He(t)?Fe.call(t):t&&"number"==typeof t.length?P(t):D(t)},u.union=function(t){return He(t)||(arguments[0]=t?Fe.call(t):ye),W(Se.apply(ye,arguments))},u.uniq=W,u.values=D,u.where=R,u.without=function(t){return F(t,Fe.call(arguments,1))},u.wrap=function(t,e){return function(){var n=[t];return Ee.apply(n,arguments),e.apply(this,n)}},u.zip=function(t){for(var e=-1,n=t?L(M(arguments,"length")):0,r=Array(0>n?0:n);++e<n;)r[e]=M(arguments,e);return r},u.collect=P,u.drop=q,u.each=N,u.extend=m,u.methods=v,u.object=function(t,e){for(var n=-1,r=t?t.length:0,i={};++n<r;){var o=t[n];e?i[o]=e[n]:i[o[0]]=o[1]}return i},u.select=A,u.tail=q,u.unique=W,u.chain=function(t){return t=new l(t),t.__chain__=J,t},u.clone=function(t){return k(t)?He(t)?Fe.call(t):m({},t):t},u.contains=E,u.escape=function(t){return t==K?"":(t+"").replace(ie,f)},u.every=C,u.find=O,u.has=function(t,e){return t?De.call(t,e):Z},u.identity=Y,u.indexOf=H,u.isArguments=g,u.isArray=He,u.isBoolean=function(t){return t===J||t===Z||Ae.call(t)==ue
},u.isDate=function(t){return t?"object"==typeof t&&Ae.call(t)==le:Z},u.isElement=function(t){return t?1===t.nodeType:Z},u.isEmpty=b,u.isEqual=w,u.isFinite=function(t){return Le(t)&&!Me(parseFloat(t))},u.isFunction=x,u.isNaN=function(t){return S(t)&&t!=+t},u.isNull=function(t){return t===K},u.isNumber=S,u.isObject=k,u.isRegExp=function(t){return!(!t||!pe[typeof t])&&Ae.call(t)==fe},u.isString=T,u.isUndefined=function(t){return"undefined"==typeof t},u.lastIndexOf=function(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?Ie(0,r+n):Ue(n,r-1))+1);r--;)if(t[r]===e)return r;return-1},u.mixin=G,u.noConflict=function(){return t._=be,this},u.random=function(t,e){t==K&&e==K&&(e=1),t=+t||0,e==K?(e=t,t=0):e=+e||0;var n=Re();return t%1||e%1?t+Ue(n*(e-t+parseFloat("1e-"+((n+"").length-1))),e):t+Te(n*(e-t+1))},u.reduce=j,u.reduceRight=I,u.result=function(t,e){var n=t?t[e]:K;return x(n)?t[e]():n},u.size=function(t){var e=t?t.length:0;return"number"==typeof e?e:qe(t).length},u.some=U,u.sortedIndex=X,u.template=function(t,e,n){var r=u.templateSettings;t||(t=""),n=_({},n,r);var i=0,o="__p+='",r=n.variable;t.replace(RegExp((n.escape||re).source+"|"+(n.interpolate||re).source+"|"+(n.evaluate||re).source+"|$","g"),function(e,n,r,a,u){return o+=t.slice(i,u).replace(oe,s),n&&(o+="'+_['escape']("+n+")+'"),a&&(o+="';"+a+";__p+='"),r&&(o+="'+((__t=("+r+"))==null?'':__t)+'"),i=u+e.length,e}),o+="';\n",r||(r="obj",o="with("+r+"||{}){"+o+"}"),o="function("+r+"){var __t,__p='',__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}"+o+"return __p}";try{var a=Function("_","return "+o)(u)}catch(l){throw l.source=o,l}return e?a(e):(a.source=o,a)},u.unescape=function(t){return t==K?"":(t+"").replace(ne,p)},u.uniqueId=function(t){var e=++Q+"";return t?t+e:e},u.all=C,u.any=U,u.detect=O,u.findWhere=function(t,e){return R(t,e,J)},u.foldl=j,u.foldr=I,u.include=E,u.inject=j,u.first=z,u.last=function(t,e,n){if(t){var r=0,i=t.length;if("number"!=typeof e&&e!=K){var o=i;for(e=V(e,n);o--&&e(t[o],o,t);)r++}else if(r=e,r==K||n)return t[i-1];return Fe.call(t,Ie(0,i-r))}},u.take=z,u.head=z,u.VERSION="1.3.1",G(u),u.prototype.chain=function(){return this.__chain__=J,this},u.prototype.value=function(){return this.__wrapped__},N("pop push reverse shift sort splice unshift".split(" "),function(t){var e=ye[t];u.prototype[t]=function(){var t=this.__wrapped__;return e.apply(t,arguments),!Be.spliceObjects&&0===t.length&&delete t[0],this}}),N(["concat","join","slice"],function(t){var e=ye[t];u.prototype[t]=function(){var t=e.apply(this.__wrapped__,arguments);return this.__chain__&&(t=new l(t),t.__chain__=J),t}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t._=u,define("underscore",[],function(){return u})):me&&!me.nodeType?_e?(_e.exports=u)._=u:me._=u:t._=u}(this),function(){var t=this,e=t.Backbone,n=[];n.push;var r=n.slice;n.splice;var i;i="undefined"!=typeof exports?exports:t.Backbone={},i.VERSION="1.1.0";var o=t._;o||"undefined"==typeof require||(o=require("underscore")),i.$=t.jQuery||t.Zepto||t.ender||t.$,i.noConflict=function(){return t.Backbone=e,this},i.emulateHTTP=!1,i.emulateJSON=!1;var s=i.Events={on:function(t,e,n){if(!u(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var r=this,i=o.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,s,a,l,c,h,f;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:o.keys(this._events),l=0,c=a.length;c>l;l++)if(t=a[l],s=this._events[t]){if(this._events[t]=r=[],e||n)for(h=0,f=s.length;f>h;h++)i=s[h],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!u(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&l(n,e),i&&l(i,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var i=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var s in r)t=r[s],t.off(e,n,this),(i||o.isEmpty(t._events))&&delete this._listeningTo[s];return this}},a=/\s+/,u=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(a.test(n)){for(var o=n.split(a),s=0,u=o.length;u>s;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},l=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},c={listenTo:"on",listenToOnce:"once"};o.each(c,function(t,e){s[e]=function(e,n,r){var i=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=o.uniqueId("l"));return i[s]=e,r||"object"!=typeof n||(r=this),e[t](n,r,this),this}}),s.bind=s.on,s.unbind=s.off,o.extend(i,s);var h=i.Model=function(t,e){var n=t||{};e||(e={}),this.cid=o.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=o.defaults({},n,o.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};o.extend(h.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return o.clone(this.attributes)},sync:function(){return i.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return o.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,i,s,a,u,l,c,h;if(null==t)return this;if("object"==typeof t?(i=t,n=e):(i={})[t]=e,n||(n={}),!this._validate(i,n))return!1;s=n.unset,u=n.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=o.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)e=i[r],o.isEqual(h[r],e)||a.push(r),o.isEqual(c[r],e)?delete this.changed[r]:this.changed[r]=e,s?delete h[r]:h[r]=e;if(!u){a.length&&(this._pending=!0);for(var f=0,d=a.length;d>f;f++)this.trigger("change:"+a[f],this,h[a[f]],n)}if(l)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,o.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,o.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!o.isEmpty(this.changed):o.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?o.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)o.isEqual(r[i],e=t[i])||((n||(n={}))[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(r){return e.set(e.parse(r,t),t)?(n&&n(e,r,t),e.trigger("sync",e,r,t),void 0):!1},I(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,i,s,a=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=o.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=o.extend({},a,r)),void 0===n.parse&&(n.parse=!0);var u=this,l=n.success;return n.success=function(t){u.attributes=a;var e=u.parse(t,n);return n.wait&&(e=o.extend(r||{},e)),o.isObject(e)&&!u.set(e,n)?!1:(l&&l(u,t,n),u.trigger("sync",u,t,n),void 0)},I(this,n),i=this.isNew()?"create":n.patch?"patch":"update","patch"===i&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=a),s},destroy:function(t){t=t?o.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;I(this,t);var i=this.sync("delete",this,t);return t.wait||r(),i},url:function(){var t=o.result(this,"urlRoot")||o.result(this.collection,"url")||j();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},o.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=o.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,o.extend(e,{validationError:n})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];o.each(f,function(t){h.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),o[t].apply(o,e)}});var d=i.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,o.extend({silent:!0},e))},p={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};o.extend(d.prototype,s,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return i.sync.apply(this,arguments)},add:function(t,e){return this.set(t,o.extend({merge:!1},e,g))},remove:function(t,e){var n=!o.isArray(t);t=n?[t]:o.clone(t),e||(e={});var r,i,s,a;for(r=0,i=t.length;i>r;r++)a=t[r]=this.get(t[r]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a));return n?t[0]:t},set:function(t,e){e=o.defaults({},e,p),e.parse&&(t=this.parse(t,e));var n=!o.isArray(t);t=n?t?[t]:[]:o.clone(t);var r,i,s,a,u,l,c,f=e.at,d=this.model,g=this.comparator&&null==f&&e.sort!==!1,m=o.isString(this.comparator)?this.comparator:null,_=[],v=[],y={},b=e.add,w=e.merge,x=e.remove,k=!g&&b&&x?[]:!1;for(r=0,i=t.length;i>r;r++){if(u=t[r],s=u instanceof h?a=u:u[d.prototype.idAttribute],l=this.get(s))x&&(y[l.cid]=!0),w&&(u=u===a?a.attributes:u,e.parse&&(u=l.parse(u,e)),l.set(u,e),g&&!c&&l.hasChanged(m)&&(c=!0)),t[r]=l;else if(b){if(a=t[r]=this._prepareModel(u,e),!a)continue;_.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}k&&k.push(l||a)}if(x){for(r=0,i=this.length;i>r;++r)y[(a=this.models[r]).cid]||v.push(a);v.length&&this.remove(v,e)}if(_.length||k&&k.length)if(g&&(c=!0),this.length+=_.length,null!=f)for(r=0,i=_.length;i>r;r++)this.models.splice(f+r,0,_[r]);else{k&&(this.models.length=0);var S=k||_;for(r=0,i=S.length;i>r;r++)this.models.push(S[r])}if(c&&this.sort({silent:!0}),!e.silent){for(r=0,i=_.length;i>r;r++)(a=_[r]).trigger("add",a,this,e);(c||k&&k.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),t=this.add(t,o.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,o.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,o.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return r.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return o.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return o.invoke(this.models,"get",t)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(r){var i=t.reset?"reset":"set";n[i](r,t),e&&e(n,r,t),n.trigger("sync",n,r,t)},I(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?o.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,e,i){i.wait&&n.add(t,i),r&&r(t,e,i)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t.collection||(t.collection=this),t;e=e?o.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];o.each(m,function(t){d.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),o[t].apply(o,e)}});var _=["groupBy","countBy","sortBy"];o.each(_,function(t){d.prototype[t]=function(e,n){var r=o.isFunction(e)?e:function(t){return t.get(e)};return o[t](this.models,r,n)}});var v=i.View=function(t){this.cid=o.uniqueId("view"),t||(t={}),o.extend(this,o.pick(t,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},y=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];o.extend(v.prototype,s,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof i.$?t:i.$(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=o.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(o.isFunction(n)||(n=this[t[e]]),n){var r=e.match(y),i=r[1],s=r[2];n=o.bind(n,this),i+=".delegateEvents"+this.cid,""===s?this.$el.on(i,n):this.$el.on(i,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(o.result(this,"el"),!1);else{var t=o.extend({},o.result(this,"attributes"));this.id&&(t.id=o.result(this,"id")),this.className&&(t["class"]=o.result(this,"className"));var e=i.$("<"+o.result(this,"tagName")+">").attr(t);this.setElement(e,!1)}}}),i.sync=function(t,e,n){var r=x[t];o.defaults(n||(n={}),{emulateHTTP:i.emulateHTTP,emulateJSON:i.emulateJSON});var s={type:r,dataType:"json"};if(n.url||(s.url=o.result(e,"url")||j()),null!=n.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(n.attrs||e.toJSON(n))),n.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),n.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",n.emulateJSON&&(s.data._method=r);var a=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===s.type||n.emulateJSON||(s.processData=!1),"PATCH"===s.type&&w&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=n.xhr=i.ajax(o.extend(s,n));return e.trigger("request",e,u,n),u};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};i.ajax=function(){return i.$.ajax.apply(i.$,arguments)};var k=i.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,D=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(k.prototype,s,{initialize:function(){},route:function(t,e,n){o.isRegExp(t)||(t=this._routeToRegExp(t)),o.isFunction(e)&&(n=e,e=""),n||(n=this[e]);var r=this;return i.history.route(t,function(o){var s=r._extractParameters(t,o);n&&n.apply(r,s),r.trigger.apply(r,["route:"+e].concat(s)),r.trigger("route",e,s),i.history.trigger("route",r,e,s)}),this},navigate:function(t,e){return i.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=o.result(this,"routes");for(var t,e=o.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(E,"\\$&").replace(S,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(D,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return o.map(n,function(t){return t?decodeURIComponent(t):null})}});var C=i.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,N=/msie [\w.]+/,P=/\/$/,L=/[?#].*$/;C.started=!1,o.extend(C.prototype,s,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(P,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(A,"")},start:function(t){if(C.started)throw new Error("Backbone.history has already been started");C.started=!0,this.options=o.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),n=document.documentMode,r=N.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(O,"/"),r&&this._wantsHashChange&&(this.iframe=i.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?i.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?i.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var s=this.location,a=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&s.hash&&(this.fragment=this.getHash().replace(A,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){i.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),C.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl(),void 0)},loadUrl:function(t){return t=this.fragment=this.getFragment(t),o.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!C.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(L,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),i.history=new C;var M=function(t,e){var n,r=this;n=t&&o.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},o.extend(n,r,e);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,t&&o.extend(n.prototype,t),n.__super__=r.prototype,n};h.extend=d.extend=k.extend=v.extend=C.extend=M;var j=function(){throw new Error('A "url" property or function must be specified')},I=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}}}.call(this),define("backbone",["jquery","underscore"],function(t){return function(){var e;return e||t.Backbone}}(this)),function(t){Backbone.Stickit={_handlers:[],addHandler:function(t){t=_.map(_.flatten([t]),function(t){return _.extend({updateModel:!0,updateView:!0,updateMethod:"text"},t)}),this._handlers=this._handlers.concat(t)}},_.extend(Backbone.View.prototype,{_modelBindings:null,unstickit:function(t){_.each(this._modelBindings,_.bind(function(e,n){return t&&e.model!==t?!1:(e.model.off(e.event,e.fn),delete this._modelBindings[n],void 0)},this)),this._modelBindings=_.compact(this._modelBindings),this.$el.off(".stickit"+(t?"."+t.cid:""))},stickit:function(t,e){var r=this,f=t||this.model,d=".stickit."+f.cid,p=e||this.bindings||{};this._modelBindings||(this._modelBindings=[]),this.unstickit(f),_.each(_.keys(p),function(t){var e,g,m,v,y=p[t]||{},b=_.uniqueId();":el"!=t?e=r.$(t):(e=r.$el,t=""),e.length&&(_.isString(y)&&(y={observe:y}),v=u(e,y),m=v.observe,g=_.extend({bindKey:b},v.setOptions||{}),l(r,e,v,f,m),c(r,e,v,f,m),m&&(_.each(v.events||[],function(n){var o=n+d,a=function(t){var n=v.getVal.call(r,e,t,v);i(r,v.updateModel,n,v)&&s(f,m,n,g,r,v)};""===t?r.$el.on(o,a):r.$el.on(o,t,a)}),_.each(_.flatten([m]),function(t){o(f,r,"change:"+t,function(t,n,i){(null==i||i.bindKey!=b)&&h(r,e,v,a(t,m,v,r),t)})}),h(r,e,v,a(f,m,v,r),f,!0)),n(r,v.initialize,e,f,v))}),this.remove=_.wrap(this.remove,function(t){r.unstickit(),t&&t.call(r)})}});var e=function(t,e){var n=(e||"").split("."),r=_.reduce(n,function(t,e){return t[e]},t);return null==r?t:r},n=function(t,e){return e?(_.isString(e)?t[e]:e).apply(t,_.toArray(arguments).slice(2)):void 0},r=function(t){return t.find("option").not(function(){return!this.selected})},i=function(t,e){return _.isBoolean(e)?e:_.isFunction(e)||_.isString(e)?n.apply(this,_.toArray(arguments)):!1},o=function(t,e,n,r){t.on(n,r,e),e._modelBindings.push({model:t,event:n,fn:r})},s=function(t,e,r,i,o,s){s.onSet&&(r=n(o,s.onSet,r,s)),t.set(e,r,i)},a=function(t,e,r,i){var o,s=function(e){var n=r.escape?t.escape(e):t.get(e);return _.isUndefined(n)?"":n};return o=_.isArray(e)?_.map(e,s):s(e),r.onGet?n(i,r.onGet,o,r):o},u=function(t,e){var n=[{updateModel:!1,updateView:!0,updateMethod:"text",update:function(t,e,n,r){t[r.updateMethod](e)},getVal:function(t,e,n){return t[n.updateMethod]()}}];_.each(Backbone.Stickit._handlers,function(e){t.is(e.selector)&&n.push(e)}),n.push(e);var r=_.extend.apply(_,n);return delete r.selector,r},l=function(t,e,n,r,i){var s=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","loop","multiple","open","readonly","required","scoped","selected"];_.each(n.attributes||[],function(n){var u="",l=n.observe||(n.observe=i),c=function(){var i=_.indexOf(s,n.name,!0)>-1?"prop":"attr",o=a(r,l,n,t);"class"==n.name?(e.removeClass(u).addClass(o),u=o):e[i](n.name,o)};_.each(_.flatten([l]),function(e){o(r,t,"change:"+e,c)}),c()})},c=function(t,e,r,i,s){if(null!=r.visible){var u=function(){var o=r.visible,u=r.visibleFn,l=a(i,s,r,t),c=!!l;(_.isFunction(o)||_.isString(o))&&(c=n(t,o,l,r)),u?n(t,u,e,c,r):c?e.show():e.hide()};_.each(_.flatten([s]),function(e){o(i,t,"change:"+e,u)}),u()}},h=function(t,e,r,o,s,a){i(t,r.updateView,o,r)&&(r.update.call(t,e,o,s,r),a||n(t,r.afterUpdate,e,o,r))};Backbone.Stickit.addHandler([{selector:'[contenteditable="true"]',updateMethod:"html",events:["keyup","change","paste","cut"]},{selector:"input",events:["keyup","change","paste","cut"],update:function(t,e){t.val(e)},getVal:function(t){var e=t.val();return t.is('[type="number"]')?null==e?e:Number(e):e}},{selector:"textarea",events:["keyup","change","paste","cut"],update:function(t,e){t.val(e)},getVal:function(t){return t.val()}},{selector:'input[type="radio"]',events:["change"],update:function(t,e){t.filter('[value="'+e+'"]').prop("checked",!0)},getVal:function(t){return t.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(e,n){e.length>1?(n||(n=[]),_.each(e,function(e){_.indexOf(n,t(e).val())>-1?t(e).prop("checked",!0):t(e).prop("checked",!1)})):_.isBoolean(n)?e.prop("checked",n):e.prop("checked",n==e.val())},getVal:function(e){var n;if(e.length>1)n=_.reduce(e,function(e,n){return t(n).prop("checked")&&e.push(t(n).val()),e},[]);else{n=e.prop("checked");var r=e.val();"on"!=r&&null!=r&&(n=n?e.val():null)}return n}},{selector:"select",events:["change"],update:function(r,i,o,s){var a,u=s.selectOptions,l=u&&u.collection||void 0,c=r.prop("multiple");if(!u){u={};var h=function(t){return t.find("option").map(function(){return{value:this.value,label:this.text}}).get()};r.find("optgroup").length?(l={opt_labels:[]},_.each(r.find("optgroup"),function(e){var n=t(e).attr("label");l.opt_labels.push(n),l[n]=h(t(e))})):l=h(r)}u.valuePath=u.valuePath||"value",u.labelPath=u.labelPath||"label";var f=function(n,r,i){u.defaultOption&&(n=_.clone(n),n.unshift("__default__")),_.each(n,function(n){var o=t("<option/>"),s=n,a=function(t,e){o.text(t),s=e,o.data("stickit_bind_val",s),_.isArray(s)||_.isObject(s)||o.val(s)};"__default__"===n?a(u.defaultOption.label,u.defaultOption.value):a(e(n,u.labelPath),e(n,u.valuePath)),!c&&null!=s&&null!=i&&s==i||_.isObject(i)&&_.isEqual(s,i)?o.prop("selected",!0):c&&_.isArray(i)&&_.each(i,function(t){_.isObject(t)&&(t=e(t,u.valuePath)),(t==s||_.isObject(t)&&_.isEqual(s,t))&&o.prop("selected",!0)}),r.append(o)})};r.html("");var d=function(t,n){var r=window;return 0===n.indexOf("this.")&&(r=t),n=n.replace(/^[a-z]*\.(.+)$/,"$1"),e(r,n)};a=_.isString(l)?d(this,l):_.isFunction(l)?n(this,l,r,s):l,a instanceof Backbone.Collection&&(a=a.toJSON()),_.isArray(a)?f(a,r,i):_.each(a.opt_labels,function(e){var n=t("<optgroup/>").attr("label",e);f(a[e],n,i),r.append(n)})},getVal:function(e){var n;return n=e.prop("multiple")?t(r(e).map(function(){return t(this).data("stickit_bind_val")})).get():r(e).data("stickit_bind_val")}}])}(window.jQuery||window.Zepto),define("stickit",["backbone"],function(t){return function(){var e;return e||t.Backbone.Stickit}}(this)),function(t){function e(t,e){return function(n){return u(t.call(this,n),e)}}function n(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function r(){}function i(t){b(t),s(this,t)}function o(t){var e=p(t),n=e.year||0,r=e.month||0,i=e.week||0,o=e.day||0,s=e.hour||0,a=e.minute||0,u=e.second||0,l=e.millisecond||0;this._input=t,this._milliseconds=+l+1e3*u+6e4*a+36e5*s,this._days=+o+7*i,this._months=+r+12*n,this._data={},this._bubble()}function s(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function a(t){return 0>t?Math.ceil(t):Math.floor(t)}function u(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function l(t,e,n,r){var i,o,s=e._milliseconds,a=e._days,u=e._months;s&&t._d.setTime(+t._d+s*n),(a||u)&&(i=t.minute(),o=t.hour()),a&&t.date(t.date()+a*n),u&&t.month(t.month()+u*n),s&&!r&&ee.updateOffset(t),(a||u)&&(t.minute(i),t.hour(o))}function c(t){return"[object Array]"===Object.prototype.toString.call(t)}function h(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function f(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(r=0;i>r;r++)(n&&t[r]!==e[r]||!n&&m(t[r])!==m(e[r]))&&s++;return s+o}function d(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Ie[t]||Ue[e]||e}return t}function p(t){var e,n,r={};for(n in t)t.hasOwnProperty(n)&&(e=d(n),e&&(r[e]=t[n]));return r}function g(e){var n,r;if(0===e.indexOf("week"))n=7,r="day";else{if(0!==e.indexOf("month"))return;n=12,r="month"}ee[e]=function(i,o){var s,a,u=ee.fn._lang[e],l=[];if("number"==typeof i&&(o=i,i=t),a=function(t){var e=ee().utc().set(r,t);return u.call(ee.fn._lang,e,i||"")},null!=o)return a(o);for(s=0;n>s;s++)l.push(a(s));return l}}function m(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function _(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function v(t){return y(t)?366:365}function y(t){return 0===t%4&&0!==t%100||0===t%400}function b(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[se]<0||t._a[se]>11?se:t._a[ae]<1||t._a[ae]>_(t._a[oe],t._a[se])?ae:t._a[ue]<0||t._a[ue]>23?ue:t._a[le]<0||t._a[le]>59?le:t._a[ce]<0||t._a[ce]>59?ce:t._a[he]<0||t._a[he]>999?he:-1,t._pf._overflowDayOfYear&&(oe>e||e>ae)&&(e=ae),t._pf.overflow=e)}function w(t){t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function x(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function k(t){return t?t.toLowerCase().replace("_","-"):t}function S(t,e){return e.abbr=t,fe[t]||(fe[t]=new r),fe[t].set(e),fe[t]}function T(t){delete fe[t]}function D(t){var e,n,r,i,o=0,s=function(t){if(!fe[t]&&de)try{require("./lang/"+t)}catch(e){}return fe[t]};if(!t)return ee.fn._lang;if(!c(t)){if(n=s(t))return n;t=[t]}for(;o<t.length;){for(i=k(t[o]).split("-"),e=i.length,r=k(t[o+1]),r=r?r.split("-"):null;e>0;){if(n=s(i.slice(0,e).join("-")))return n;if(r&&r.length>=e&&f(i,r,!0)>=e-1)break;e--}o++}return ee.fn._lang}function E(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function C(t){var e,n,r=t.match(_e);for(e=0,n=r.length;n>e;e++)r[e]=Be[r[e]]?Be[r[e]]:E(r[e]);return function(i){var o="";for(e=0;n>e;e++)o+=r[e]instanceof Function?r[e].call(i,t):r[e];return o}}function A(t,e){return t.isValid()?(e=O(e,t.lang()),Re[e]||(Re[e]=C(e)),Re[e](t)):t.lang().invalidDate()}function O(t,e){function n(t){return e.longDateFormat(t)||t}var r=5;for(ve.lastIndex=0;r>=0&&ve.test(t);)t=t.replace(ve,n),ve.lastIndex=0,r-=1;return t}function N(t,e){var n;switch(t){case"DDDD":return we;case"YYYY":case"GGGG":case"gggg":return xe;case"YYYYY":case"GGGGG":case"ggggg":return ke;case"S":case"SS":case"SSS":case"DDD":return be;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Te;case"a":case"A":return D(e._l)._meridiemParse;case"X":return Ce;case"Z":case"ZZ":return De;case"T":return Ee;case"SSSS":return Se;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return ye;
default:return n=new RegExp(F(R(t.replace("\\","")),"i"))}}function P(t){var e=(De.exec(t)||[])[0],n=(e+"").match(Le)||["-",0,0],r=+(60*n[1])+m(n[2]);return"+"===n[0]?-r:r}function L(t,e,n){var r,i=n._a;switch(t){case"M":case"MM":null!=e&&(i[se]=m(e)-1);break;case"MMM":case"MMMM":r=D(n._l).monthsParse(e),null!=r?i[se]=r:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(i[ae]=m(e));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=m(e));break;case"YY":i[oe]=m(e)+(m(e)>68?1900:2e3);break;case"YYYY":case"YYYYY":i[oe]=m(e);break;case"a":case"A":n._isPm=D(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":i[ue]=m(e);break;case"m":case"mm":i[le]=m(e);break;case"s":case"ss":i[ce]=m(e);break;case"S":case"SS":case"SSS":case"SSSS":i[he]=m(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=P(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=e)}}function M(t){var e,n,r,i,o,s,a,u,l,c,h=[];if(!t._d){for(r=I(t),t._w&&null==t._a[ae]&&null==t._a[se]&&(o=function(e){return e?e.length<3?parseInt(e,10)>68?"19"+e:"20"+e:e:null==t._a[oe]?ee().weekYear():t._a[oe]},s=t._w,null!=s.GG||null!=s.W||null!=s.E?a=G(o(s.GG),s.W||1,s.E,4,1):(u=D(t._l),l=null!=s.d?W(s.d,u):null!=s.e?parseInt(s.e,10)+u._week.dow:0,c=parseInt(s.w,10)||1,null!=s.d&&l<u._week.dow&&c++,a=G(o(s.gg),c,l,u._week.doy,u._week.dow)),t._a[oe]=a.year,t._dayOfYear=a.dayOfYear),t._dayOfYear&&(i=null==t._a[oe]?r[oe]:t._a[oe],t._dayOfYear>v(i)&&(t._pf._overflowDayOfYear=!0),n=X(i,0,t._dayOfYear),t._a[se]=n.getUTCMonth(),t._a[ae]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=h[e]=r[e];for(;7>e;e++)t._a[e]=h[e]=null==t._a[e]?2===e?1:0:t._a[e];h[ue]+=m((t._tzm||0)/60),h[le]+=m((t._tzm||0)%60),t._d=(t._useUTC?X:q).apply(null,h)}}function j(t){var e;t._d||(e=p(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],M(t))}function I(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function U(t){t._a=[],t._pf.empty=!0;var e,n,r,i,o,s=D(t._l),a=""+t._i,u=a.length,l=0;for(r=O(t._f,s).match(_e)||[],e=0;e<r.length;e++)i=r[e],n=(N(i,t).exec(a)||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&t._pf.unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),l+=n.length),Be[i]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(i),L(i,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(i);t._pf.charsLeftOver=u-l,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&t._a[ue]<12&&(t._a[ue]+=12),t._isPm===!1&&12===t._a[ue]&&(t._a[ue]=0),M(t),b(t)}function R(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,r,i){return e||n||r||i})}function F(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function z(t){var e,n,r,i,o;if(0===t._f.length)return t._pf.invalidFormat=!0,t._d=new Date(0/0),void 0;for(i=0;i<t._f.length;i++)o=0,e=s({},t),w(e),e._f=t._f[i],U(e),x(e)&&(o+=e._pf.charsLeftOver,o+=10*e._pf.unusedTokens.length,e._pf.score=o,(null==r||r>o)&&(r=o,n=e));s(t,n||e)}function B(t){var e,n=t._i,r=Ae.exec(n);if(r){for(t._pf.iso=!0,e=4;e>0;e--)if(r[e]){t._f=Ne[e-1]+(r[6]||" ");break}for(e=0;4>e;e++)if(Pe[e][1].exec(n)){t._f+=Pe[e][0];break}De.exec(n)&&(t._f+="Z"),U(t)}else t._d=new Date(n)}function H(e){var n=e._i,r=pe.exec(n);n===t?e._d=new Date:r?e._d=new Date(+r[1]):"string"==typeof n?B(e):c(n)?(e._a=n.slice(0),M(e)):h(n)?e._d=new Date(+n):"object"==typeof n?j(e):e._d=new Date(n)}function q(t,e,n,r,i,o,s){var a=new Date(t,e,n,r,i,o,s);return 1970>t&&a.setFullYear(t),a}function X(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function W(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function $(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function V(t,e,n){var r=ie(Math.abs(t)/1e3),i=ie(r/60),o=ie(i/60),s=ie(o/24),a=ie(s/365),u=45>r&&["s",r]||1===i&&["m"]||45>i&&["mm",i]||1===o&&["h"]||22>o&&["hh",o]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",ie(s/30)]||1===a&&["y"]||["yy",a];return u[2]=e,u[3]=t>0,u[4]=n,$.apply({},u)}function Y(t,e,n){var r,i=n-e,o=n-t.day();return o>i&&(o-=7),i-7>o&&(o+=7),r=ee(t).add("d",o),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function G(t,e,n,r,i){var o,s,a=new Date(Date.UTC(t,0)).getUTCDay();return n=null!=n?n:i,o=i-a+(a>r?7:0),s=7*(e-1)+(n-i)+o+1,{year:s>0?t:t-1,dayOfYear:s>0?s:v(t-1)+s}}function J(t){var e=t._i,n=t._f;return"undefined"==typeof t._pf&&w(t),null===e?ee.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=D().preparse(e)),ee.isMoment(e)?(t=s({},e),t._d=new Date(+e._d)):n?c(n)?z(t):U(t):H(t),new i(t))}function K(t,e){ee.fn[t]=ee.fn[t+"s"]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),ee.updateOffset(this),this):this._d["get"+n+e]()}}function Z(t){ee.duration.fn[t]=function(){return this._data[t]}}function Q(t,e){ee.duration.fn["as"+t]=function(){return+this/e}}function te(t){var e=!1,n=ee;"undefined"==typeof ender&&(this.moment=t?function(){return!e&&console&&console.warn&&(e=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)}:ee)}for(var ee,ne,re="2.4.0",ie=Math.round,oe=0,se=1,ae=2,ue=3,le=4,ce=5,he=6,fe={},de="undefined"!=typeof module&&module.exports,pe=/^\/?Date\((\-?\d+)/i,ge=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,me=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,_e=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,ve=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,ye=/\d\d?/,be=/\d{1,3}/,we=/\d{3}/,xe=/\d{1,4}/,ke=/[+\-]?\d{1,6}/,Se=/\d+/,Te=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,De=/Z|[\+\-]\d\d:?\d\d/i,Ee=/T/i,Ce=/[\+\-]?\d+(\.\d{1,3})?/,Ae=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Oe="YYYY-MM-DDTHH:mm:ssZ",Ne=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Pe=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Le=/([\+\-]|\d\d)/gi,Me="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),je={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ie={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ue={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Re={},Fe="DDD w W M D d".split(" "),ze="M D H h m s w W".split(" "),Be={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return u(this.year()%100,2)},YYYY:function(){return u(this.year(),4)},YYYYY:function(){return u(this.year(),5)},gg:function(){return u(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return u(this.weekYear(),5)},GG:function(){return u(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return u(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return m(this.milliseconds()/100)},SS:function(){return u(m(this.milliseconds()/10),2)},SSS:function(){return u(this.milliseconds(),3)},SSSS:function(){return u(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+u(m(t/60),2)+":"+u(m(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+u(m(10*t/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},He=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Fe.length;)ne=Fe.pop(),Be[ne+"o"]=n(Be[ne],ne);for(;ze.length;)ne=ze.pop(),Be[ne+ne]=e(Be[ne],2);for(Be.DDDD=e(Be.DDD,3),s(r.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,r;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=ee.utc([2e3,e]),r="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(r.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=ee([2e3,1]).day(e),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(t,e,n,r):i.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return Y(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ee=function(e,n,r,i){return"boolean"==typeof r&&(i=r,r=t),J({_i:e,_f:n,_l:r,_strict:i,_isUTC:!1})},ee.utc=function(e,n,r,i){var o;return"boolean"==typeof r&&(i=r,r=t),o=J({_useUTC:!0,_isUTC:!0,_l:r,_i:e,_f:n,_strict:i}).utc()},ee.unix=function(t){return ee(1e3*t)},ee.duration=function(t,e){var n,r,i,s=ee.isDuration(t),a="number"==typeof t,u=s?t._input:a?{}:t,l=null;return a?e?u[e]=t:u.milliseconds=t:(l=ge.exec(t))?(n="-"===l[1]?-1:1,u={y:0,d:m(l[ae])*n,h:m(l[ue])*n,m:m(l[le])*n,s:m(l[ce])*n,ms:m(l[he])*n}):(l=me.exec(t))&&(n="-"===l[1]?-1:1,i=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},u={y:i(l[2]),M:i(l[3]),d:i(l[4]),h:i(l[5]),m:i(l[6]),s:i(l[7]),w:i(l[8])}),r=new o(u),s&&t.hasOwnProperty("_lang")&&(r._lang=t._lang),r},ee.version=re,ee.defaultFormat=Oe,ee.updateOffset=function(){},ee.lang=function(t,e){var n;return t?(e?S(k(t),e):null===e?(T(t),t="en"):fe[t]||D(t),n=ee.duration.fn._lang=ee.fn._lang=D(t),n._abbr):ee.fn._lang._abbr},ee.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),D(t)},ee.isMoment=function(t){return t instanceof i},ee.isDuration=function(t){return t instanceof o},ne=He.length-1;ne>=0;--ne)g(He[ne]);for(ee.normalizeUnits=function(t){return d(t)},ee.invalid=function(t){var e=ee.utc(0/0);return null!=t?s(e._pf,t):e._pf.userInvalidated=!0,e},ee.parseZone=function(t){return ee(t).parseZone()},s(ee.fn=i.prototype,{clone:function(){return ee(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return A(ee(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&f(this._a,(this._isUTC?ee.utc(this._a):ee(this._a)).toArray())>0:!1},parsingFlags:function(){return s({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=A(this,t||ee.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?ee.duration(+e,t):ee.duration(t,e),l(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?ee.duration(+e,t):ee.duration(t,e),l(this,n,-1),this},diff:function(t,e,n){var r,i,o=this._isUTC?ee(t).zone(this._offset||0):ee(t).local(),s=6e4*(this.zone()-o.zone());return e=d(e),"year"===e||"month"===e?(r=432e5*(this.daysInMonth()+o.daysInMonth()),i=12*(this.year()-o.year())+(this.month()-o.month()),i+=(this-ee(this).startOf("month")-(o-ee(o).startOf("month")))/r,i-=6e4*(this.zone()-ee(this).startOf("month").zone()-(o.zone()-ee(o).startOf("month").zone()))/r,"year"===e&&(i/=12)):(r=this-o,i="second"===e?r/1e3:"minute"===e?r/6e4:"hour"===e?r/36e5:"day"===e?(r-s)/864e5:"week"===e?(r-s)/6048e5:r),n?i:a(i)},from:function(t,e){return ee.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(ee(),t)},calendar:function(){var t=this.diff(ee().zone(this.zone()).startOf("day"),"days",!0),e=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(e,this))},isLeapYear:function(){return y(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=W(t,this.lang()),this.add({d:t-e})):e},month:function(t){var e,n=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+n+"Month"](t),this.date(Math.min(e,this.daysInMonth())),ee.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(t){switch(t=d(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=d(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+ee(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+ee(t).startOf(e)},isSame:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)===+ee(t).startOf(e)},min:function(t){return t=ee.apply(null,arguments),this>t?this:t},max:function(t){return t=ee.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=P(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&l(this,ee.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?ee(t).zone():0,0===(this.zone()-t)%60},daysInMonth:function(){return _(this.year(),this.month())},dayOfYear:function(t){var e=ie((ee(this).startOf("day")-ee(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},weekYear:function(t){var e=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=Y(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=Y(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=d(t),this[t]()},set:function(t,e){return t=d(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=D(e),this)}}),ne=0;ne<Me.length;ne++)K(Me[ne].toLowerCase().replace(/s$/,""),Me[ne]);K("year","FullYear"),ee.fn.days=ee.fn.day,ee.fn.months=ee.fn.month,ee.fn.weeks=ee.fn.week,ee.fn.isoWeeks=ee.fn.isoWeek,ee.fn.toJSON=ee.fn.toISOString,s(ee.duration.fn=o.prototype,{_bubble:function(){var t,e,n,r,i=this._milliseconds,o=this._days,s=this._months,u=this._data;u.milliseconds=i%1e3,t=a(i/1e3),u.seconds=t%60,e=a(t/60),u.minutes=e%60,n=a(e/60),u.hours=n%24,o+=a(n/24),u.days=o%30,s+=a(o/30),u.months=s%12,r=a(s/12),u.years=r},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*m(this._months/12)},humanize:function(t){var e=+this,n=V(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=ee.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=ee.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=d(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=d(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:ee.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(r||i||o?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(o?o+"S":""):"P0D"}});for(ne in je)je.hasOwnProperty(ne)&&(Q(ne,je[ne]),Z(ne.toLowerCase()));Q("Weeks",6048e5),ee.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ee.lang("en",{ordinal:function(t){var e=t%10,n=1===m(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),de?(module.exports=ee,te(!0)):"function"==typeof define&&define.amd?define("moment",["require","exports","module"],function(e,n,r){return r.config().noGlobal!==!0&&te(r.config().noGlobal===t),ee}):te()}.call(this),!function(){var t,e,n,r,i,o,s,a,u,l,c,h,f,d,p,g,m,_,v,y,b,w,x,k,S,T,D,E,C,A,O,N,P,L,M,j,I,U,R,F,z,B,H,q,X,W,$,V,Y,G,J,K,Z,Q,te,ee,ne,re,ie,oe,se={}.hasOwnProperty,ae=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},ue=function(t,e){function n(){this.constructor=t}for(var r in e)se.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},le=[].slice;if(D=function(){function t(){}return t}(),D.Util=function(){function t(){}return t}(),D.Http=function(){function t(){}return t}(),D.File=function(){function t(){}return t}(),u="1.0.0","undefined"!=typeof global&&"undefined"!=typeof module&&"exports"in module)p=global,g=module.require.bind(module),module.exports=D;else if("undefined"!=typeof window&&"undefined"!=typeof navigator)p=window,g=null,window.Dropbox&&function(){var t,e,n,r;n=window.Dropbox,r=[];for(t in n)se.call(n,t)&&(e=n[t],r.push(D[t]=e));return r}(),window.Dropbox=D;else{if("undefined"==typeof self||"undefined"==typeof navigator)throw new Error("dropbox.js loaded in an unsupported JavaScript environment.");p=self,g=self.importScripts.bind(self),self.Dropbox=D}if(D.Env=function(){function t(){}return t.global=p,t.require=g,t}(),D.Util.EventSource=function(){function t(t){this._cancelable=t&&t.cancelable,this._listeners=[]}return t.prototype.addListener=function(t){if("function"!=typeof t)throw new TypeError("Invalid listener type; expected function");return ae.call(this._listeners,t)<0&&this._listeners.push(t),this},t.prototype.removeListener=function(t){var e,n,r,i,o,s;if(this._listeners.indexOf)n=this._listeners.indexOf(t),-1!==n&&this._listeners.splice(n,1);else for(s=this._listeners,e=i=0,o=s.length;o>i;e=++i)if(r=s[e],r===t){this._listeners.splice(e,1);break}return this},t.prototype.dispatch=function(t){var e,n,r,i,o;for(o=this._listeners,r=0,i=o.length;i>r;r++)if(e=o[r],n=e(t),this._cancelable&&n===!1)return!1;return!0},t}(),D.AccountInfo=function(){function t(t){var e;this._json=t,this.name=t.display_name,this.email=t.email,this.countryCode=t.country||null,this.uid=t.uid.toString(),t.public_app_url?(this.publicAppUrl=t.public_app_url,e=this.publicAppUrl.length-1,e>=0&&"/"===this.publicAppUrl.substring(e)&&(this.publicAppUrl=this.publicAppUrl.substring(0,e))):this.publicAppUrl=null,this.referralUrl=t.referral_link,this.quota=t.quota_info.quota,this.privateBytes=t.quota_info.normal||0,this.sharedBytes=t.quota_info.shared||0,this.usedQuota=this.privateBytes+this.sharedBytes}return t.parse=function(t){return t&&"object"==typeof t?new D.AccountInfo(t):t},t.prototype.name=null,t.prototype.email=null,t.prototype.countryCode=null,t.prototype.uid=null,t.prototype.referralUrl=null,t.prototype.publicAppUrl=null,t.prototype.quota=null,t.prototype.usedQuota=null,t.prototype.privateBytes=null,t.prototype.sharedBytes=null,t.prototype.json=function(){return this._json},t}(),D.ApiError=function(){function t(t,e,n){var r,i;if(this.method=e,this.url=n,this.status=t.status,t.responseType)try{r=t.response||t.responseText}catch(o){i=o;try{r=t.responseText}catch(o){i=o,r=null}}else try{r=t.responseText}catch(o){i=o,r=null}if(r)try{this.responseText=r.toString(),this.response=JSON.parse(r)}catch(o){i=o,this.response=null}else this.responseText="(no response)",this.response=null}return t.prototype.status=null,t.prototype.method=null,t.prototype.url=null,t.prototype.responseText=null,t.prototype.response=null,t.NETWORK_ERROR=0,t.NO_CONTENT=304,t.INVALID_PARAM=400,t.INVALID_TOKEN=401,t.OAUTH_ERROR=403,t.NOT_FOUND=404,t.INVALID_METHOD=405,t.NOT_ACCEPTABLE=406,t.CONFLICT=409,t.RATE_LIMITED=429,t.SERVER_ERROR=503,t.OVER_QUOTA=507,t.prototype.toString=function(){return"Dropbox API error "+this.status+" from "+this.method+" "+this.url+" :: "+this.responseText},t.prototype.inspect=function(){return this.toString()},t}(),D.AuthDriver=function(){function t(){}return t.prototype.authType=function(){return"code"},t.prototype.url=function(){return"https://some.url"},t.prototype.doAuthorize=function(t,e,n,r){return r({code:"access-code"})},t.prototype.getStateParam=function(t,e){return e(D.Util.Oauth.randomAuthStateParam())},t.prototype.resumeAuthorize=function(t,e,n){return n({code:"access-code"})},t.prototype.onAuthStateChange=function(t,e){return e()},t.oauthQueryParams=["access_token","expires_in","scope","token_type","code","error","error_description","error_uri","mac_key","mac_algorithm"].sort(),t}(),D.AuthDriver.autoConfigure=function(t){if("undefined"!=typeof chrome&&(chrome.extension||chrome.app&&chrome.app.runtime))return t.authDriver(new D.AuthDriver.Chrome),void 0;if("undefined"!=typeof window){if(window.cordova)return t.authDriver(new D.AuthDriver.Cordova),void 0;window&&window.navigator&&t.authDriver(new D.AuthDriver.Redirect)}},D.AuthDriver.BrowserBase=function(){function t(t){t?(this.rememberUser="rememberUser"in t?t.rememberUser:!0,this.scope=t.scope||"default"):(this.rememberUser=!0,this.scope="default"),this.storageKey=null,this.stateRe=/^[^#]+\#(.*&)?state=([^&]+)(&|$)/}return t.prototype.authType=function(){return"token"},t.prototype.onAuthStepChange=function(t,e){var n=this;switch(this.setStorageKey(t),t.authStep){case D.Client.RESET:return this.loadCredentials(function(r){return r?(t.setCredentials(r),t.authStep!==D.Client.DONE?e():n.rememberUser?(t.setCredentials(r),t.getAccountInfo(function(r){return r&&r.status===D.ApiError.INVALID_TOKEN?(t.reset(),n.forgetCredentials(e)):e()})):n.forgetCredentials(e)):e()});case D.Client.DONE:return this.rememberUser?this.storeCredentials(t.credentials(),e):this.forgetCredentials(e);case D.Client.SIGNED_OUT:return this.forgetCredentials(e);case D.Client.ERROR:return this.forgetCredentials(e);default:return e(),this}},t.prototype.setStorageKey=function(t){return this.storageKey="dropbox-auth:"+this.scope+":"+t.appHash(),this},t.prototype.storeCredentials=function(t,e){return localStorage.setItem(this.storageKey,JSON.stringify(t)),e(),this},t.prototype.loadCredentials=function(t){var e,n;if(n=localStorage.getItem(this.storageKey),!n)return t(null),this;try{t(JSON.parse(n))}catch(r){e=r,t(null)}return this},t.prototype.forgetCredentials=function(t){return localStorage.removeItem(this.storageKey),t(),this},t.prototype.locationStateParam=function(t){var e,n;return e=t||D.AuthDriver.BrowserBase.currentLocation(),n=this.stateRe.exec(e),n?decodeURIComponent(n[2]):null},t.prototype.replaceUrlBasename=function(t,e){var n,r,i;return r=t.indexOf("#"),-1!==r&&(t=t.substring(0,r)),i=t.indexOf("?"),-1!==i&&(t=t.substring(0,i)),n=t.split("/"),n[n.length-1]=e,n.join("/")},t.currentLocation=function(){return window.location.href},t.cleanupLocation=function(){var t,e;window.history&&window.history.replaceState?(e=this.currentLocation(),t=e.indexOf("#"),window.history.replaceState({},document.title,e.substring(0,t))):window.location.hash=""},t}(),D.AuthDriver.Redirect=function(t){function e(t){e.__super__.constructor.call(this,t),this.receiverUrl=this.baseUrl(t)}return ue(e,t),e.prototype.baseUrl=function(t){var e,n;if(n=D.AuthDriver.BrowserBase.currentLocation(),t){if(t.redirectUrl)return t.redirectUrl;if(t.redirectFile)return this.replaceUrlBasename(n,t.redirectFile)}return e=n.indexOf("#"),-1!==e&&(n=n.substring(0,e)),n},e.prototype.url=function(){return this.receiverUrl},e.prototype.doAuthorize=function(t,e,n){return this.storeCredentials(n.credentials(),function(){return window.location.assign(t)})},e.prototype.resumeAuthorize=function(t,e,n){var r;return this.locationStateParam()===t?(r=D.AuthDriver.BrowserBase.currentLocation(),D.AuthDriver.BrowserBase.cleanupLocation(),n(D.Util.Oauth.queryParamsFromUrl(r))):this.forgetCredentials(function(){return n({error:"Authorization error"})})},e}(D.AuthDriver.BrowserBase),D.AuthDriver.Popup=function(t){function e(t){e.__super__.constructor.call(this,t),this.receiverUrl=this.baseUrl(t)}return ue(e,t),e.prototype.url=function(){return this.receiverUrl},e.prototype.doAuthorize=function(t,e,n,r){return this.listenForMessage(e,r),this.openWindow(t)},e.prototype.baseUrl=function(t){var e;if(e=D.AuthDriver.BrowserBase.currentLocation(),t){if(t.receiverUrl)return t.receiverUrl;if(t.receiverFile)return this.replaceUrlBasename(e,t.receiverFile)}return e},e.prototype.openWindow=function(t){return window.open(t,"_dropboxOauthSigninWindow",this.popupWindowSpec(980,700))},e.prototype.popupWindowSpec=function(t,e){var n,r,i,o,s,a,u,l,c,h;return s=null!=(u=window.screenX)?u:window.screenLeft,a=null!=(l=window.screenY)?l:window.screenTop,o=null!=(c=window.outerWidth)?c:document.documentElement.clientWidth,n=null!=(h=window.outerHeight)?h:document.documentElement.clientHeight,r=Math.round(s+(o-t)/2),i=Math.round(a+(n-e)/2.5),s>r&&(r=s),a>i&&(i=a),"width="+t+",height="+e+","+("left="+r+",top="+i)+"dialog=yes,dependent=yes,scrollbars=yes,location=yes"},e.prototype.listenForMessage=function(t,e){var n,r=this;return n=function(i){var o,s,a;o=i.data?i.data:i;try{a=JSON.parse(o)._dropboxjs_oauth_info}catch(u){return s=u,void 0}return a?r.locationStateParam(a)===t?(t=!1,window.removeEventListener("message",n),D.AuthDriver.Popup.onMessage.removeListener(n),e(D.Util.Oauth.queryParamsFromUrl(o))):void 0:void 0},window.addEventListener("message",n,!1),D.AuthDriver.Popup.onMessage.addListener(n)},e.locationOrigin=function(t){var e;return(e=/^(file:\/\/[^\?\#]*)(\?|\#|$)/.exec(t))?e[1]:(e=/^([^\:]+\:\/\/[^\/\?\#]*)(\/|\?|\#|$)/.exec(t),e?e[1]:t)},e.oauthReceiver=function(){window.addEventListener("load",function(){var t,e,n,r,i,o;if(o=window.location.href,n=JSON.stringify({_dropboxjs_oauth_info:o}),D.AuthDriver.BrowserBase.cleanupLocation(),r=window.opener,window.parent!==window.top&&(r||(r=window.parent)),r){try{i=window.location.origin||locationOrigin(o),r.postMessage(n,i),window.close()}catch(s){e=s}try{return r.Dropbox.AuthDriver.Popup.onMessage.dispatch(n),window.close()}catch(s){t=s}}})},e.onMessage=new D.Util.EventSource,e}(D.AuthDriver.BrowserBase),h=null,f=null,"undefined"!=typeof chrome&&null!==chrome&&(chrome.runtime&&(chrome.runtime.onMessage&&(h=chrome.runtime.onMessage),chrome.runtime.sendMessage&&(f=chrome.runtime.sendMessage.bind(chrome.runtime))),chrome.extension&&(chrome.extension.onMessage&&(h||(h=chrome.extension.onMessage)),chrome.extension.sendMessage&&(f||(f=chrome.extension.sendMessage.bind(chrome.extension))))),D.AuthDriver.Chrome=function(t){function e(t){var n;e.__super__.constructor.call(this,t),n=t&&t.receiverPath||"chrome_oauth_receiver.html",this.useQuery=!0,this.receiverUrl=this.expandUrl(n),this.storageKey="dropbox_js_"+this.scope+"_credentials"}return ue(e,t),e.prototype.onMessage=h,e.prototype.sendMessage=f,e.prototype.expandUrl=function(t){return chrome.runtime&&chrome.runtime.getURL?chrome.runtime.getURL(t):chrome.extension&&chrome.extension.getURL?chrome.extension.getURL(t):t},e.prototype.onAuthStepChange=function(t,e){var n=this;switch(t.authStep){case D.Client.RESET:return this.loadCredentials(function(r){if(r){if(r.authStep)return n.forgetCredentials(e);t.setCredentials(r)}return e()});case D.Client.DONE:return this.storeCredentials(t.credentials(),e);case D.Client.SIGNED_OUT:return this.forgetCredentials(e);case D.Client.ERROR:return this.forgetCredentials(e);default:return e()}},e.prototype.doAuthorize=function(t,e,n,r){var i,o,s,a,u=this;return(null!=(o=chrome.identity)?o.launchWebAuthFlow:void 0)?chrome.identity.launchWebAuthFlow({url:t,interactive:!0},function(t){return u.locationStateParam(t)===e?(e=!1,r(D.Util.Oauth.queryParamsFromUrl(t))):void 0}):(null!=(s=chrome.experimental)?null!=(a=s.identity)?a.launchWebAuthFlow:void 0:void 0)?chrome.experimental.identity.launchWebAuthFlow({url:t,interactive:!0},function(t){return u.locationStateParam(t)===e?(e=!1,r(D.Util.Oauth.queryParamsFromUrl(t))):void 0
}):(i={handle:null},this.listenForMessage(e,i,r),this.openWindow(t,function(t){return i.handle=t}))},e.prototype.openWindow=function(t,e){return chrome.tabs&&chrome.tabs.create?(chrome.tabs.create({url:t,active:!0,pinned:!1},function(t){return e(t)}),this):this},e.prototype.closeWindow=function(t){return chrome.tabs&&chrome.tabs.remove&&t.id?(chrome.tabs.remove(t.id),this):chrome.app&&chrome.app.window&&t.close?(t.close(),this):this},e.prototype.url=function(){return this.receiverUrl},e.prototype.listenForMessage=function(t,e,n){var r,i=this;return r=function(o,s){var a;return s&&s.tab&&s.tab.url.substring(0,i.receiverUrl.length)!==i.receiverUrl||!o.dropbox_oauth_receiver_href?void 0:(a=o.dropbox_oauth_receiver_href,i.locationStateParam(a)===t?(t=!1,e.handle&&i.closeWindow(e.handle),i.onMessage.removeListener(r),n(D.Util.Oauth.queryParamsFromUrl(a))):void 0)},this.onMessage.addListener(r)},e.prototype.storeCredentials=function(t,e){var n;return n={},n[this.storageKey]=t,chrome.storage.local.set(n,e),this},e.prototype.loadCredentials=function(t){var e=this;return chrome.storage.local.get(this.storageKey,function(n){return t(n[e.storageKey]||null)}),this},e.prototype.forgetCredentials=function(t){return chrome.storage.local.remove(this.storageKey,t),this},e.oauthReceiver=function(){return window.addEventListener("load",function(){var t,e;return t=new D.AuthDriver.Chrome,e=window.location.href,window.location.hash="",t.sendMessage({dropbox_oauth_receiver_href:e}),window.close?window.close():void 0})},e}(D.AuthDriver.BrowserBase),D.AuthDriver.Cordova=function(t){function e(t){e.__super__.constructor.call(this,t)}return ue(e,t),e.prototype.url=function(){return"https://www.dropbox.com/1/oauth2/redirect_receiver"},e.prototype.doAuthorize=function(t,e,n,r){var i,o,s,a,u,l=this;return o=window.open(t,"_blank","location=yes,closebuttoncaption=Cancel"),a=!1,i=/^[^/]*\/\/[^/]*\//.exec(t)[0],u=!1,s=function(t){if(t.url&&l.locationStateParam(t.url)===e){if(u)return;return o.removeEventListener("loadstart",s),o.removeEventListener("loaderror",s),o.removeEventListener("loadstop",s),o.removeEventListener("exit",s),u=!0,window.setTimeout(function(){return o.close()},10),r(D.Util.Oauth.queryParamsFromUrl(t.url)),void 0}if("exit"===t.type){if(u)return;o.removeEventListener("loadstart",s),o.removeEventListener("loaderror",s),o.removeEventListener("loadstop",s),o.removeEventListener("exit",s),u=!0,r(new AuthError("error=access_denied&error_description=User+closed+browser+window"))}},o.addEventListener("loadstart",s),o.addEventListener("loaderror",s),o.addEventListener("loadstop",s),o.addEventListener("exit",s)},e}(D.AuthDriver.BrowserBase),D.AuthDriver.NodeServer=function(){function t(t){this._port=(null!=t?t.port:void 0)||8912,(null!=t?t.tls:void 0)?(this._tlsOptions=t.tls,("string"==typeof this._tlsOptions||this._tlsOptions instanceof Buffer)&&(this._tlsOptions={key:this._tlsOptions,cert:this._tlsOptions})):this._tlsOptions=null,this._fs=D.Env.require("fs"),this._http=D.Env.require("http"),this._https=D.Env.require("https"),this._open=D.Env.require("open"),this._callbacks={},this._nodeUrl=D.Env.require("url"),this.createApp()}return t.prototype.authType=function(){return"code"},t.prototype.url=function(){var t;return t=null===this._tlsOptions?"http":"https",""+t+"://localhost:"+this._port+"/oauth_callback"},t.prototype.doAuthorize=function(t,e,n,r){return this._callbacks[e]=r,this.openBrowser(t)},t.prototype.openBrowser=function(t){if(!t.match(/^https?:\/\//))throw new Error("Not a http/https URL: "+t);return"BROWSER"in process.env?this._open(t,process.env.BROWSER):this._open(t)},t.prototype.createApp=function(){var t=this;return this._app=this._tlsOptions?this._https.createServer(this._tlsOptions,function(e,n){return t.doRequest(e,n)}):this._http.createServer(function(e,n){return t.doRequest(e,n)}),this._app.listen(this._port)},t.prototype.closeServer=function(){return this._app.close()},t.prototype.doRequest=function(t,e){var n,r,i,o=this;return i=this._nodeUrl.parse(t.url,!0),"/oauth_callback"===i.pathname&&(r=i.query.state,this._callbacks[r]&&(this._callbacks[r](i.query),delete this._callbacks[r])),n="",t.on("data",function(t){return n+=t}),t.on("end",function(){return o.closeBrowser(e)})},t.prototype.closeBrowser=function(t){var e;return e='<!doctype html>\n<script type="text/javascript">window.close();</script>\n<p>Please close this window.</p>',t.writeHead(200,{"Content-Length":e.length,"Content-Type":"text/html"}),t.write(e),t.end()},t}(),D.AuthError=function(){function t(t){var e;if(!t.error)throw new Error("Not an OAuth 2.0 error: "+JSON.stringify(t));e="object"==typeof t.error&&t.error.error?t.error:t,this.code=e.error,this.description=e.error_description||null,this.uri=e.error_uri||null}return t.prototype.code=null,t.prototype.description=null,t.prototype.uri=null,t.ACCESS_DENIED="access_denied",t.INVALID_REQUEST="invalid_request",t.UNAUTHORIZED_CLIENT="unauthorized_client",t.INVALID_GRANT="invalid_grant",t.INVALID_SCOPE="invalid_scope",t.UNSUPPORTED_GRANT_TYPE="unsupported_grant_type",t.UNSUPPORTED_RESPONSE_TYPE="unsupported_response_type",t.SERVER_ERROR="server_error",t.TEMPORARILY_UNAVAILABLE="temporarily_unavailable",t.prototype.toString=function(){return"Dropbox OAuth error "+this.code+" :: "+this.description},t.prototype.inspect=function(){return this.toString()},t}(),D.Client=function(){function t(t){var e=this;this.serverRoot=t.server||this.defaultServerRoot(),this.maxApiServer="maxApiServer"in t?t.maxApiServer:this.defaultMaxApiServer(),this.authServer=t.authServer||this.defaultAuthServer(),this.fileServer=t.fileServer||this.defaultFileServer(),this.downloadServer=t.downloadServer||this.defaultDownloadServer(),this.onXhr=new D.Util.EventSource({cancelable:!0}),this.onError=new D.Util.EventSource,this.onAuthStepChange=new D.Util.EventSource,this.xhrOnErrorHandler=function(t,n){return e.handleXhrError(t,n)},this.oauth=new D.Util.Oauth(t),this.uid=t.uid||null,this.authStep=this.oauth.step(),this.driver=null,this.filter=null,this.authError=null,this._credentials=null,this._datastoreManager=null,this.setupUrls()}return t.prototype.onXhr=null,t.prototype.onError=null,t.prototype.onAuthStepChange=null,t.prototype.authDriver=function(t){return this.driver=t,this},t.prototype.dropboxUid=function(){return this.uid},t.prototype.credentials=function(){return this._credentials||this.computeCredentials(),this._credentials},t.prototype.authenticate=function(t,e){var n,r,i,o,s,a=this;if(e||"function"!=typeof t||(e=t,t=null),n=t&&"interactive"in t?t.interactive:!0,!this.driver&&this.authStep!==d.DONE&&(D.AuthDriver.autoConfigure(this),!this.driver))throw new Error("OAuth driver auto-configuration failed. Call authDriver.");if(this.authStep===d.ERROR)throw new Error("Client got in an error state. Call reset() to reuse it!");return o=function(){return a.authStep=a.oauth.step(),a.authStep===d.ERROR&&(a.authError=a.oauth.error()),a._credentials=null,a.onAuthStepChange.dispatch(a),s()},i=function(){return a.authStep=d.ERROR,a._credentials=null,a.onAuthStepChange.dispatch(a),s()},r=null,s=function(){var t;if(r!==a.authStep&&(r=a.authStep,a.driver&&a.driver.onAuthStepChange))return a.driver.onAuthStepChange(a,s),void 0;switch(a.authStep){case d.RESET:return n?(a.driver.getStateParam&&a.driver.getStateParam(function(t){return a.client.authStep===d.RESET&&a.oauth.setAuthStateParam(t),o()}),a.oauth.setAuthStateParam(D.Util.Oauth.randomAuthStateParam()),o()):(e&&e(null,a),void 0);case d.PARAM_SET:return n?(t=a.authorizeUrl(),a.driver.doAuthorize(t,a.oauth.authStateParam(),a,function(t){return a.oauth.processRedirectParams(t),t.uid&&(a.uid=t.uid),o()})):(e&&e(null,a),void 0);case d.PARAM_LOADED:return a.driver.resumeAuthorize?a.driver.resumeAuthorize(a.oauth.authStateParam(),a,function(t){return a.oauth.processRedirectParams(t),t.uid&&(a.uid=t.uid),o()}):(a.oauth.setAuthStateParam(a.oauth.authStateParam()),o(),void 0);case d.AUTHORIZED:return a.getAccessToken(function(t,e){return t?(a.authError=t,i()):(a.oauth.processRedirectParams(e),a.uid=e.uid,o())});case d.DONE:e&&e(null,a);break;case d.SIGNED_OUT:return a.authStep=d.RESET,a.reset(),s();case d.ERROR:e&&e(a.authError,a)}},s(),this},t.prototype.isAuthenticated=function(){return this.authStep===d.DONE},t.prototype.signOut=function(t,e){var n,r,i=this;if(e||"function"!=typeof t||(e=t,t=null),n=t&&t.mustInvalidate,this.authStep!==d.DONE)throw new Error("This client doesn't have a user's token");return r=new D.Util.Xhr("POST",this.urls.signOut),r.signWithOauth(this.oauth),this.dispatchXhr(r,function(t){if(t)if(t.status===D.ApiError.INVALID_TOKEN)t=null;else if(n)return e&&e(t),void 0;return i.authStep=d.RESET,i.reset(),i.authStep=d.SIGNED_OUT,i.onAuthStepChange.dispatch(i),i.driver&&i.driver.onAuthStepChange?i.driver.onAuthStepChange(i,function(){return e?e(null):void 0}):e?e(null):void 0})},t.prototype.signOff=function(t,e){return this.signOut(t,e)},t.prototype.getAccountInfo=function(t,e){var n,r;return e||"function"!=typeof t||(e=t,t=null),n=!1,t&&t.httpCache&&(n=!0),r=new D.Util.Xhr("GET",this.urls.accountInfo),r.signWithOauth(this.oauth,n),this.dispatchXhr(r,function(t,n){return e(t,D.AccountInfo.parse(n),n)})},t.prototype.getUserInfo=function(t,e){return this.getAccountInfo(t,e)},t.prototype.readFile=function(t,e,n){var r,i,o,s,a,u,l;return n||"function"!=typeof e||(n=e,e=null),i={},u="text",s=null,r=!1,e&&(e.versionTag?i.rev=e.versionTag:e.rev&&(i.rev=e.rev),e.arrayBuffer?u="arraybuffer":e.blob?u="blob":e.buffer?u="buffer":e.binary&&(u="b"),e.length?(null!=e.start?(a=e.start,o=e.start+e.length-1):(a="",o=e.length),s="bytes="+a+"-"+o):null!=e.start&&(s="bytes="+e.start+"-"),e.httpCache&&(r=!0)),l=new D.Util.Xhr("GET",""+this.urls.getFile+"/"+this.urlEncodePath(t)),l.setParams(i).signWithOauth(this.oauth,r),l.setResponseType(u),s&&(s&&l.setHeader("Range",s),l.reportResponseHeaders()),this.dispatchXhr(l,function(t,e,r,i){var o;return o=i?D.Http.RangeInfo.parse(i["content-range"]):null,n(t,e,D.File.Stat.parse(r),o)})},t.prototype.writeFile=function(t,e,n,r){var i;return r||"function"!=typeof n||(r=n,n=null),i=D.Util.Xhr.canSendForms&&"object"==typeof e,i?this.writeFileUsingForm(t,e,n,r):this.writeFileUsingPut(t,e,n,r)},t.prototype.writeFileUsingForm=function(t,e,n,r){var i,o,s,a;return s=t.lastIndexOf("/"),-1===s?(i=t,t=""):(i=t.substring(s),t=t.substring(0,s)),o={file:i},n&&(n.noOverwrite&&(o.overwrite="false"),n.lastVersionTag?o.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(o.parent_rev=n.parentRev||n.parent_rev)),a=new D.Util.Xhr("POST",""+this.urls.postFile+"/"+this.urlEncodePath(t)),a.setParams(o).signWithOauth(this.oauth).setFileField("file",i,e,"application/octet-stream"),delete o.file,this.dispatchXhr(a,function(t,e){return r?r(t,D.File.Stat.parse(e)):void 0})},t.prototype.writeFileUsingPut=function(t,e,n,r){var i,o;return i={},n&&(n.noOverwrite&&(i.overwrite="false"),n.lastVersionTag?i.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(i.parent_rev=n.parentRev||n.parent_rev)),o=new D.Util.Xhr("POST",""+this.urls.putFile+"/"+this.urlEncodePath(t)),o.setBody(e).setParams(i).signWithOauth(this.oauth),this.dispatchXhr(o,function(t,e){return r?r(t,D.File.Stat.parse(e)):void 0})},t.prototype.resumableUploadStep=function(t,e,n){var r,i;return e?(r={offset:e.offset},e.tag&&(r.upload_id=e.tag)):r={offset:0},i=new D.Util.Xhr("POST",this.urls.chunkedUpload),i.setBody(t).setParams(r).signWithOauth(this.oauth),this.dispatchXhr(i,function(t,e){return t&&t.status===D.ApiError.INVALID_PARAM&&t.response&&t.response.upload_id&&t.response.offset?n(null,D.Http.UploadCursor.parse(t.response)):n(t,D.Http.UploadCursor.parse(e))})},t.prototype.resumableUploadFinish=function(t,e,n,r){var i,o;return r||"function"!=typeof n||(r=n,n=null),i={upload_id:e.tag},n&&(n.lastVersionTag?i.parent_rev=n.lastVersionTag:(n.parentRev||n.parent_rev)&&(i.parent_rev=n.parentRev||n.parent_rev),n.noOverwrite&&(i.overwrite="false")),o=new D.Util.Xhr("POST",""+this.urls.commitChunkedUpload+"/"+this.urlEncodePath(t)),o.setParams(i).signWithOauth(this.oauth),this.dispatchXhr(o,function(t,e){return r?r(t,D.File.Stat.parse(e)):void 0})},t.prototype.stat=function(t,e,n){var r,i,o;return n||"function"!=typeof e||(n=e,e=null),i={},r=!1,e&&(e.versionTag?i.rev=e.versionTag:e.rev&&(i.rev=e.rev),e.contentHash?i.hash=e.contentHash:e.hash&&(i.hash=e.hash),(e.removed||e.deleted)&&(i.include_deleted="true"),e.readDir&&(i.list="true",e.readDir!==!0&&(i.file_limit=e.readDir.toString())),e.cacheHash&&(i.hash=e.cacheHash),e.httpCache&&(r=!0)),i.include_deleted||(i.include_deleted="false"),i.list||(i.list="false"),o=new D.Util.Xhr("GET",""+this.urls.metadata+"/"+this.urlEncodePath(t)),o.setParams(i).signWithOauth(this.oauth,r),this.dispatchXhr(o,function(t,e){var r,i,o;return o=D.File.Stat.parse(e),r=(null!=e?e.contents:void 0)?function(){var t,n,r,o;for(r=e.contents,o=[],t=0,n=r.length;n>t;t++)i=r[t],o.push(D.File.Stat.parse(i));return o}():void 0,n(t,o,r)})},t.prototype.readdir=function(t,e,n){var r;return n||"function"!=typeof e||(n=e,e=null),r={readDir:!0},e&&(null!=e.limit&&(r.readDir=e.limit),e.versionTag?r.versionTag=e.versionTag:e.rev&&(r.versionTag=e.rev),e.contentHash?r.contentHash=e.contentHash:e.hash&&(r.contentHash=e.hash),(e.removed||e.deleted)&&(r.removed=e.removed||e.deleted),e.httpCache&&(r.httpCache=e.httpCache)),this.stat(t,r,function(t,e,r){var i,o;return i=r?function(){var t,e,n;for(n=[],t=0,e=r.length;e>t;t++)o=r[t],n.push(o.name);return n}():null,n(t,i,e,r)})},t.prototype.metadata=function(t,e,n){return this.stat(t,e,n)},t.prototype.makeUrl=function(t,e,n){var r,i,o,s,a,u=this;return n||"function"!=typeof e||(n=e,e=null),i=e&&(e["long"]||e.longUrl||e.downloadHack)?{short_url:"false"}:{},t=this.urlEncodePath(t),o=""+this.urls.shares+"/"+t,r=!1,s=!1,e&&(e.downloadHack?(r=!0,s=!0):e.download&&(r=!0,o=""+this.urls.media+"/"+t)),a=new D.Util.Xhr("POST",o).setParams(i).signWithOauth(this.oauth),this.dispatchXhr(a,function(t,e){return s&&(null!=e?e.url:void 0)&&(e.url=e.url.replace(u.authServer,u.downloadServer)),n(t,D.File.ShareUrl.parse(e,r))})},t.prototype.history=function(t,e,n){var r,i,o;return n||"function"!=typeof e||(n=e,e=null),i={},r=!1,e&&(null!=e.limit&&(i.rev_limit=e.limit),e.httpCache&&(r=!0)),o=new D.Util.Xhr("GET",""+this.urls.revisions+"/"+this.urlEncodePath(t)),o.setParams(i).signWithOauth(this.oauth,r),this.dispatchXhr(o,function(t,e){var r,i;return i=e?function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)r=e[t],i.push(D.File.Stat.parse(r));return i}():void 0,n(t,i)})},t.prototype.revisions=function(t,e,n){return this.history(t,e,n)},t.prototype.thumbnailUrl=function(t,e){var n;return n=this.thumbnailXhr(t,e),n.paramsToUrl().url},t.prototype.readThumbnail=function(t,e,n){var r,i;return n||"function"!=typeof e||(n=e,e=null),r="b",e&&(e.blob&&(r="blob"),e.arrayBuffer&&(r="arraybuffer"),e.buffer&&(r="buffer")),i=this.thumbnailXhr(t,e),i.setResponseType(r),this.dispatchXhr(i,function(t,e,r){return n(t,e,D.File.Stat.parse(r))})},t.prototype.thumbnailXhr=function(t,e){var n,r;return n={},e&&(e.format?n.format=e.format:e.png&&(n.format="png"),e.size&&(n.size=e.size)),r=new D.Util.Xhr("GET",""+this.urls.thumbnails+"/"+this.urlEncodePath(t)),r.setParams(n).signWithOauth(this.oauth)},t.prototype.revertFile=function(t,e,n){var r;return r=new D.Util.Xhr("POST",""+this.urls.restore+"/"+this.urlEncodePath(t)),r.setParams({rev:e}).signWithOauth(this.oauth),this.dispatchXhr(r,function(t,e){return n?n(t,D.File.Stat.parse(e)):void 0})},t.prototype.restore=function(t,e,n){return this.revertFile(t,e,n)},t.prototype.findByName=function(t,e,n,r){var i,o,s;return r||"function"!=typeof n||(r=n,n=null),o={query:e},i=!1,n&&(null!=n.limit&&(o.file_limit=n.limit),(n.removed||n.deleted)&&(o.include_deleted=!0),n.httpCache&&(i=!0)),s=new D.Util.Xhr("GET",""+this.urls.search+"/"+this.urlEncodePath(t)),s.setParams(o).signWithOauth(this.oauth,i),this.dispatchXhr(s,function(t,e){var n,i;return i=e?function(){var t,r,i;for(i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(D.File.Stat.parse(n));return i}():void 0,r(t,i)})},t.prototype.search=function(t,e,n,r){return this.findByName(t,e,n,r)},t.prototype.makeCopyReference=function(t,e){var n;return n=new D.Util.Xhr("GET",""+this.urls.copyRef+"/"+this.urlEncodePath(t)),n.signWithOauth(this.oauth),this.dispatchXhr(n,function(t,n){return e(t,D.File.CopyReference.parse(n))})},t.prototype.copyRef=function(t,e){return this.makeCopyReference(t,e)},t.prototype.pullChanges=function(t,e){var n,r;return e||"function"!=typeof t||(e=t,t=null),n=t?t.cursorTag?{cursor:t.cursorTag}:{cursor:t}:{},r=new D.Util.Xhr("POST",this.urls.delta),r.setParams(n).signWithOauth(this.oauth),this.dispatchXhr(r,function(t,n){return e(t,D.Http.PulledChanges.parse(n))})},t.prototype.delta=function(t,e){return this.pullChanges(t,e)},t.prototype.mkdir=function(t,e){var n;return n=new D.Util.Xhr("POST",this.urls.fileopsCreateFolder),n.setParams({root:"auto",path:this.normalizePath(t)}).signWithOauth(this.oauth),this.dispatchXhr(n,function(t,n){return e?e(t,D.File.Stat.parse(n)):void 0})},t.prototype.remove=function(t,e){var n;return n=new D.Util.Xhr("POST",this.urls.fileopsDelete),n.setParams({root:"auto",path:this.normalizePath(t)}).signWithOauth(this.oauth),this.dispatchXhr(n,function(t,n){return e?e(t,D.File.Stat.parse(n)):void 0})},t.prototype.unlink=function(t,e){return this.remove(t,e)},t.prototype["delete"]=function(t,e){return this.remove(t,e)},t.prototype.copy=function(t,e,n){var r,i,o;return n||"function"!=typeof r||(n=r,r=null),i={root:"auto",to_path:this.normalizePath(e)},t instanceof D.File.CopyReference?i.from_copy_ref=t.tag:i.from_path=this.normalizePath(t),o=new D.Util.Xhr("POST",this.urls.fileopsCopy),o.setParams(i).signWithOauth(this.oauth),this.dispatchXhr(o,function(t,e){return n?n(t,D.File.Stat.parse(e)):void 0})},t.prototype.move=function(t,e,n){var r,i;return n||"function"!=typeof r||(n=r,r=null),i=new D.Util.Xhr("POST",this.urls.fileopsMove),i.setParams({root:"auto",from_path:this.normalizePath(t),to_path:this.normalizePath(e)}).signWithOauth(this.oauth),this.dispatchXhr(i,function(t,e){return n?n(t,D.File.Stat.parse(e)):void 0})},t.prototype.appInfo=function(t,e){var n;return e||"function"!=typeof t||(e=t,t=this.oauth.credentials().key),n=new D.Util.Xhr("GET",this.urls.appsInfo),n.setParams({app_key:t}),this.dispatchXhr(n,function(n,r){return e(n,D.Http.AppInfo.parse(r,t))})},t.prototype.isAppDeveloper=function(t,e,n){var r;return"object"==typeof t&&"uid"in t&&(t=t.uid),n||"function"!=typeof e?"object"==typeof e&&"key"in e&&(e=e.key):(n=e,e=this.oauth.credentials().key),r=new D.Util.Xhr("GET",this.urls.appsCheckDeveloper),r.setParams({app_key:e,uid:t}),this.dispatchXhr(r,function(t,e){return e?n(t,e.is_developer):n(t)})},t.prototype.hasOauthRedirectUri=function(t,e,n){var r;return n||"function"!=typeof e?"object"==typeof e&&"key"in e&&(e=e.key):(n=e,e=this.oauth.credentials().key),r=new D.Util.Xhr("GET",this.urls.appsCheckRedirectUri),r.setParams({app_key:e,redirect_uri:t}),this.dispatchXhr(r,function(t,e){return e?n(t,e.has_redirect_uri):n(t)})},t.prototype.reset=function(){var t;return this.uid=null,this.oauth.reset(),t=this.authStep,this.authStep=this.oauth.step(),t!==this.authStep&&this.onAuthStepChange.dispatch(this),this.authError=null,this._credentials=null,this},t.prototype.setCredentials=function(t){var e;return e=this.authStep,this.oauth.setCredentials(t),this.authStep=this.oauth.step(),this.uid=t.uid||null,this.authError=null,this._credentials=null,e!==this.authStep&&this.onAuthStepChange.dispatch(this),this},t.prototype.appHash=function(){return this.oauth.appHash()},t.prototype.setupUrls=function(){return this.apiServer=this.chooseApiServer(),this.urls={authorize:""+this.authServer+"/1/oauth2/authorize",token:""+this.apiServer+"/1/oauth2/token",signOut:""+this.apiServer+"/1/unlink_access_token",accountInfo:""+this.apiServer+"/1/account/info",getFile:""+this.fileServer+"/1/files/auto",postFile:""+this.fileServer+"/1/files/auto",putFile:""+this.fileServer+"/1/files_put/auto",metadata:""+this.apiServer+"/1/metadata/auto",delta:""+this.apiServer+"/1/delta",revisions:""+this.apiServer+"/1/revisions/auto",restore:""+this.apiServer+"/1/restore/auto",search:""+this.apiServer+"/1/search/auto",shares:""+this.apiServer+"/1/shares/auto",media:""+this.apiServer+"/1/media/auto",copyRef:""+this.apiServer+"/1/copy_ref/auto",thumbnails:""+this.fileServer+"/1/thumbnails/auto",chunkedUpload:""+this.fileServer+"/1/chunked_upload",commitChunkedUpload:""+this.fileServer+"/1/commit_chunked_upload/auto",fileopsCopy:""+this.apiServer+"/1/fileops/copy",fileopsCreateFolder:""+this.apiServer+"/1/fileops/create_folder",fileopsDelete:""+this.apiServer+"/1/fileops/delete",fileopsMove:""+this.apiServer+"/1/fileops/move",appsInfo:""+this.apiServer+"/1/apps/info",appsCheckDeveloper:""+this.apiServer+"/1/apps/check_developer",appsCheckRedirectUri:""+this.apiServer+"/1/apps/check_redirect_uri",getDb:""+this.apiServer+"/r5/datastores/get_datastore",getOrCreateDb:""+this.apiServer+"/r5/datastores/get_or_create_datastore",createDb:""+this.apiServer+"/r5/datastores/create_datastore",listDbs:""+this.apiServer+"/r5/datastores/list_datastores",deleteDb:""+this.apiServer+"/r5/datastores/delete_datastore",getSnapshot:""+this.apiServer+"/r5/datastores/get_snapshot",getDeltas:""+this.apiServer+"/r5/datastores/get_deltas",putDelta:""+this.apiServer+"/r5/datastores/put_delta",datastoreAwait:""+this.apiServer+"/r5/datastores/await"},this},t.prototype.chooseApiServer=function(){var t,e;return e=Math.floor(Math.random()*(this.maxApiServer+1)),t=0===e?"":e.toString(),this.serverRoot.replace("$",t)},t.prototype.authStep=null,t.ERROR=0,t.RESET=1,t.PARAM_SET=2,t.PARAM_LOADED=3,t.AUTHORIZED=4,t.DONE=5,t.SIGNED_OUT=6,t.prototype.urlEncodePath=function(t){return D.Util.Xhr.urlEncodeValue(this.normalizePath(t)).replace(/%2F/gi,"/")},t.prototype.normalizePath=function(t){var e;if("/"===t.substring(0,1)){for(e=1;"/"===t.substring(e,e+1);)e+=1;return t.substring(e)}return t},t.prototype.authorizeUrl=function(){var t;return t=this.oauth.authorizeUrlParams(this.driver.authType(),this.driver.url()),this.urls.authorize+"?"+D.Util.Xhr.urlEncode(t)},t.prototype.getAccessToken=function(t){var e,n;return e=this.oauth.accessTokenParams(this.driver.url()),n=new D.Util.Xhr("POST",this.urls.token).setParams(e).addOauthParams(this.oauth),this.dispatchXhr(n,function(e,n){return e&&e.status===D.ApiError.INVALID_PARAM&&e.response&&e.response.error&&(e=new D.AuthError(e.response)),t(e,n)})},t.prototype.dispatchLongPollXhr=function(t,e,n){return null==n&&(n=6e4),this.dispatchXhr(t,e,n)},t.prototype.dispatchXhr=function(t,e,n){var r,i,o=this;return null==n&&(n=1e4),r=setTimeout(function(){return o.handleLongRequest(t)},2*n),t.setCallback(function(t,n,i,o){return clearTimeout(r),e(t,n,i,o)}),t.onError=this.xhrOnErrorHandler,t.prepare(),i=t.xhr,this.onXhr.dispatch(t)&&t.send(),i},t.prototype.handleXhrError=function(t,e){var n=this;return t.status===D.ApiError.INVALID_TOKEN&&this.authStep===d.DONE&&(this.authError=t,this.authStep=d.ERROR,this.onAuthStepChange.dispatch(this),this.driver&&this.driver.onAuthStepChange)?(this.driver.onAuthStepChange(this,function(){return n.onError.dispatch(t),e(t)}),null):(this.onError.dispatch(t),e(t),void 0)},t.prototype.handleLongRequest=function(){return this.setupUrls()},t.prototype.defaultServerRoot=function(){return"https://api$.dropbox.com"},t.prototype.defaultAuthServer=function(){return this.serverRoot.replace("api$","www")},t.prototype.defaultFileServer=function(){return this.serverRoot.replace("api$","api-content")},t.prototype.defaultDownloadServer=function(){return"https://dl.dropboxusercontent.com"},t.prototype.defaultWsServer=function(){return this.serverRoot.replace(/^https?:/,"wss:")},t.prototype.defaultMaxApiServer=function(){return 30},t.prototype.computeCredentials=function(){var t;t=this.oauth.credentials(),this.uid&&(t.uid=this.uid),this.serverRoot!==this.defaultServerRoot()&&(t.server=this.serverRoot),this.maxApiServer!==this.defaultMaxApiServer()&&(t.maxApiServer=this.maxApiServer),this.authServer!==this.defaultAuthServer()&&(t.authServer=this.authServer),this.fileServer!==this.defaultFileServer()&&(t.fileServer=this.fileServer),this.downloadServer!==this.defaultDownloadServer()&&(t.downloadServer=this.downloadServer),this._credentials=t},t}(),d=D.Client,D.Datastore=function(){function t(t,e){var n=this;this._datastore_manager=t,this._managed_datastore=e,this._dsid=this._managed_datastore.get_dsid(),this._handle=this._managed_datastore.get_handle(),this._record_cache=new V(this),this._last_used_timestamp=0,this.recordsChanged=new D.Util.EventSource,this.syncStatusChanged=new D.Util.EventSource,this._timeoutWrapper=function(t){return t},this._evt_mgr=new E,this._evt_mgr.register(this._managed_datastore.syncStateChanged,function(){return n._syncSoon(),n.syncStatusChanged.dispatch(null)}),this._syncPending=!1,this._closed=!1,this._metadata_table=new D.Datastore.Table(this,":info"),this._metadata_table.setResolutionRule("mtime","max")}return t.prototype.recordsChanged=null,t.prototype.syncStatusChanged=null,t.int64=function(t){var e,n;if(te.is_number(t)&&null!=t[ie.INT64_TAG])return ie.validateInt64(t);if(te.is_string(t)){if(!ie.is_valid_int64_string(t))throw new Error("Not a valid int64 in string form: "+t);return n=new Number(parseInt(t,10)),n[ie.INT64_TAG]=t,ie.validateInt64(n)}if(!te.is_number(t)||!isFinite(t))throw new Error("Not a finite number: "+t);if(Number(t)!==Math.round(t))throw new Error("Number is not an integer: "+t);if(e=t.toFixed(),!ie.is_valid_int64_string(e))throw new Error("Number not in int64 range: "+t);return n=new Number(t),n[ie.INT64_TAG]=e,ie.validateInt64(n)},t.isInt64=function(t){return ie.isInt64(t)},t.prototype.getModifiedTime=function(){var t;return t=this._metadata_table.getOrInsert("info",{}),t.get("mtime")},t.prototype.getTitle=function(){var t;return t=this._metadata_table.getOrInsert("info",{}),t.get("title")},t.prototype.setTitle=function(t){var e;if(null!=t&&!te.string(t))throw new Error("Title must be a string or null!");return e=this._metadata_table.getOrInsert("info",{}),e.set("title",t)},t.prototype.getTable=function(t){if(this._checkNotClosed(),!D.Datastore.Table.isValidId(t))throw new Error("Invalid table ID: "+t);return new D.Datastore.Table(this,t)},t.prototype.listTableIds=function(){return this._checkNotClosed(),this._managed_datastore.list_tables()},t.prototype.toString=function(){var t;return t=this._closed?"[closed] ":"","Datastore("+t+this._dsid+" ["+this._handle+"])"},t.prototype.close=function(){return this._closed=!0,this._evt_mgr.unregister_all(),this._listeners=[],this._datastore_manager._datasync.obj_manager.close(this._dsid),void 0},t.prototype.getId=function(){return this._dsid},t.prototype.getSyncStatus=function(){return{uploading:this._managed_datastore.get_outgoing_delta_count()>0}},t.isValidId=function(t){var e;return e=new RegExp(te.DS_ID_REGEX),te.is_string(t)&&e.test(t)},t.prototype._generateRid=function(){var t,e,n,r;for(r="_",e="_js_",n=Math.round(1e3*Date.now()),n<=this._last_used_timestamp&&(n=this._last_used_timestamp+1),this._last_used_timestamp=n,t=n.toString(32);t.length<11;)t="0"+t;return r+t+e+ie.randomWeb64String(5)},t.prototype._syncSoon=function(){var t=this;if(this._managed_datastore.is_deleted())throw new Error("Cannot sync deleted datastore "+this._dsid);return this._checkNotClosed(),this._syncPending||(this._syncPending=!0,setTimeout(this._timeoutWrapper(function(){return t._syncPending=!1,t._sync()}),0)),void 0},t.prototype._sync=function(){var t,e,n,r,i,o,s,a,u;this._checkNotClosed(),i=this._managed_datastore.sync(),r=this._resolveAffectedRecordMap(i),t=!1;for(s in r)for(n=r[s],a=0,u=n.length;u>a;a++)e=n[a],re(s===e._tid,"tid mismatch"),t=!0,o=e._rid,this._managed_datastore.query(s,o)||(e._deleted=!0,this._record_cache.remove(s,o));return t&&this.recordsChanged.dispatch(new G(r,!1)),void 0},t.prototype._resolveAffectedRecordMap=function(t){var e,n,r,i,o;n={};for(o in t){i=t[o];for(r in i)e=this._record_cache.getOrCreate(o,r),null==n[o]&&(n[o]=[]),n[o].push(e)}return n},t.prototype._recordsChangedLocally=function(t){return t.length>0&&(this.recordsChanged.dispatch(G._fromRecordList(t,!0)),this._syncSoon()),void 0},t.prototype._checkNotClosed=function(){if(this._closed||!this._managed_datastore._open)throw new Error("Datastore is already closed: "+this);return void 0},t}(),ie=D.Datastore.impl={},te=D.Datastore.impl.T={},te.identity=function(t){return t},te.get_coerce_fn=function(t){return null!=t.coerce?t.coerce:null!=t.load_json?function(e){return e instanceof t?e:t.load_json(e)}:te.identity},te.get_T_fn=function(t){return null!=t.Type?t.Type:t},te.str=function(t){return te.is_string(t)?t:te.is_function(t)?t():JSON.stringify(t)},te.assert=function(t,e){if(!t)throw new Error(te.str(e))},re=te.assert,te.check=function(t,e,n,r,i,o){if(t)return n;throw te.fail(e,n,r,i,o),new Error("unreachable")},te.safe_to_string=function(t){var e,n;try{if(n=t.toString(),"[object Object]"!==n)return n}catch(r){e=r}try{return JSON.stringify(t)}catch(r){e=r}try{if(n=t.constructor.name,null!=n?n.match(/^[A-Za-z0-9_]+$/):void 0)return n}catch(r){e=r}return"[T.safe_to_string failed]"},te.fail=function(t,e,n,r,i){var o,s;throw s=null!=n?null!=r?null!=i?"Wanted "+te.str(r)+", but "+te.str(n)+" in "+te.str(i)+" "+te.str(t):"Wanted "+te.str(r)+", but "+te.str(n)+" "+te.str(t):""+te.str(n)+" "+te.str(t):null!=r?null!=i?"Wanted "+te.str(r)+", but in "+te.str(i)+" "+te.str(t):"Wanted "+te.str(r)+", but "+te.str(t):""+te.str(t),o=new Error(""+s+": "+te.safe_to_string(e)),console.error(o),o},te.any=function(t){return t},te.defined=function(t,e,n,r){return null==n&&(n="defined"),te.check("undefined"!=typeof t,"is undefined",t,e,n,r),t},te.nonnull=function(t,e,n,r){return null==n&&(n="nonnull"),te.defined(t,e,n,r),te.check(null!=t,"is null",t,e,n,r),t},te.member=function(t){var e,n;return n="value in "+JSON.stringify(t),e="not in "+JSON.stringify(t),function(r,i,o,s){return null==o&&(o=n),te.check(ae.call(t,r)>=0,e,r,i,o,s)}},te.object=function(t,e,n,r){return null==n&&(n="object"),te.nonnull(t,e,n,r),te.check("object"==typeof t,"not an object",t,e,n,r),t},te.bool=function(t,e,n,r){return null==n&&(n="bool"),te.nonnull(t,e,n,r),te.check(t===!0||t===!1,"is not bool",t,e,n,r),t},te.string=function(t,e,n,r){return null==n&&(n="string"),te.nonnull(t,e,n,r),te.check(te.is_string(t),"is not a string",t,e,n,r),t},te.num=function(t,e,n,r){return null==n&&(n="num"),te.nonnull(t,e,n,r),te.check("number"==typeof t,"is not numeric",t,e,n,r),t},te.int=function(t,e,n,r){return null==n&&(n="int"),te.num(t,e,n,r),te.check(0===t%1,"is not an integer",t,e,n,r),t},te.uint=function(t,e,n,r){return null==n&&(n="uint"),te.int(t,e,n,r),te.check(t>=0,"is negative",t,e,n,r),t},te.nullable=function(t){var e,n;return n="nullable("+t+")",e=function(e,r,i,o){return null==i&&(i=function(){return n}),te.defined(e,r,i,o),null!=e&&te.get_T_fn(t)(e,r,i,o),e},e.toString=function(){return n},e.coerce=function(e){return null!=e?te.get_coerce_fn(t)(e):null},e.fromJSON=function(n){return null!=n?null!=t.fromJSON?t.fromJSON(n):e.coerce(n):null},e},te.array=function(t,e,n,r){return null==n&&(n="array"),te.nonnull(t,e,n,r),te.check(te.is_array(t),"is not an array",t,e,n,r),t},te.arrayOf=function(t){var e,n;return n="arrayOf("+t+")",e=function(e,r,i,o){var s,a,u,l,c;for(null==i&&(i=n),te.array(e,r,i,o),u=l=0,c=e.length;c>l;u=++l)s=e[u],a=function(){return null!=r?"element "+u+" of "+te.str(r):"element "+u},te.get_T_fn(t)(s,a,i,o);return e},e.toString=function(){return n},e.coerce=function(e){var r,i,o,s;for(te.array(e,null,n),s=[],i=0,o=e.length;o>i;i++)r=e[i],s.push(te.get_coerce_fn(t)(r));return s},e.fromJSON=function(r){var i,o,s,a;if(te.array(r,"fromJSON input",n),null!=t.fromJSON){for(a=[],o=0,s=r.length;s>o;o++)i=r[o],a.push(t.fromJSON(i));return a}return e.coerce(r)},e},te.instance=function(t,e,n,r,i){var o;
if(!(e instanceof Function))throw new Error("Invalid type given: "+e);return t instanceof e||(null==r&&(r=e.name),te.check(!1,"got instance of "+(null!=t?null!=(o=t.constructor)?o.name:void 0:void 0),t,n,r,i)),t},te.unimplemented=function(t){return function(){throw new Error("unimplemented "+t)}},te.startsWith=function(t,e){return 0===t.lastIndexOf(e,0)},te.string_matching=function(t){var e;return te.string(t),te.check(/^[^].*[$]$/.test(t),"does not start with ^ and end with $",t),e="does not match regex "+t,function(n,r,i,o){return te.string(n,r,i,o),te.check(new RegExp(t).test(n),e,n,r,i,o),n}},te.is_defined=function(t){return"undefined"!=typeof t},te.is_bool=function(t){return t===!0||t===!1||t&&"object"==typeof t&&t.constructor===Boolean},te.is_number=function(t){return"number"==typeof t||t&&"object"==typeof t&&t.constructor===Number},te.is_json_number=function(t){return te.is_number(t)&&!isNaN(t)&&isFinite(t)},te.is_string=function(t){return"string"==typeof t||t&&"object"==typeof t&&t.constructor===String},te.is_function=function(t){return"function"==typeof t},te.is_object=function(t){return null!=t&&"object"==typeof t},te.is_array=function(t){return"[object Array]"===Object.prototype.toString.call(t)},te.is_empty=function(t){return 0===Object.keys(t).length},te.is_date=function(t){return"[object Date]"===Object.prototype.toString.call(t)},te.isUint8Array=function(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},te.is_simple_map=function(t){var e,n;if(null==t||"object"!=typeof t)return!1;for(e in t)if(n=t[e],!Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},te.simple_map=function(t,e,n,r){var i,o;null==n&&(n="simple map"),te.object(t,e,n,r);for(i in t)o=t[i],te.check(Object.prototype.hasOwnProperty.call(t,i),function(){return"property "+i+" is inherited"},t,e,n,t);return t},te.simple_typed_map=function(t,e,n){var r,i,o;return r=te.get_coerce_fn(e),i=te.get_coerce_fn(n),o=function(r,i,o,s){var a,u;null==o&&(o=t),te.simple_map(r,i,o,s);for(a in r)u=r[a],te.get_T_fn(e)(a,"property",null,r),te.get_T_fn(n)(u,function(){return"value of property "+a},null,r);return r},o.coerce=function(e){var n,o,s;te.simple_map(e,null,t),o={};for(n in e)s=e[n],o[r(n)]=i(s);return o},o.fromJSON=function(e){var i,o,s;te.simple_map(e,null,t),o={};for(i in e)s=e[i],o[r(i)]=null!=n.fromJSON?n.fromJSON(s):s;return o},o},te.DS_ID_REGEX="^[-_a-z0-9]([-_a-z0-9.]{0,30}[-_a-z0-9])?$|^[.][-_a-zA-Z0-9]{1,100}$",te.dsid=function(t,e,n,r){return null==n&&(n="dsid"),te.string_matching(te.DS_ID_REGEX)(t,e,n,r),t},te.SS_ID_REGEX="^[-:._+/=a-zA-Z0-9][-._+/=a-zA-Z0-9]{0,31}$",te.tid=function(t,e,n,r){return null==n&&(n="tid"),te.string_matching(te.SS_ID_REGEX)(t,e,n,r),t},te.rowid=function(t,e,n,r){return null==n&&(n="rowid"),te.string_matching(te.SS_ID_REGEX)(t,e,n,r),t},te.field_name=function(t,e,n,r){return null==n&&(n="field name"),te.string_matching(te.SS_ID_REGEX)(t,e,n,r),t},function(){var t,e,n;n=[];for(t in te)e=te[t],te.hasOwnProperty(t)?n.push(function(t){return e.toString=function(){return"T."+t}}(t)):n.push(void 0);return n}(),ie.struct=oe={},oe.define=function(t,e){var n,r,i,o,s,a,u,l,c,h,f,d,p,g,m,_;for(te.string(t,"struct name"),te.array(e,"fields"),g=[],p={},s=m=0,_=e.length;_>m;s=++m){i=e[s],te.array(i,"field","field descriptor",e),te.check(2<=i.length&&i.length<=3,"does not have length 2 or 3",i,"field descriptor"),h=te.string(i[0],"field name","field descriptor",e),d=te.nonnull(i[1],"field type","field descriptor",e),f=i.length<=2?{}:te.nonnull(i[2],"map of field options","field descriptor",e);for(l in f)"init"!==l&&"initFn"!==l&&te.fail("unknown option "+l,f,"field options","field descrptor",e);ae.call(f,"init")>=0&&ae.call(f,"initFn")>=0&&te.fail("both 'init' and 'initFn' specified",f,"field options","field descriptor",e),u="initFn"in f?f.initFn:"init"in f?(a=f.init,function(t){return function(){return t}}(a)):null,n={name:h,type:d,initFn:u},o="undefined"!=typeof K&&null!==K?new K(n):n,g.push(o),p[h]=o}return c="initializer for "+t+" (fields "+function(){var t,e,n;for(n=[],t=0,e=g.length;e>t;t++)i=g[t],n.push(i.name);return n}().join(", ")+")",r=function(t){var e,n,i;te.defined(t,"x","initializer");for(h in t)e=t[h],t.hasOwnProperty(h)&&te.check(null!=p[h],function(){return"has an unexpected field "+h},t,"initializer");for(n=0,i=g.length;i>n;n++)o=g[n],t[o.name]&&!t.hasOwnProperty(o.name)&&te.fail("Has an indirect property "+o.name,t,"initializer"),t.hasOwnProperty(o.name)?(e=t[o.name],this[o.name]=te.get_coerce_fn(o.type)(e)):null!=o.initFn?this[o.name]=o.initFn():te.fail("lacks the field "+o.name,t,"initializer");return r.Type(this,"initializer",c,this),this},r.Type=function(e,n,i,s){var a,u,l;for(te.defined(e,n,i,s),te.check(e instanceof r,function(){return"is not an instance of "+t},e,n,i,s),u=0,l=g.length;l>u;u++)o=g[u],te.check(e.hasOwnProperty(o.name),function(){return"lacks the field "+o.name},e,n,i,s),te.get_T_fn(o.type)(e[o.name],o.name,i,s);for(h in e)a=e[h],e.hasOwnProperty(h)&&te.check(null!=p[h],"has an unexpected field",h,n,i,s);return e},r.coerce=function(t){return t instanceof r?(r.Type(t),t):new r(t)},r.prototype.toString=function(){var t,e,n,r,i;for(e=this,t=[],r=0,i=g.length;i>r;r++)o=g[r],n=e[o.name],t.push(""+o.name+": "+(te.is_object(n)&&te.is_function(n.toString)?n.toString():JSON.stringify(n)));return"{"+t.join(", ")+"}"},r.prototype.toJSON=function(){var t,e,n,r;for(t=this,e=function(){return""+t},n=0,r=g.length;r>n;n++)o=g[n],te.get_T_fn(o.type)(this[o.name],o.name,null,e);return this},r.fromJSON=function(e){var n,i,o;te.simple_map(e,"input"),i=[];for(l in e)o=e[l],null==p[l]&&(i.push(""+l+": "+JSON.stringify(o)),delete e[l]);i.length>0&&console.info("Ignoring unknown fields while deserializing "+t+": "+i.join(", ")),n={};for(l in e)o=e[l],d=p[l].type,n[l]=null!=d.fromJSON?d.fromJSON(o):o;return new r(n)},r.toString=function(){return"struct "+t},r},K=oe.define("StructField",[["name",te.string],["type",te.defined],["initFn",te.defined]]),oe.toJSO=function(t){var e,n,r,i;if("object"!=typeof t)return t;if(te.is_array(t))return function(){var n,r,i;for(i=[],n=0,r=t.length;r>n;n++)e=t[n],i.push(oe.toJSO(e));return i}();r={};for(n in t)i=t[n],t.hasOwnProperty(n)&&(r[n]=oe.toJSO(i));return r},oe.union_as_list=function(t,e){var n,r,i,o,s,a,u,l,c,h,f;for(te.string(t,"union name"),te.array(e,"variants"),r=function(){throw new Error("Use "+t+".from_array instead")},l={},u=[],c=function(e,n,i){var o;return o=oe.define(""+t+"."+e,i),o.prototype.tag=function(){return e},o.prototype.toString=function(){return""+t+"."+e+"("+JSON.stringify(this)+")"},o.prototype.toJSON=function(){var t,r,i,o,s,a;for(t=[e],s=0,a=n.length;a>s;s++)r=n[s],i=r[0],o=r[1],te.get_T_fn(o)(this[i],i),t.push(this[i]);return t},o.from_array=function(r){var i,s,a,u,l,c,h;for(l="initializer for "+t,te.array(r,"initializer",l),te.check(r.length===n.length+1,"does not have length "+(n.length+1),r,"initializer",l),te.check(r[0]===e,"does not have tag "+e,r,"initializer",l),i={_tag:e},a=c=0,h=n.length;h>c;a=++c)s=n[a],u=s[0],i[u]=r[a+1];return new o(i)},o.fromJSON=function(t){return t.length>n.length+1&&(t=t.slice(0,n.length+1)),o.from_array(t)},o.coerce=function(t){return t instanceof o?(o.Type(t),t):o.from_array(t)},l[e]=o,r[e]=o},h=0,f=e.length;f>h;h++)i=e[h],te.array(i,"variant","variant descriptor",e),te.check(2===i.length,"does not have length 2",i,"variant descriptor",e),a=te.string(i[0],"tag","tag",e),o=te.array(i[1],"fields","variant descriptor",e),s=o.slice(0),s.unshift(["_tag",te.member([a])]),c(a,o,s),u.push(a);return n="initializer for "+t+" (variants "+u.join(", ")+")",r.from_array=function(e){var n,r;return r="initializer for "+t,te.array(e,"initializer",r),te.check(e.length>=1,"lacks a tag",e,"initializer",r),n=e[0],te.string(n,"tag",r,e),te.member(u)(n),l[n].from_array(e)},r.fromJSON=function(e){var n,r;return r="initializer for "+t,te.array(e,"initializer",r),te.check(e.length>=1,"lacks a tag",e,"initializer",r),n=e[0],te.string(n,"tag",r,e),te.member(u)(n),l[n].fromJSON(e)},r.Type=function(e,n,r,i){var o;return null==r&&(r=""+t+".Type"),te.defined(e,n,r,i),te.defined(e.tag,"tag",r,i),o=e.tag(),te.string(o,"tag","initializer",e),te.member(u)(o),l[o].Type(e,null,"object of type "+t),e},r.coerce=function(t){var e,n;for(n in l)if(e=l[n],t instanceof e)return e.Type(t),t;return r.from_array(t)},r.toString=function(){return"union "+t},r},ie.nonzero_int64_approximate_regex=new RegExp("^-?[1-9][0-9]{0,18}$"),ie.int64_max_str="9223372036854775807",ie.int64_min_str="-9223372036854775808",ie.int64_string_less_than=function(t,e){var n,r,i;return t===e?!1:(r="0"===t.charAt(0),i="0"===e.charAt(0),r&&!i?!0:i&&!r?!1:(n=t.length===e.length?t>e:t.length>e.length,r&&i?n:!n))},ie.is_valid_int64_string=function(t){return te.is_string(t)?"0"===t?!0:ie.nonzero_int64_approximate_regex.test(t)?"-"===t.charAt(0)?t.length<ie.int64_min_str.length||t<=ie.int64_min_str:t.length<ie.int64_max_str.length||t<=ie.int64_max_str:!1:!1},ie.is_wrapped_atomic_field_value=function(t){var e,n,r,i;if(!te.is_simple_map(t))return!1;if(e=Object.keys(t),1!==e.length)return!1;switch(e[0]){case"B":return te.is_string(t.B);case"N":return"nan"===(r=t.N)||"+inf"===r||"-inf"===r;case"I":case"T":return n=null!=(i=t.I)?i:t.T,ie.is_valid_int64_string(n);default:return!1}},ie.is_atomic_field_value=function(t){return te.is_bool(t)||te.is_json_number(t)||te.is_string(t)||ie.is_wrapped_atomic_field_value(t)},ie.is_list_value=function(t){var e,n,r;if(te.is_array(t)){for(n=0,r=t.length;r>n;n++)if(e=t[n],!ie.is_atomic_field_value(e))return!1;return!0}return!1},ie.is_compound_field_value=function(t){return ie.is_atomic_field_value(t)||ie.is_list_value(t)},ie.atomic_field_value=function(t,e,n,r){return null==n&&(n="atomic field value"),te.check(ie.is_atomic_field_value(t),"is not an atomic field value",t,e,n,r),t},ie.list_value=function(t,e,n,r){return null==n&&(n="list value"),te.arrayOf(ie.atomic_field_value)(t,e,n,r),t},ie.compound_field_value=function(t,e,n,r){return null==n&&(n="field value"),te.is_array(t)?ie.list_value(t,e,n,r):ie.atomic_field_value(t,e,n,r)},ie.FieldOp=A=oe.union_as_list("FieldOp",[["P",[["value",ie.compound_field_value]]],["D",[]],["LC",[]],["LP",[["at",te.uint],["value",ie.atomic_field_value]]],["LI",[["before",te.uint],["value",ie.atomic_field_value]]],["LD",[["at",te.uint]]],["LM",[["from",te.uint],["to",te.uint]]]]),ie.datadict=te.simple_typed_map("datadict",te.field_name,ie.compound_field_value),ie.update_datadict=te.simple_typed_map("update_datadict",te.field_name,A),ie.Change=r=oe.union_as_list("Change",[["I",[["tid",te.tid],["rowid",te.rowid],["fields",ie.datadict]]],["U",[["tid",te.tid],["rowid",te.rowid],["updates",ie.update_datadict]]],["D",[["tid",te.tid],["rowid",te.rowid]]]]),ie.Delta=T=oe.define("Delta",[["rev",te.uint],["changes",te.arrayOf(r)],["nonce",te.string]]),U=oe.define("ListDatastoresResponseItem",[["dsid",te.string],["handle",te.string],["rev",te.uint],["info",te.nullable(ie.datadict),{init:null}]]),I=oe.define("ListDatastoresResponse",[["token",te.string],["datastores",te.arrayOf(U)]]),j=oe.define("GetSnapshotResponseRow",[["tid",te.string],["rowid",te.string],["data",ie.datadict]]),M=oe.define("GetSnapshotResponse",[["rev",te.uint],["rows",te.arrayOf(j)]]),s=oe.define("CreateDatastoreResponse",[["handle",te.string],["rev",te.uint],["created",te.bool]]),P=oe.define("GetDatastoreResponse",[["handle",te.string],["rev",te.uint]]),S=oe.define("DeleteDatastoresResponse",[]),W=oe.define("PutDeltasResponse",[["rev",te.nullable(te.uint),{init:null}],["conflict",te.nullable(te.string),{init:null}]]),L=oe.define("GetDeltasResponse",[["deltas",te.nullable(te.arrayOf(T)),{init:null}],["notfound",te.nullable(te.string),{init:null}]]),e=oe.define("AwaitResponseDeltas",[["deltas",te.simple_typed_map("deltas map",te.string,L)]]),ie.AwaitResponse=t=oe.define("AwaitResponse",[["get_deltas",te.nullable(e),{init:null}],["list_datastores",te.nullable(I),{init:null}]]),c=function(){function t(t){this.obj_manager=e(t)}var e;return e=function(t){var e,n;return n=new C(t),e=new q(n,t)},t.changeFromArray=function(t){return r.from_array(t)},t.prototype.close=function(){return this.obj_manager.destroy()},t.prototype.get_or_create=function(t,e){var n=this;return this.obj_manager.flob_client.get_or_create_db(t,function(r,i){return r?e(r):n.obj_manager.open(t,i.handle,function(t,n){return null!=t?e(t):e(null,n,i.created)})})},t.prototype.create=function(t,e,n){var r=this;return this.obj_manager.flob_client.create_db(t,e,function(e,i){return e?n(e):r.obj_manager.open(t,i.handle,function(t,e){return null!=t?n(t):n(null,e,i.created)})})},t.prototype.get_by_dsid=function(t,e){var n=this;return this.obj_manager.flob_client.get_db(t,function(r,i){return r?e(r):n.obj_manager.open(t,i.handle,function(t,n){return null!=t?e(t):e(null,n)})})},t.prototype.get=function(t,e){return this.obj_manager.open(t,function(t,n){return null!=t?e(t):e(null,n)})},t}(),n=function(){function t(){this.min_delay_millis=500,this.max_delay_millis=9e4,this.base=1.5,this._failures=0,this.log=!1}return t.prototype.set_log=function(t){this.log=t},t.prototype.set_max_delay_millis=function(t){this.max_delay_millis=t},t.prototype.get_backoff_millis=function(){var t,e;return this._failures+=1,e=Math.min(this.max_delay_millis,this.min_delay_millis*Math.pow(this.base,this._failures-1)),t=(.5+Math.random())*e,this.log&&console.log("get_backoff_millis: failures="+this._failures+", target_delay_millis="+e+", delay_millis="+t),t},t.prototype.reset=function(){return this._failures=0},t}(),J=function(){function t(){this.backoff=new n}var e,r;return r=6e4,e=0,t.prototype.run=function(t,e,n){var i,o,s,a,u,l,c,h=this;return s=null!=(l=e.do_retry)?l:function(){return!0},a=null!=(c=e.giveup_after_ms)?c:r,u=Date.now()+a,o=!1,i=function(){return o?void 0:t(function(){var t,e,r;return t=arguments[0],e=2<=arguments.length?le.call(arguments,1):[],o?void 0:t&&s(t)?Date.now()>u?(console.error("Giving up due to error",t),n(t)):(r=h.backoff.get_backoff_millis(),console.warn("Retrying in "+r+" ms due to error",t),setTimeout(i,r)):n.apply(null,[t].concat(le.call(e)))})},i(),function(){return o=!0}},t}(),N=function(){function t(t){this.client=t,this._retry=new J}var e,n;return n=10,e=2419200,t.prototype._run_with_retries=function(t,e,n){var r;return r={giveup_after_ms:1e3*t,do_retry:function(t){var e;return 0===t.status||500<=(e=t.status)&&600>e}},this._retry.run(n,r,e)},t.prototype.delete_db=function(t,e){var r=this;return this._run_with_retries(n,e,function(e){return r.client._deleteDatastore(t,function(t){return null!=t?e(t):e(null)})})},t.prototype.list_dbs=function(t){var n=this;return this._run_with_retries(e,t,function(t){return n.client._listDatastores(function(e,n){return null!=e?t(e):t(null,n)})})},t.prototype.get_or_create_db=function(t,e){var r=this;return this._run_with_retries(n,e,function(e){return r.client._getOrCreateDatastore(t,function(t,n){return null!=t?e(t):e(null,n)})})},t.prototype.create_db=function(t,e,r){var i=this;return this._run_with_retries(n,r,function(n){return i.client._createDatastore(t,e,function(t,e){return null!=t?n(t):n(null,e)})})},t.prototype.get_db=function(t,e){var r=this;return this._run_with_retries(n,e,function(e){return r.client._getDatastore(t,function(t,n){return null!=t?e(t):e(null,n)})})},t.prototype.await=function(t,n,r){var i,o=this;return i=this._run_with_retries(e,r,function(e){return o.client._datastoreAwait(t,n,function(t,n){return null!=t?e(t):e(null,n)})})},t.prototype.put_delta=function(t,n,r){var i,o=this;return i=function(t,e){return r(e)},this._run_with_retries(e,r,function(e){return o.client._putDelta(t,n,function(t){return null!=t?e(t):e(null)})})},t.prototype.get_snapshot=function(t,e){var r=this;return this._run_with_retries(n,e,function(e){return r.client._getSnapshot(t,function(t,n){return null!=t?e(t):e(null,n)})})},t}(),R=function(){function t(t,e,n){this.changes=t,this.undo_extras=e,this.finalized=null!=n?n:!1}var e;return e=function(t,e){var n,i,o,s,a;switch(s=null,i=null,t.tag()){case"I":s="D";break;case"U":s="U",i={};for(o in e)a=e[o],i[o]=null==a?["D"]:["P",a];break;case"D":s="I",i=ie.clone(e);break;default:throw new Error("Unknown change tag: "+t.tag())}return n=[s,t.tid,t.rowid],null!=i&&n.push(i),r.from_array(n)},t.prototype.add_change=function(t,e){return re(!this.finalized,"add_change: already finalized"),this.changes.push(t),this.undo_extras.push(e)},t.prototype["package"]=function(t,e){return re(this.finalized,"package: not finalized"),new T({changes:this.changes.slice(),nonce:t,rev:e})},t.prototype.inverse_changes=function(){var t,n,r,i,o,s;for(r=[],s=this.changes,n=i=0,o=s.length;o>i;n=++i)t=s[n],r.push(e(t,this.undo_extras[n]));return r.reverse(),r},t}(),ie.value_size=function(t){var e,n,r,i;if(te.is_string(t))return D.Util.countUtf8Bytes(t);if(te.is_bool(t))return 0;if(te.is_number(t))return 0;if(te.is_array(t)){for(e=20*t.length,r=0,i=t.length;i>r;r++)n=t[r],e+=ie.value_size(n);return e}if("object"!=typeof t)throw new Error("Unexpected value: "+t);if(null!=t.I)return 0;if(null!=t.N)return 0;if(null!=t.B)return Math.ceil(3*t.B.length/4);if(null!=t.T)return 0;throw new Error("Unexpected object: "+JSON.stringify(t))},B=102400,F=10485760,z=2097152,ie.size_difference_for_field_op=function(t,e,n){var r,i,o,s;switch(r=t.get(e),n.tag()){case"P":return i=n.value,r?ie.value_size(i)-ie.value_size(r):100+ie.value_size(i);case"D":return null!=r?-(100+ie.value_size(r)):0;case"LC":return re(null==r,"can't create list for field that already exists"),100;case"LP":return re(te.is_array(r),"LP on non-list"),re(0<=(o=n.at)&&o<r.length,"bad index for LP"),ie.value_size(n.value)-ie.value_size(r[n.at]);case"LI":return null!=r?20+ie.value_size(n.value):120+ie.value_size(n.value);case"LD":return re(te.is_array(r),"LD on non-list"),re(0<=(s=n.at)&&s<r.length,"bad index for LD"),-(20+ie.value_size(r[n.at]));case"LM":return 0;default:throw new Error("unexpected field op type "+n.tag())}},ie.size_difference_for_change=function(t,e){var n,r,i,o,s,a,u;return s=function(){var s,l;switch(e.tag()){case"I":o=100,s=e.fields;for(n in s)u=s[n],o+=100+ie.value_size(u);return o;case"U":i=t.get_record(e.tid,e.rowid),te.assert(null!=i,function(){return"record not found: "+JSON.stringify(e)}),a=0,l=e.updates;for(n in l)r=l[n],a+=ie.size_difference_for_field_op(i,n,r);return a;case"D":return-t.get_record(e.tid,e.rowid)._size;default:throw new Error("unrecognized tag "+e.tag())}}()},Y=function(){function t(t,e,n){var r,i;this._tid=t,this._rid=e,null==n&&(n={}),this._fields={},this._size=100;for(r in n)i=n[r],this._fields[r]=ie.clone(i),this._size+=100+ie.value_size(i)}return t.prototype.get=function(t){return this._fields[t]},t.prototype.get_all=function(){return this._fields},t.prototype.put=function(t,e){return null!=e?this._fields[t]=ie.clone(e):delete this._fields[t],void 0},t.prototype.apply_field_op=function(t,e){var n,r,i,o,s,a,u;switch(n=this._fields[t],e.tag()){case"P":this._fields[t]=ie.clone(e.value);break;case"D":delete this._fields[t];break;case"LC":re(null==n,"can't create list for field that already exists"),this._fields[t]=[];break;case"LP":re(te.is_array(n),"LP on non-list"),re(0<=(i=e.at)&&i<n.length,"bad index for LP"),n[e.at]=ie.clone(e.value);break;case"LI":null!=n?(re(te.is_array(n),"LI on non-list"),re(0<=(o=e.before)&&o<=n.length,"bad index for LI"),n.splice(e.before,0,ie.clone(e.value))):(re(0===e.before,"bad index for LI on nonexistent field"),this._fields[t]=[ie.clone(e.value)]);break;case"LD":re(te.is_array(n),"LD on non-list"),re(0<=(s=e.at)&&s<n.length,"bad index for LD"),n.splice(e.at,1);break;case"LM":re(te.is_array(n),"LM on non-list"),re(0<=(a=e.from)&&a<n.length,"bad from index for LM"),re(0<=(u=e.to)&&u<n.length,"bad to index for LM"),r=n[e.from],n.splice(e.from,1),n.splice(e.to,0,r);break;default:throw new Error("unexpected field op type "+e.tag())}return void 0},t}(),ee=function(){function t(){this._records={}}return t.prototype.get=function(t){return this._records[t]},t.prototype.put=function(t,e){return null!=e?this._records[t]=e:delete this._records[t],void 0},t.prototype.has=function(t){return null!=this._records[t]},t.prototype.is_empty=function(){var t;for(t in this._records)return!1;return!0},t.prototype.list_record_ids=function(){var t,e;e=[];for(t in this._records)e.push(t);return e},t}(),l=function(){function t(t,e){var n,r,i,o,s,a;this._tables={},this._size=1e3;for(a in e){i=e[a],s=this._get_table(a);for(o in i)n=i[o],r=new Y(a,o,n),this._check_record_size(t,a,o,r._size),s.put(o,r),this._size+=r._size}this._check_datastore_size(t,this._size)}return t.from_get_snapshot_resp=function(e){var n,r,i,o,s,a;for(n={},a=e.rows,i=0,o=a.length;o>i;i++)r=a[i],n[s=r.tid]||(n[s]={}),n[r.tid][r.rowid]=r.data;return new t(!1,n)},t.prototype._size_limit_exceeded=function(t,e){var n;if(t)throw n=new Error(e),n.code="SIZE_LIMIT_EXCEEDED",n;return console.warn(e),void 0},t.prototype._check_record_size=function(t,e,n,r){return r>B&&this._size_limit_exceeded(t,"Record ("+e+", "+n+") too large: "+r+" bytes"),void 0},t.prototype._check_datastore_size=function(t,e){return e>F&&this._size_limit_exceeded(t,"Datastore too large: "+e+" bytes"),void 0},t.prototype._TEST_calculate_size_from_scratch=function(){var t,e,n,r,i,o,s,a,u,l,c,h;r=0,l=this._tables;for(o in l)for(i=l[o],c=i.list_record_ids(),a=0,u=c.length;u>a;a++){n=c[a],e=i.get(n),r+=100,h=e.get_all();for(t in h)s=h[t],r+=100+ie.value_size(s)}return r},t.prototype.raw_data=function(){var t,e,n,r,i,o,s,a;t={},s=this._tables;for(r in s)for(n=s[r],t[r]={},a=n.list_record_ids(),i=0,o=a.length;o>i;i++)e=a[i],t[r][e]=ie.clone(n.get(e).get_all());return t},t.prototype.get_record=function(t,e){var n;return null!=(n=this._tables[t])?n.get(e):void 0},t.prototype.apply_change=function(t,e){var n,r,i;switch(n=ie.size_difference_for_change(this,e),n>=0&&this._check_datastore_size(t,this._size+n),e.tag()){case"I":this._check_record_size(t,e.tid,e.rowid,n),i=this._apply_insert(e);break;case"U":r=this.get_record(e.tid,e.rowid),te.assert(null!=r,function(){return"apply_change: record does not exist: "+JSON.stringify(e)}),n>=0&&this._check_record_size(t,e.tid,e.rowid,r._size+n),i=this._apply_update(r,e),r._size+=n;break;case"D":i=this._apply_delete(e);break;default:throw new Error("unrecognized tag "+e.tag())}return this._size+=n,i},t.prototype._get_table=function(t){return null==this._tables[t]&&(this._tables[t]=new ee),this._tables[t]},t.prototype._apply_insert=function(t){var e,n;return n=this._get_table(t.tid),te.assert(!n.has(t.rowid),function(){return"_apply_insert: record already exists: "+JSON.stringify(t)}),e=new Y(t.tid,t.rowid,t.fields),n.put(t.rowid,e),null},t.prototype._apply_update=function(t,e){var n,r,i,o,s,a,u;o={};try{a=e.updates;for(r in a)i=a[r],s=ie.clone(null!=(u=t.get(r))?u:null),t.apply_field_op(r,i),o[r]=s}catch(l){n=l;for(r in o)s=o[r],t.put(!1,r,s);throw n}return o},t.prototype._apply_delete=function(t){var e,n,r;return r=this._get_table(t.tid),te.assert(r.has(t.rowid),function(){return"_apply_delete: record does not exist: "+JSON.stringify(t)}),n=r.get(t.rowid),e=ie.clone(n.get_all()),r.put(t.rowid,null),r.is_empty()&&delete this._tables[t.tid],e},t.prototype.query=function(t,e){var n,r;return r=this._tables[t],null==r?null:(n=r.get(e),null==n?null:ie.clone(n.get_all()))},t.prototype.list_tables=function(){var t,e;return t=function(){var t;t=[];for(e in this._tables)t.push(e);return t}.call(this),t.sort(),t},t.prototype.list_rows_for_table=function(t){var e,n;return n=this._tables[t],null==n?[]:(e=n.list_record_ids(),e.sort(),e)},t.prototype.size=function(){return this._size},t}(),H=function(){function t(t,e,n,r,i,o){this.dbid=t,this.handle=e,this.datastore_model=n,this.resolver=r,this.sync_state=i,this.flob_client=o,this.syncStateChanged=new D.Util.EventSource,this._deleted=!1,this._open=!0,this._commit_queue=new Z}return t.fresh_managed_datastore=function(e,n,r,i,o,s){var a,u;return a=ie.randomWeb64String(10),u=new Q(a,null,i,[],[]),new t(e,n,r,o,u,s)},t.prototype.get_dsid=function(){return this.dbid},t.prototype.get_handle=function(){return this.handle},t.prototype.is_deleted=function(){return this._deleted},t.prototype.mark_deleted=function(){return this._deleted=!0},t.prototype.open=function(){if(this._open)throw new Error("Attempt to open datastore multiple times");return this._open=!0},t.prototype.close=function(){if(!this._open)throw new Error("Attempt to close datastore multiple times");return this._open=!1},t.prototype._do_sync=function(){var t,e,n,r,i,o,s,a,u,l,c,h,f,d,p,g,m,_,v,y,b,w,x;if(0===this.sync_state.server_deltas.length)return{};for(i=this.resolver.resolve(this.sync_state.unsynced_deltas,this.sync_state.server_deltas),r=i.rebased_deltas,t=i.affected_records,o=this.sync_state.unsynced_deltas.slice().reverse(),a=0,h=o.length;h>a;a++)for(n=o[a],y=n.inverse_changes(),u=0,f=y.length;f>u;u++)e=y[u],this.datastore_model.apply_change(!1,e);for(b=this.sync_state.server_deltas,l=0,d=b.length;d>l;l++)for(n=b[l],w=n.changes,c=0,p=w.length;p>c;c++)e=w[c],this.datastore_model.apply_change(!1,e);for(_=0,g=r.length;g>_;_++)for(n=r[_],n.undo_extras=[],x=n.changes,v=0,m=x.length;m>v;v++)e=x[v],s=this.datastore_model.apply_change(!1,e),n.undo_extras.push(s);return this.sync_state.update_unsynced_deltas(r),t},t.prototype._do_commit=function(){var t,e=this;return this.sync_state.delta_pending()||(t=this.sync_state.get_next_commit(),null==t)?void 0:this._commit_queue.request(function(){return e.flob_client.put_delta(e.handle,t,function(){return e._commit_queue.finish()})})},t.prototype._apply_and_queue_local_change=function(t,e){var n;return n=this.datastore_model.apply_change(t,e),this.sync_state.add_unsynced_change(e,n),void 0},t.prototype._update_mtime=function(){return null},t.prototype.perform_local_change=function(t){return this._apply_and_queue_local_change(!0,t),this._update_mtime(),this.syncStateChanged.dispatch(null)},t.prototype.sync=function(){var t;return this.has_unfinalized_changes&&this.sync_state.finalize(),t=this._do_sync(),this._do_commit(),t},t.prototype.get_outgoing_delta_count=function(){return this.sync_state.unsynced_deltas.length},t.prototype.get_incoming_delta_count=function(){return this.sync_state.server_deltas.length},t.prototype.has_unfinalized_changes=function(){return this.sync_state.has_unfinalized_changes()},t.prototype.receive_server_delta=function(t){return this.sync_state.receive_server_delta(t)?this.syncStateChanged.dispatch(null):this.syncStateChanged.dispatch(null)},t.prototype.query=function(t,e){return this.datastore_model.query(t,e)},t.prototype.list_tables=function(){var t;return function(){var e,n,r,i;for(r=this.datastore_model.list_tables(),i=[],e=0,n=r.length;n>e;e++)t=r[e],":info"!==t&&i.push(t);return i}.call(this)},t.prototype.list_rows_for_table=function(t){return this.datastore_model.list_rows_for_table(t)},t}(),Q=function(){function t(t,e,n,r,i){this.last_nonce=t,this.pending_delta=e,this.last_rev=n,this.unsynced_deltas=r,this.server_deltas=i,te.uint(this.last_rev,"last_rev")}return t.prototype.is_current=function(){return 0===this.unsynced_deltas.length&&0===this.server_deltas.length},t.prototype.add_unsynced_change=function(t,e){var n;return n=this.unsynced_deltas.length,0===n||this.unsynced_deltas[n-1].finalized?this.unsynced_deltas.push(new R([t],[e])):this.unsynced_deltas[n-1].add_change(t,e)},t.prototype._compact_deltas=function(){var t,e,n,r,i,o,s,a,u,l,c,h,f,d;if(r=this.unsynced_deltas.length,!(1>=r)){for(e=[],o=[],n=s=0,h=r-1;h>=0?h>s:s>h;n=h>=0?++s:--s){for(f=this.unsynced_deltas[n].changes,a=0,l=f.length;l>a;a++)t=f[a],e.push(t);for(d=this.unsynced_deltas[n].undo_extras,u=0,c=d.length;c>u;u++)i=d[u],o.push(i)}return this.unsynced_deltas=[new R(e,o,!0),this.unsynced_deltas[r-1]]}},t.prototype.get_next_commit=function(){var t,e,n;return re(null==this.pending_delta,"delta pending"),t=this.unsynced_deltas.length,0===t?null:(this._compact_deltas(),e=this.unsynced_deltas[0],e.finalized?(n=this.last_nonce,this.pending_delta=e["package"](n,this.last_rev),this.pending_delta):null)},t.prototype.clear_pending=function(){return this.pending_delta=null},t.prototype.delta_pending=function(){return null!=this.pending_delta},t.prototype.has_unfinalized_changes=function(){var t,e;return e=this.unsynced_deltas.length,0===e?!1:(t=this.unsynced_deltas[e-1],!t.finalized)},t.prototype.finalize=function(){var t;return this.has_unfinalized_changes()?(t=this.unsynced_deltas[this.unsynced_deltas.length-1],re(!t.finalized,"last delta already finalized"),t.finalized=!0):void 0},t.prototype.update_unsynced_deltas=function(t){return this.unsynced_deltas=t,this.last_rev+=this.server_deltas.length,this.server_deltas=[]},t.prototype.is_ours=function(t){return this.last_nonce===t.nonce},t.prototype.ack=function(t){return re(this.is_ours(t),"not ours"),re(null!=this.pending_delta,"no pending delta"),re(0===this.server_deltas.length,"server deltas exist"),this.pending_delta=null,this.unsynced_deltas.shift(),this.last_rev++},t.prototype.receive_server_delta=function(t){var e,n;return n=this.server_deltas.length,e=n>0?this.server_deltas[n-1].rev+1:this.last_rev,re(t.rev<=e,"was expecting rev "+e+", but got "+t.rev+" instead!"),t.rev<e?(console.warn("received old delta!"),!1):this.is_ours(t)?(this.ack(t),!1):(this.server_deltas.push(t),this.pending_delta=null,!0)},t}(),ie.DatastoreModel=l,X=function(){function t(t){this.update_manager=t,this.cancelled=!1,this.cancel_fn=null}return t.prototype.cancel=function(){return null!=this.cancel_fn&&this.cancel_fn(),this.cancelled=!0},t.prototype.poll=function(){var t,e=this;return t=function(){var n;return e.cancelled?void 0:(n=ie.clone(e.update_manager._handle_version_map),e.cancel_fn=e.update_manager.flob_client.await(n,e.update_manager._last_dslist_token,function(r,i){var o,s,a,u,l,c,h,f,d,p;if(e.cancel_fn=null,r)return 0===r.status?(console.log("await deltas failed (offline):",r),setTimeout(t,1e4)):r.status&&500<=(f=r.status)&&599>=f?(console.log("server error:",r),setTimeout(t,2e3)):(console.error("Got error in longpoll:",r),setTimeout(t,1e4));if(null!=i.get_deltas){d=i.get_deltas.deltas;for(u in d)if(s=d[u],null!=s.notfound)e.update_manager._data_queue.push({handle:u,notfound:s.notfound}),delete e.update_manager._handle_version_map[u];else if(null!=s.deltas){for(p=s.deltas,c=0,h=p.length;h>c;c++)a=p[c],e.update_manager._data_queue.push({handle:u,delta:a});l=n[u]+s.deltas.length,o=e.update_manager._handle_version_map[u],null!=o&&(e.update_manager._handle_version_map[u]=Math.max(o,l))}}return null!=i.list_datastores&&(e.update_manager._last_dslist_token=i.list_datastores.token,e.update_manager._data_queue.push({dslist:i.list_datastores})),setTimeout(t,0)}))},t()},t}(),C=function(){function t(t){this.flob_client=t,this._data_queue=null,this._handle_version_map={},this._last_dslist_token=".",this._pending_poll=null,this._running=!1}return t.prototype.run=function(t){return this._data_queue=new o(t),this._running=!0,this._do_longpoll()},t.prototype.stop=function(){return this._pending_poll?this._pending_poll.cancel():void 0},t.prototype.add_poll=function(t,e){var n,r;return re(this._running,"update manager is not running"),n=this._handle_version_map[t],r=e,null!=n&&(r=Math.max(e,n)),this._handle_version_map[t]=r,this._do_longpoll()},t.prototype.remove_poll=function(t){return re(this._running,"update manager is not running"),t in this._handle_version_map?(delete this._handle_version_map[t],this._do_longpoll()):void 0},t.prototype._do_longpoll=function(){return re(this._running,"update manager is not running"),this._pending_poll&&(this._pending_poll.cancel(),this._pending_poll=null),this._pending_poll=new X(this),this._pending_poll.poll()},t}(),q=function(){function t(t,e){this.update_manager=t,this.flob_client=e,this.update_manager.run(this._handle_server_update.bind(this)),this._cached_objects={},this._dslist_listener=null,this._handle_to_dsid_map={}}return t.prototype.destroy=function(){var t;
for(t in this._cached_objects)this._cached_objects[t].close();return this.update_manager.stop()},t.prototype.set_dslist_listener=function(t){return this._dslist_listener=t},t.prototype._evict=function(t){var e;return e=this._handle_to_dsid_map[t],null!=e?(delete this._handle_to_dsid_map[t],e in this._cached_objects&&this._cached_objects[e].mark_deleted(),this.update_manager.remove_poll(t)):void 0},t.prototype.close=function(t){var e;if(t in this._cached_objects)return e=this._cached_objects[t].get_handle(),this._cached_objects[t].close();throw new Error("Attempt to close unknown datastore: "+t)},t.prototype._handle_server_update=function(t,e){var n,r,i;return t.dslist?(this._dslist_listener&&this._dslist_listener(t.dslist),e(null)):(i=t.handle,n=this._handle_to_dsid_map[i],null==n?(console.log("unknown handle "+i+" (maybe datastore was evicted)",t,this._handle_to_dsid_map,this._cached_objects),e(null)):(r=t.delta,null!=t.notfound?(this._evict(i),e(null)):this._retrieve(n,i,function(t,n){return t?e(t):(n.receive_server_delta(r),e(null))})))},t.prototype.open=function(t,e,n){return this._cached_objects[t]&&this._cached_objects[t].open(),this._retrieve(t,e,n)},t.prototype._retrieve=function(t,e,n){var r,i=this;return r=this._cached_objects[t],null!=r?n(null,r):(this._handle_to_dsid_map[e]=t,this.flob_client.get_snapshot(e,function(r,o){var s,a,u;return null!=r?n(r):null!=i._cached_objects[t]?n(null,i._cached_objects[t]):(s=l.from_get_snapshot_resp(o),u=new k,a=H.fresh_managed_datastore(t,e,s,o.rev,u,i.flob_client),i.update_manager.add_poll(e,a.sync_state.last_rev),i._cached_objects[t]=a,n(null,a))}))},t}(),ie.FieldOpTransformer=O=function(){function t(t){var i,o,s,a,l,c,h,f,d,_,v,y=this;for(this.rule_name=null!=t?t:"default",this.precedence=r[this.rule_name],this._transforms={},s=0,c=n.length;c>s;s++)o=n[s],this._transforms[o]={};for(v=["P","D"],a=0,h=v.length;h>a;a++)for(o=v[a],l=0,f=e.length;f>l;l++)i=e[l],this._transforms[o][i]=p,this._transforms[i][o]=g;for(_=0,d=e.length;d>_;_++)i=e[_],"LC"===i?this._transforms.LC.LC=function(){return[null,null]}:(this._transforms.LC[i]=g,this._transforms[i].LC=p);this._transforms.P.P=function(t,e){var n;return n=y.precedence(t.value,e.value),"left"===n?[t,null]:[null,e]},this._transforms.P.D=function(t,e){var n;return n=y.precedence(t.value,null),"left"===n?[t,null]:[null,e]},this._transforms.D.P=function(t,e){var n;return n=y.precedence(null,e.value),"left"===n?[t,null]:[null,e]},this._transforms.D.D=function(t,e){var n;return n=y.precedence(null,null),"left"===n?[t,null]:[null,e]},this._transforms.LP.LP=function(t,e){var n;return t.at!==e.at?[t,e]:(n=y.precedence(t.value,e.value),"left"===n?[t,null]:[null,e])},this._transforms.LP.LI=function(t,e){var n;return n=u(t),n.at+=e.before<=t.at?1:0,[n,e]},this._transforms.LP.LD=function(t,e){var n;return t.at===e.at?[null,e]:(n=u(t),n.at-=e.at<t.at?1:0,[n,e])},this._transforms.LP.LM=function(t,e){var n;return n=u(t),t.at===e.from?n.at=e.to:(n.at-=e.from<n.at?1:0,n.at+=e.to<=n.at?1:0),[n,e]},this._transforms.LI.LP=m(this._transforms.LP.LI),this._transforms.LI.LI=function(t,e){var n,r,i;return i=[u(t),u(e)],n=i[0],r=i[1],t.before<e.before?r.before+=1:n.before+=1,[n,r]},this._transforms.LI.LD=function(t,e){var n,r,i;return i=[u(t),u(e)],n=i[0],r=i[1],n.before-=e.at<t.before?1:0,r.at+=t.before<=e.at?1:0,[n,r]},this._transforms.LI.LM=function(t,e){var n,r,i,o;return o=[u(t),u(e)],r=o[0],i=o[1],t.before===e.to+1&&e.from<=e.to?[t,e]:t.before===e.to&&e.from>e.to?(r.before++,i.from++,[r,i]):(n=e.from<t.before?t.before-1:t.before,i.from+=t.before<=e.from?1:0,r.before=e.to<n?n+1:n,i.to+=n<=e.to?1:0,[r,i])},this._transforms.LD.LP=m(this._transforms.LP.LD),this._transforms.LD.LI=m(this._transforms.LI.LD),this._transforms.LD.LD=function(t,e){var n,r,i;return t.at===e.at?[null,null]:(i=[u(t),u(e)],n=i[0],r=i[1],t.at<e.at?r.at-=1:n.at-=1,[n,r])},this._transforms.LD.LM=function(t,e){var n,r,i;return t.at===e.from?(n=u(t),n.at=e.to,[n,null]):(i=[u(t),u(e)],n=i[0],r=i[1],n.at-=e.from<n.at?1:0,n.at+=e.to<=n.at?1:0,r.to+=r.from<r.to?1:0,r.from-=t.at<r.from?1:0,r.to-=t.at<r.to?1:0,r.to-=r.from<r.to?1:0,[n,r])},this._transforms.LM.LP=m(this._transforms.LP.LM),this._transforms.LM.LI=function(t,e){var n,r,i,o;return o=[u(t),u(e)],r=o[0],i=o[1],e.before===t.to+1&&t.from<=t.to?[t,e]:e.before===t.to&&t.from>t.to?(r.from++,r.to++,[r,i]):(n=t.from<e.before?e.before-1:e.before,r.from+=e.before<=t.from?1:0,i.before=t.to<n?n+1:n,r.to+=n<=t.to?1:0,[r,i])},this._transforms.LM.LD=m(this._transforms.LD.LM),this._transforms.LM.LM=function(t,e){var n,r,i,o,s,a,l,c,h,f,d;return t.from===e.from?t.to===e.to?[null,null]:e.from===e.to?[t,e]:(o=u(e),o.from=t.to,[null,o]):t.to===t.from?(i=u(t),i.from+=(e.to<=t.from)-(e.from<t.from),t.from===e.to&&e.from<e.to&&i.from--,i.to=i.from,[i,e]):e.to===e.from?(o=u(e),o.from+=(t.to<=e.from)-(t.from<e.from),o.to=o.from,[t,o]):(l=[u(t),u(e)],i=l[0],o=l[1],t.to===e.to&&t.from>t.to&&e.from>e.to?(i.to++,e.from>t.from?i.from++:o.from++,[i,o]):t.from===e.to&&e.from===t.to&&t.from<t.to?(o.from--,i.from++,[i,o]):t.from>t.to&&e.from<e.to&&e.to+1===t.to?[t,e]:(c=[t.to,t.from],s=c[0],n=c[1],s+=t.from<s?1:0,s-=e.from<s?1:0,s+=e.to<s?1:0,n-=e.from<n?1:0,n+=e.to<=n?1:0,s-=s>n?1:0,h=[e.to,e.from],a=h[0],r=h[1],a+=e.from<a?1:0,a-=t.from<a?1:0,a+=t.to<=a?1:0,r-=t.from<r?1:0,r+=t.to<=r?1:0,a-=a>r?1:0,f=[s,n],i.to=f[0],i.from=f[1],d=[a,r],o.to=d[0],o.from=d[1],[i,o]))}}var e,n,r,i,o,s,a,u,l,c,h,f,d,p,g,m,_,v,y;for(m=function(t){return re(null!=t),function(e,n){var r,i,o;return o=t(n,e),r=o[0],i=o[1],[i,r]}},i=["null","bool","num","str","blob","ts","list"],o={},c=v=0,y=i.length;y>v;c=++v)_=i[c],o[_]=c;return l=function(t){if(null==t)return"null";if(te.is_bool(t))return"bool";if(null!=t.I||te.is_number(t))return"num";if(te.is_string(t))return"str";if(null!=t.B)return"blob";if(null!=t.T)return"ts";if(te.is_array(t))return"list";throw new Error("Unrecognized value "+t)},d=function(t){return te.is_number(t)||null!=t.I},s=function(t){return null!=t.I?parseInt(t.I):t},f=function(t,e){var n,r,i;for(n=r=0,i=t.length;i>=0?i>r:r>i;n=i>=0?++r:--r){if(n>=e.length)return!1;if(h(t[n],e[n]))return!0;if(h(e[n],t[n]))return!1}return e.length>t.length},t._is_less_than=h=function(t,e){var n,r;if(n=l(t),r=l(e),n!==r)return o[n]<o[r];if("null"===n)return!1;if("bool"===n)return e&&!t;if("num"===n)return null!=t.I&&null!=e.I?ie.int64_string_less_than(t.I,e.I):s(t)<s(e);if("str"===n)return e>t;if("blob"===n)return t.B<e.B;if("ts"===n)return parseInt(t.T,10)<parseInt(e.T,10);if("list"===n)return f(t,e);throw new Error("unknown type "+n)},t._compute_sum=a=function(t,e,n){var r,i,o,s,a,u;return r=null!=t.I&&null!=e.I&&null!=n.I,null!=t.I&&(t=parseInt(t.I)),null!=e.I&&(e=parseInt(e.I)),null!=n.I&&(n=parseInt(n.I)),s=0x8000000000000000,a=0x10000000000000000,u=0xfffffffffffff800,i=e-t,o=n+i,r&&(o>=s&&(o-=u),-s>o&&(o+=u),o={I:""+o}),o},g=function(t,e){return[null,e]},p=function(t){return[t,null]},n=["P","D","LC","LP","LI","LD","LM"],e=["LC","LP","LI","LD","LM"],t.copy=u=function(t){return A.from_array(JSON.parse(JSON.stringify(t)))},r={"default":function(){return"right"},remote:function(){return"right"},local:function(){return"left"},min:function(t,e){return h(t,e)?"left":"right"},max:function(t,e){return h(t,e)?"right":"left"},sum:function(){return"right"}},t.prototype.transform=function(t,e,n){var r,i,o,s,u;return null==n&&(n=null),"sum"===this.rule_name&&"P"===t.tag()&&"P"===e.tag()&&(null==n&&(n={I:"0"}),d(n)&&d(t.value)&&d(e.value))?(o=a(n,t.value,e.value),r=i=A.from_array(["P",o]),[r,i,e.value]):(s=this._transforms[t.tag()][e.tag()](t,e),u=function(){switch(e.tag()){case"P":return e.value;case"D":return null;default:return{L:!0}}}(),s.push(u),s)},t}(),ie.ChangeTransformer=i=function(){function t(){this._transform_rules={},this._default_transformer=new O}var e,n,i,o,s,a,u,l;for(e={},l=["default","local","remote","min","max","sum"],a=0,u=l.length;u>a;a++)i=l[a],e[i]=new O(i);return s=function(t){return re(null!=t),function(e,n){var r,i,o;return o=t(n,e),r=o[0],i=o[1],[i,r]}},n=function(t){return t instanceof Array?t.slice():t},o=function(t,e){return t.tid===e.tid&&t.rowid===e.rowid},t.is_no_op=function(t){var e,n,r;if("U"!==t.tag())return!1;r=t.updates;for(n in r)return e=r[n],!1;return!0},t.compact=function(t){var e,n,r,i;for(e=[],r=0,i=t.length;i>r;r++)n=t[r],this.is_no_op(n)||e.push(n);return e},t.prototype.set_field_transformer=function(t,n,r){var i;return null==(i=this._transform_rules)[t]&&(i[t]={}),this._transform_rules[t][n]=e[r]},t.prototype.get_field_transformer=function(t,n){var r;return t in this._transform_rules?null!=(r=this._transform_rules[t][n])?r:this._default_transformer:e["default"]},t.prototype.transform_ii=function(t,e){var i,s,a;return o(t,e)?(i=function(t){var e,i,o,s,a;o={},a=t.fields;for(i in a)s=a[i],o[i]=A.from_array(["P",n(s)]);return e=r.from_array(["U",t.tid,t.rowid,o]),e.undo_extra={},e},s=i(t),a=i(e),this.transform_uu(s,a)):[[t],[e]]},t.prototype.transform_iu=function(t,e){return o(t,e)?re(!1,"Couldn't have updated a row that hasn't been inserted yet!"):[[t],[e]]},t.prototype.transform_id=function(t,e){return o(t,e)?re(!1,"Couldn't have deleted a row that hasn't been inserted yet!"):[[t],[e]]},t.prototype.transform_ui=s(t.prototype.transform_iu),t.prototype.transform_uu=function(t,e){var n,i,s,a,u,l,c,h,f,d,p,g,m,_,v,y,b,w,x;if(!o(t,e))return[[t],[e]];_=[{},{}],f=_[0],d=_[1],h={},v=t.updates;for(s in v)n=v[s],s in e.updates?(i=e.updates[s],p=null!=(b=t.undo_extra[s])?b:null,g=this.get_field_transformer(t.tid,s),w=g.transform(n,i,p),a=w[0],u=w[1],m=w[2],null!=a&&(f[s]=a,h[s]=null!=m?m:null),null!=u&&(d[s]=u)):(f[s]=n,h[s]=null!=(y=t.undo_extra[s])?y:null);x=e.updates;for(s in x)i=x[s],s in t.updates||(d[s]=i);return l=r.from_array(["U",t.tid,t.rowid,f]),l.undo_extra=h,c=r.from_array(["U",e.tid,e.rowid,d]),[[l],[c]]},t.prototype.transform_ud=function(t,e){return o(t,e)?[[],[e]]:[[t],[e]]},t.prototype.transform_di=s(t.prototype.transform_id),t.prototype.transform_du=s(t.prototype.transform_ud),t.prototype.transform_dd=function(t,e){return o(t,e)?[[],[]]:[[t],[e]]},t}(),ie.DefaultResolver=k=function(){function t(){this._change_transformer=new i}return t.prototype.add_resolution_rule=function(t,e,n){return this._change_transformer.set_field_transformer(t,e,n)},t.prototype._transform_one=function(t,e){var n,r,o,s,a;return n=function(t){switch(t.tag()){case"I":return"i";case"U":return"u";case"D":return"d";default:throw new Error("unrecognized op type "+t.tag())}},s="transform_"+n(t)+n(e),a=this._change_transformer[s](t,e),r=a[0],o=a[1],r=i.compact(r),o=i.compact(o),[r,o]},t.prototype._transform_list=function(t,e){var n,r,i,o,s,a,u,l,c,h,f,d,p,g;if(0===t.length)return[[],e];if(0===e.length)return[t,[]];for(n=t[0],r=e[0],d=this._transform_one(n,r),o=d[0],s=d[1],p=this._transform_list(t.slice(1),s),i=p[0],s=p[1],l=0,h=i.length;h>l;l++)a=i[l],o.push(a);for(g=this._transform_list(o,e.slice(1)),o=g[0],u=g[1],c=0,f=u.length;f>c;c++)a=u[c],s.push(a);return[o,s]},t.prototype._resolve=function(t,e){var n,r,i,o,s,a,u;for(o=e.slice(),r=[],s=0,a=t.length;a>s;s++)i=t[s],u=this._transform_list(i,o),n=u[0],o=u[1],r.push(n);return[r,o]},t.prototype.resolve=function(t,e){var n,i,o,s,a,u,l,c,h,f,d,p,g,m,_,v,y,b,w,x,k,S,T,D,E,C,A,O,N,P,L,M;for(d=[],v=0,x=t.length;x>v;v++){for(c=t[v],i=[],P=c.changes,f=y=0,k=P.length;k>y;f=++y)s=P[f],u=r.from_array(JSON.parse(JSON.stringify(s))),u.undo_extra=ie.clone(c.undo_extras[f]),i.push(u);d.push(i)}for(m=[],b=0,S=e.length;S>b;b++)for(c=e[b],L=c.changes,w=0,T=L.length;T>w;w++)o=L[w],m.push(o);for(M=this._resolve(d,m),p=M[0],l=M[1],g=[],f=A=0,D=p.length;D>A;f=++A){for(a=p[f],_=null,h=t[f].finalized,O=0,E=a.length;E>O;O++)s=a[O],delete s.undo_extra;a.length>0&&g.push(new R(a,_,h))}for(n={},N=0,C=l.length;C>N;N++)o=l[N],o.tid in n||(n[o.tid]={}),n[o.tid][o.rowid]=!0;return{rebased_deltas:g,affected_records:n}},t}(),Z=function(){function t(){this._waiting=[],this._running=!1}return t.prototype._run_next=function(){var t;this._running||this._waiting.length>0&&(t=this._waiting[0],this._waiting.shift(),this._running=!0,t())},t.prototype.request=function(t){return this._waiting.push(t),this._run_next()},t.prototype.finish=function(){return this._running=!1,setTimeout(this._run_next.bind(this),0)},t}(),o=function(){function t(t){this.consumer=t,this.items=[],this.sync_queue=new Z}return t.prototype.consume=function(){var t=this;return this.sync_queue.request(function(){var e;return 0===t.items.length?t.sync_queue.finish():(e=t.items.shift(),t.consumer(e,function(e){if(e)throw e;return t.sync_queue.finish(),t.consume()}))})},t.prototype.push=function(t){return this.items.push(t),this.consume()},t.prototype.run=function(){return this.consume()},t}(),ie.clone=function(t){var e,n,r,i,o,s,a;if(t instanceof Array){for(a=[],o=0,s=t.length;s>o;o++)e=t[o],a.push(ie.clone(e));return a}if(null!=t&&"object"==typeof t){r={};for(n in t)i=t[n],r[n]=ie.clone(i);return r}return t},ie.WEB64_ALPHABET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",ie.randomElement=function(t){return t[Math.floor(Math.random()*t.length)]},ie.randomWeb64String=function(t){var e;return function(){var n,r;for(r=[],e=n=0;t>=0?t>n:n>t;e=t>=0?++n:--n)r.push(ie.randomElement(ie.WEB64_ALPHABET));return r}().join("")},ie.uint8ArrayFromBase64String=function(t){var e,n,r,i,o;for(t=t.replace("-","+").replace("_","/"),e=D.Util.atob(t),r=e.length,i=new Uint8Array(r),n=o=0;r>=0?r>o:o>r;n=r>=0?++o:--o)i[n]=e.charCodeAt(n);return i},ie.dbase64FromBase64=function(t){return t.replace(/[+]/g,"-").replace(/[/]/g,"_").replace(/[\=]+$/g,"")},ie.base64StringFromUint8Array=function(t){var e,n,r,i,o;for(n="",i=0,o=t.length;o>i;i++)e=t[i],n+=String.fromCharCode(e);return r=D.Util.btoa(n),ie.dbase64FromBase64(r)},ie.INT64_TAG="dbxInt64",ie.isInt64=function(t){var e;return t&&"object"==typeof t&&t.constructor===Number&&isFinite(t)?(e=t[ie.INT64_TAG],!te.is_string(e)||"0"!==e&&!ie.nonzero_int64_approximate_regex.test(e)?!1:!0):!1},ie.validateInt64=function(t){var e,n;if(!t&&"object"==typeof t&&t.constructor===Number&&isFinite(t))throw new Error("Not a finite boxed number: "+t);if(n=t[ie.INT64_TAG],!te.is_string(n)||"0"!==n&&!ie.nonzero_int64_approximate_regex.test(n))throw new Error("Missing or invalid tag in int64: "+n);if(e=parseInt(n,10),e!==Number(t))throw new Error("Tag in int64 does not match value "+Number(t)+": "+n);return t},ie.toDsValue=function(t,e){var n,r;if(null==e&&(e=!0),null===t||"undefined"==typeof t)throw new Error("Bad value: "+t);if(te.is_string(t))return t;if(te.is_bool(t))return t;if(te.is_number(t)){if(null!=t[ie.INT64_TAG])return ie.validateInt64(t),{I:t[ie.INT64_TAG]};if(isFinite(t))return t;if(isNaN(t))return{N:"nan"};if(1/0===Number(t))return{N:"+inf"};if(Number(t)===-1/0)return{N:"-inf"};throw new Error("Unexpected number: "+t)}if(te.is_array(t)){if(e)return function(){var e,n,i;for(i=[],e=0,n=t.length;n>e;e++)r=t[e],i.push(ie.toDsValue(r,!1));return i}();throw new Error("Nested array not allowed: "+JSON.stringify(t))}if(te.is_date(t))return n=Math.round(t.getTime()),{T:""+n};if(te.isUint8Array(t))return{B:ie.base64StringFromUint8Array(t)};throw new Error("Unexpected object: "+JSON.stringify(t))},ie.fromDsValue=function(t,e,n,r){if(te.is_string(r))return r;if(te.is_bool(r))return r;if(te.is_number(r))return r;if(te.is_array(r))return new D.Datastore.List(t,e,n);if("object"!=typeof r)throw new Error("Unexpected value: "+r);if(null!=r.I)return D.Datastore.int64(r.I);if(null==r.N){if(null!=r.B)return ie.uint8ArrayFromBase64String(r.B);if(null!=r.T)return new Date(parseInt(r.T,10));throw new Error("Unexpected object: "+JSON.stringify(r))}switch(r.N){case"nan":return 0/0;case"+inf":return 1/0;case"-inf":return-1/0;default:throw new Error("Unexpected object: "+JSON.stringify(r))}},ie.matchDsValues=function(t,e){var n,r,i,o,s;r=function(t,e){if(null==t)throw new Error("Unexpected object: "+t);return null==e?!1:n(t,e)},n=function(t,e){var n,i,o,s,a,u;if(ie.toDsValue(t),te.is_string(t)&&te.is_string(e))return String(t)===String(e);if(te.is_bool(t)&&te.is_bool(e))return"object"==typeof t&&(t=t.valueOf()),"object"==typeof e&&(e=e.valueOf()),Boolean(t)===Boolean(e);if(te.is_number(t)&&(te.is_number(e)||null!=e.N||null!=e.I))return e=ie.fromDsValue(void 0,void 0,void 0,e),t[ie.INT64_TAG]&&e[ie.INT64_TAG]?(s=[D.Datastore.int64(t),D.Datastore.int64(e)],t=s[0],e=s[1],String(t[ie.INT64_TAG])===String(e[ie.INT64_TAG])):isNaN(t)&&isNaN(e)?!0:Number(t)===Number(e);if(te.is_array(t)&&te.is_array(e)){if(t.length!==e.length)return!1;for(n=i=0,a=t.length-1;a>=0?a>=i:i>=a;n=a>=0?++i:--i)if(!r(t[n],e[n]))return!1;return!0}if(te.is_date(t)&&(te.is_date(e)||null!=e.T))return null!=e.T&&(e=ie.fromDsValue(void 0,void 0,void 0,e)),t-0===e-0;if(te.isUint8Array(t)&&(te.isUint8Array(e)||null!=e.B)){if(null!=e.B&&(e=ie.fromDsValue(void 0,void 0,void 0,e)),t.length!==e.length)return!1;for(n=o=0,u=t.length-1;u>=0?u>=o:o>=u;n=u>=0?++o:--o)if(t[n]!==e[n])return!1;return!0}return!1};for(i in t)if(s=t[i],o=r(s,e[i]),!o)return o;return!0},V=function(){function t(t){this._datastore=t,this._cache={}}return t.prototype.get=function(t,e){return null==this._cache[t]?null:this._cache[t][e]},t.prototype.getOrCreate=function(t,e){var n;return null==this._cache[t]&&(this._cache[t]={}),n=this._cache[t][e],null==n&&(n=this._cache[t][e]=new D.Datastore.Record(this._datastore,t,e)),n},t.prototype.remove=function(t,e){return delete this._cache[t][e],te.is_empty(this._cache[t])&&delete this._cache[t],void 0},t}(),E=function(){function t(){this._registered_handlers=[]}return t.prototype.register=function(t,e){return t.addListener(e),this._registered_handlers.push([t,e]),void 0},t.prototype.unregister_all=function(){var t,e,n,r,i,o;for(i=this._registered_handlers,n=0,r=i.length;r>n;n++)o=i[n],e=o[0],t=o[1],e.removeListener(t);return void 0},t}(),D.Datastore.DatastoreInfo=function(){function t(t,e,n){this._dsid=t,this._handle=e,this._info_record_data=n}return t.prototype.toString=function(){return"Datastore.DatastoreInfo("+this._dsid+")"},t.prototype.getId=function(){return this._dsid},t.prototype.getHandle=function(){return this._handle},t.prototype.getTitle=function(){var t;return null!=(t=this._info_record_data)?t.title:void 0},t.prototype.getModifiedTime=function(){var t;return null!=(t=this._info_record_data)?t.mtime:void 0},t}(),D.Datastore.DatastoreListChanged=function(){function t(t){this._dsinfos=t}return t.prototype.toString=function(){return"Datastore.DatastoreListChanged("+this._dsinfos.length+" datastores)"},t.prototype.getDatastoreInfos=function(){return this._dsinfos},t}(),D.Datastore.impl.EventSourceWithInitialData=function(t){function e(t){this.options=t,e.__super__.constructor.call(this,t),this._have_event=!1,this._last_event=null,this._listenersChanged=new D.Util.EventSource}return ue(e,t),e.prototype._clearLastEvent=function(){return this._have_event=!1,this._last_event=null},e.prototype.addListener=function(t){var n;return n=e.__super__.addListener.call(this,t),this._have_event&&t(event),this._listenersChanged.dispatch(this._listeners),n},e.prototype.removeListener=function(t){var n;return n=e.__super__.removeListener.call(this,t),this._listenersChanged.dispatch(this._listeners),n},e.prototype.dispatch=function(t){return this._last_event=t,this._have_event=!0,e.__super__.dispatch.call(this,t)},e}(D.Util.EventSource),a="default",D.Datastore.DatastoreManager=function(){function t(t){var e=this;if(!t.isAuthenticated())throw new Error("DatastoreManager requires an authenticated Dropbox.Client!");this._flob_client=new N(t),this._datasync=new c(this._flob_client),this._dslist_initialized=!1,this.datastoreListChanged=new D.Datastore.impl.EventSourceWithInitialData,this.datastoreListChanged._listenersChanged.addListener(function(t){return 0!==t.length?e._init_live_dslist():void 0})}return t.prototype.datastoreListChanged=null,t.prototype.close=function(){return this._datasync.close()},t.prototype.toString=function(){return"Datastore.DatastoreManager()"},t.prototype._datastoreInfoFromListDatastoresResponseItem=function(t){var e,n,r,i,o;if(null!=t.info){e={},o=t.info;for(n in o)i=o[n],e[n]=te.is_array(i)?function(){var t,e,n;for(n=[],t=0,e=i.length;e>t;t++)r=i[t],n.push(ie.fromDsValue(null,null,null,r));return n}():ie.fromDsValue(null,null,null,i)}else e=null;return new D.Datastore.DatastoreInfo(t.dsid,t.handle,e)},t.prototype._getDatastoreInfosFromListResponse=function(t){var e;return function(){var n,r,i,o;for(i=t.datastores,o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(this._datastoreInfoFromListDatastoresResponseItem(e));return o}.call(this)},t.prototype._init_live_dslist=function(){var t,e=this;return this._dslist_initialized?void 0:(this._dslist_initialized=!0,t=function(t){return e.datastoreListChanged.dispatch(new D.Datastore.DatastoreListChanged(e._getDatastoreInfosFromListResponse(t)))},this._datasync.obj_manager.set_dslist_listener(t),this._flob_client.list_dbs(function(e,n){return e?(console.warn("Failed to get datastore list"),void 0):t(n)}))},t.prototype._wrapDatastore=function(t,e){return e&&(t._update_mtime(),t.sync()),new D.Datastore(this,t)},t.prototype._getOrCreateDatastoreByDsid=function(t,e){var n=this;return this._datasync.get_or_create(t,function(t,r,i){return null!=t?e(t):e(null,n._wrapDatastore(r,i))}),void 0},t.prototype._createDatastore=function(t,e,n){var r=this;return this._datasync.create(t,e,function(t,e,i){return null!=t?n(t):n(null,r._wrapDatastore(e,i))}),void 0},t.prototype._getExistingDatastoreByDsid=function(t,e){var n=this;return this._datasync.get_by_dsid(t,function(t,r){return null!=t?e(t):e(null,new D.Datastore(n,r))}),void 0},t.prototype.openDefaultDatastore=function(t){return this._getOrCreateDatastoreByDsid(a,t)},t.prototype.openDatastore=function(t,e){return this._getExistingDatastoreByDsid(t,e),void 0},t.prototype.createDatastore=function(t){var e,n;return n=ie.randomWeb64String(Math.ceil(256/6)),e="."+ie.dbase64FromBase64(D.Util.sha256(n)),this._createDatastore(e,n,t),void 0},t.prototype.deleteDatastore=function(t,e){var n=this;return this._flob_client.get_db(t,function(t,r){return null!=t?e(t):n._flob_client.delete_db(r.handle,function(t){return t?e(t):e(null)})}),void 0},t.prototype.listDatastores=function(t){var e=this;return this.datastoreListChanged._have_event?t(null,this.datastoreListChanged._last_event.getDatastoreInfos()):(this._flob_client.list_dbs(function(n,r){return n?t(n):t(null,e._getDatastoreInfosFromListResponse(r))}),void 0)},t}(),D.Datastore.List=function(){function t(t,e,n){this._datastore=t,this._record=e,this._field=n}return t.prototype.toString=function(){return"Datastore.List(("+this._record._tid+", "+this._record._rid+", "+this._field+"): "+JSON.stringify(this._array)+")"},t.prototype._array=function(){return this._record._rawFieldValues()[this._field]},t.prototype._checkValid=function(){if(this._record._checkNotDeleted(),!te.is_array(this._array()))throw new Error("Attempt to operate on deleted list ("+this._record._tid+", "+this._record._rid+", "+this._field+")")},t.prototype._storeUpdate=function(t){var e;return e={},e[this._field]=t,this._record._storeUpdate(e),void 0},t.prototype._fixInsertionIndex=function(t){var e,n;if(!te.is_json_number(t))throw new RangeError("Index not a number: "+t);if(e=this._array().length,n=t>=0?t:e+t,n>=0&&e>=n)return n;throw new RangeError("Bad index for list of length "+e+": "+t)},t.prototype._fixIndex=function(t){var e,n;if(n=this._fixInsertionIndex(t),e=this._array().length,e>n)return n;throw new RangeError("Bad index for list of length "+e+": "+t)},t.prototype.get=function(t){var e;return this._checkValid(),e=ie.clone(this._array()[this._fixIndex(t)]),ie.fromDsValue(void 0,void 0,void 0,e)},t.prototype.set=function(t,e){return this._checkValid(),t=this._fixIndex(t),this._storeUpdate(["LP",t,ie.toDsValue(e,!1)]),void 0},t.prototype.length=function(){return this._checkValid(),this._array().length},t.prototype.pop=function(){if(this._checkValid(),0===this._array().length)throw new Error("List is empty");return this.remove(this._array.length-1)},t.prototype.push=function(t){return this._checkValid(),this.insert(this._array().length,t),void 0},t.prototype.shift=function(){if(this._checkValid(),0===this._array().length)throw new Error("List is empty");return this.remove(0)},t.prototype.unshift=function(t){return this.insert(0,t),void 0},t.prototype.splice=function(){var t,e,n,r,i,o,s,a,u;if(r=arguments[0],e=arguments[1],t=3<=arguments.length?le.call(arguments,2):[],this._checkValid(),!te.is_json_number(e)||0>e)throw new RangeError("Bad second arg to splice: "+r+", "+e);for(r=this._fixInsertionIndex(r),i=this.slice(r,r+e),n=s=0;e>=0?e>s:s>e;n=e>=0?++s:--s)this.remove(r);for(a=0,u=t.length;u>a;a++)o=t[a],this.insert(r,o),r++;return i},t.prototype.move=function(t,e){return this._checkValid(),t=this._fixIndex(t),e=this._fixIndex(e),t===e?void 0:(this._storeUpdate(["LM",t,e]),void 0)},t.prototype.remove=function(t){var e;return this._checkValid(),t=this._fixIndex(t),e=this.get(t),this._storeUpdate(["LD",t]),e},t.prototype.insert=function(t,e){return this._checkValid(),t=this._fixInsertionIndex(t),this._storeUpdate(["LI",t,ie.toDsValue(e,!1)]),void 0},t.prototype.slice=function(t,e){var n;return this._checkValid(),function(){var r,i,o,s;for(o=this._array().slice(t,e),s=[],r=0,i=o.length;i>r;r++)n=o[r],s.push(ie.fromDsValue(void 0,void 0,void 0,n));return s}.call(this)},t.prototype.toArray=function(){var t;return this._checkValid(),function(){var e,n,r,i;for(r=this._array().slice(),i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(ie.fromDsValue(void 0,void 0,void 0,t));return i}.call(this)},t}(),D.Datastore.Record=function(){function t(t,e,n){this._datastore=t,this._tid=e,this._rid=n,this._deleted=!1,this._record_cache=this._datastore._record_cache,this._managed_datastore=this._datastore._managed_datastore}return t.prototype.get=function(t){var e;return this._checkNotDeleted(),e=this._rawFieldValues(),t in e?ie.fromDsValue(this._datastore,this,t,e[t]):null},t.prototype.set=function(t,e){var n;return n={},n[t]=e,this.update(n)},t.prototype.getOrCreateList=function(t){var e,n;if(this._checkNotDeleted(),n=this._rawFieldValues(),null==n[t])e={},e[t]=["LC"],this._storeUpdate(e),n=this._rawFieldValues();else if(!te.is_array(n[t]))throw new Error("Can't call getOrCreateList on field "+t+" for record ("+this.tid+", "+this.rid+"): existing value "+n[t]+" is not a list");return ie.fromDsValue(this._datastore,this,t,n[t])},t.prototype.getFields=function(){var t,e,n,r;this._checkNotDeleted(),t={},r=this._rawFieldValues();for(e in r)n=r[e],t[e]=ie.fromDsValue(this._datastore,this,e,n);return t},t.prototype.update=function(t){var e,n,r;this._checkNotDeleted(),e={};for(n in t)r=t[n],null!=r?e[n]=["P",ie.toDsValue(r)]:null!=this.get(n)&&(e[n]=["D"]);return te.is_empty(e)||this._storeUpdate(e),this},t.prototype.deleteRecord=function(){var t;return this._checkNotDeleted(),this._deleted=!0,this._record_cache.remove(this._tid,this._rid),t=c.changeFromArray(["D",this._tid,this._rid]),this._managed_datastore.perform_local_change(t),this._datastore._recordsChangedLocally([this]),this},t.prototype.has=function(t){var e;return this._checkNotDeleted(),e=this._rawFieldValues(),t in e},t.prototype.getId=function(){return this._rid},t.prototype.getTable=function(){return this._datastore.getTable(this._tid)},t.prototype.isDeleted=function(){return this._deleted},t.prototype.toString=function(){var t;return t=this.isDeleted()?"deleted":JSON.stringify(this.getFields()),"Datastore.Record(("+this._tid+", "+this._rid+"): "+t+")"},t.prototype._rawFieldValues=function(){return this._managed_datastore.query(this._tid,this._rid)},t.prototype._storeUpdate=function(t){var e;e=c.changeFromArray(["U",this._tid,this._rid,t]),this._managed_datastore.perform_local_change(e),this._datastore._recordsChangedLocally([this])},t.isValidId=function(t){var e;return e=new RegExp(te.SS_ID_REGEX),te.is_string(t)&&e.test(t)},t.prototype._checkNotDeleted=function(){if(this._deleted)throw new Error("Attempt to operate on deleted record ("+this._tid+", "+this._rid+")")},t}(),D.Datastore.RecordsChanged=function(){function t(t,e){this._recordsByTable=t,this._local=e}return t.prototype.toString=function(){var t,e,n,r,i,o,s;i=0,n=0,s=this._recordsByTable;for(o in s)t=s[o],i+=1,n+=t.length;return r=""+i+" "+(1===i?"table":"tables"),e=""+n+" "+(1===n?"record":"records"),"Datastore.RecordsChanged("+e+" in "+r+" changed "+(this._local?"locally":"remotely")+")"},t._fromRecordList=function(e,n){var r,i,o,s,a;for(i={},s=0,a=e.length;a>s;s++)r=e[s],o=r._tid,null==i[o]&&(i[o]=[]),i[o].push(r);return new t(i,n)},t.prototype.affectedRecordsByTable=function(){return this._recordsByTable},t.prototype.affectedRecordsForTable=function(t){var e;return null!=(e=this._recordsByTable[t])?e:[]},t.prototype.isLocal=function(){return this._local},t}(),G=D.Datastore.RecordsChanged,D.Datastore.Table=function(){function t(t,e){this._datastore=t,this._tid=e,this._record_cache=this._datastore._record_cache,this._managed_datastore=this._datastore._managed_datastore}return t.prototype.getId=function(){return this._tid},t.prototype.get=function(t){var e,n;if(!D.Datastore.Record.isValidId(t))throw new Error("Invalid record ID: "+t);return n=this._record_cache.get(this._tid,t),null!=n?(re(!n._deleted),n):(e=this._managed_datastore.query(this._tid,t),null==e?null:this._record_cache.getOrCreate(this._tid,t))},t.prototype.getOrInsert=function(t,e){var n;return n=this.get(t),n?n:this._insertWithId(t,e)},t.prototype.insert=function(t){var e;return e=this._datastore._generateRid(),re(null==this.get(e)),this._insertWithId(e,t)},t.prototype.query=function(t){var e,n,r,i,o,s,a;for(o=this._managed_datastore.list_rows_for_table(this._tid),r=[],s=0,a=o.length;a>s;s++)i=o[s],e=this._managed_datastore.query(this._tid,i),(null==t||ie.matchDsValues(t,e))&&(n=this.get(i),re(null!=n),r.push(n));return r},t.prototype.setResolutionRule=function(t,e){if("remote"!==e&&"local"!==e&&"min"!==e&&"max"!==e&&"sum"!==e)throw new Error(""+e+" is not a valid resolution rule. Valid rules are 'remote', 'local', 'min', 'max', and 'sum'.");return this._managed_datastore.resolver.add_resolution_rule(this._tid,t,e),this},t.isValidId=function(t){var e;return e=new RegExp(te.SS_ID_REGEX),te.is_string(t)&&e.test(t)},t.prototype.toString=function(){return"Datastore.Table("+this._tid+")"},t.prototype._insertWithId=function(t,e){var n,r,i,o,s;r={};for(i in e)s=e[i],r[i]=ie.toDsValue(s);return n=c.changeFromArray(["I",this._tid,t,r]),this._managed_datastore.perform_local_change(n),o=this._record_cache.getOrCreate(this._tid,t),this._datastore._recordsChangedLocally([o]),o},t}(),D.File.ShareUrl=function(){function t(t,e){this.url=t.url,this.expiresAt=D.Util.parseDate(t.expires),this.isDirect=e===!0?!0:e===!1?!1:"direct"in t?t.direct:Date.now()-this.expiresAt<=864e5,this.isPreview=!this.isDirect,this._json=null}return t.parse=function(t,e){return t&&"object"==typeof t?new D.File.ShareUrl(t,e):t},t.prototype.url=null,t.prototype.expiresAt=null,t.prototype.isDirect=null,t.prototype.isPreview=null,t.prototype.json=function(){return this._json||(this._json={url:this.url,expires:this.expiresAt.toUTCString(),direct:this.isDirect})},t}(),D.File.CopyReference=function(){function t(t){"object"==typeof t?(this.tag=t.copy_ref,this.expiresAt=D.Util.parseDate(t.expires),this._json=t):(this.tag=t,this.expiresAt=new Date(1e3*Math.ceil(Date.now()/1e3)),this._json=null)}return t.parse=function(t){return!t||"object"!=typeof t&&"string"!=typeof t?t:new D.File.CopyReference(t)},t.prototype.tag=null,t.prototype.expiresAt=null,t.prototype.json=function(){return this._json||(this._json={copy_ref:this.tag,expires:this.expiresAt.toUTCString()})},t}(),D.File.Stat=function(){function t(t){var e,n,r,i;switch(this._json=t,this.path=t.path,"/"!==this.path.substring(0,1)&&(this.path="/"+this.path),e=this.path.length-1,e>=0&&"/"===this.path.substring(e)&&(this.path=this.path.substring(0,e)),n=this.path.lastIndexOf("/"),this.name=this.path.substring(n+1),this.isFolder=t.is_dir||!1,this.isFile=!this.isFolder,this.isRemoved=t.is_deleted||!1,this.typeIcon=t.icon,this.modifiedAt=(null!=(r=t.modified)?r.length:void 0)?D.Util.parseDate(t.modified):null,this.clientModifiedAt=(null!=(i=t.client_mtime)?i.length:void 0)?D.Util.parseDate(t.client_mtime):null,t.root){case"dropbox":this.inAppFolder=!1;
break;case"app_folder":this.inAppFolder=!0;break;default:this.inAppFolder=null}this.size=t.bytes||0,this.humanSize=t.size||"",this.hasThumbnail=t.thumb_exists||!1,this.versionTag=t.rev,this.contentHash=t.hash||null,this.mimeType=this.isFolder?t.mime_type||"inode/directory":t.mime_type||"application/octet-stream"}return t.parse=function(t){return t&&"object"==typeof t?new D.File.Stat(t):t},t.prototype.path=null,t.prototype.name=null,t.prototype.inAppFolder=null,t.prototype.isFolder=null,t.prototype.isFile=null,t.prototype.isRemoved=null,t.prototype.typeIcon=null,t.prototype.versionTag=null,t.prototype.contentHash=null,t.prototype.mimeType=null,t.prototype.size=null,t.prototype.humanSize=null,t.prototype.hasThumbnail=null,t.prototype.modifiedAt=null,t.prototype.clientModifiedAt=null,t.prototype.json=function(){return this._json},t}(),D.Http.AppInfo=function(){function t(t,e){var n;this.name=t.name,this._icons=t.icons,n=t.permissions||{},this.canUseDatastores=!!n.datastores,this.canUseFiles=!!n.files,this.canUseFullDropbox="full_dropbox"===n.files,this.hasAppFolder="app_folder"===n.files,this.key=e?e:t.key||null}return t.parse=function(t,e){return t?new D.Http.AppInfo(t,e):t},t.prototype.name=void 0,t.prototype.key=void 0,t.prototype.canUseDatastores=void 0,t.prototype.canUseFiles=void 0,t.prototype.hasAppFolder=void 0,t.prototype.canUseFullDropbox=void 0,t.prototype.icon=function(t,e){return e||(e=t),this._icons[""+t+"x"+e]||null},t.ICON_SMALL=64,t.ICON_LARGE=256,t}(),D.Http.PulledChanges=function(){function t(t){var e;this.blankSlate=t.reset||!1,this.cursorTag=t.cursor,this.shouldPullAgain=t.has_more,this.shouldBackOff=!this.shouldPullAgain,this.changes=t.cursor&&t.cursor.length?function(){var n,r,i,o;for(i=t.entries,o=[],n=0,r=i.length;r>n;n++)e=i[n],o.push(D.Http.PulledChange.parse(e));return o}():[]}return t.parse=function(t){return t&&"object"==typeof t?new D.Http.PulledChanges(t):t},t.prototype.blankSlate=void 0,t.prototype.cursorTag=void 0,t.prototype.changes=void 0,t.prototype.shouldPullAgain=void 0,t.prototype.shouldBackOff=void 0,t.prototype.cursor=function(){return this.cursorTag},t}(),D.Http.PulledChange=function(){function t(t){this.path=t[0],this.stat=D.File.Stat.parse(t[1]),this.stat?this.wasRemoved=!1:(this.stat=null,this.wasRemoved=!0)}return t.parse=function(t){return t&&"object"==typeof t?new D.Http.PulledChange(t):t},t.prototype.path=void 0,t.prototype.wasRemoved=void 0,t.prototype.stat=void 0,t}(),D.Http.RangeInfo=function(){function t(t){var e;(e=/^bytes (\d*)-(\d*)\/(.*)$/.exec(t))?(this.start=parseInt(e[1]),this.end=parseInt(e[2]),this.size="*"===e[3]?null:parseInt(e[3])):(this.start=0,this.end=0,this.size=null)}return t.parse=function(t){return"string"==typeof t?new D.Http.RangeInfo(t):t},t.prototype.start=null,t.prototype.size=null,t.prototype.end=null,t}(),D.Http.UploadCursor=function(){function t(t){this.replace(t)}return t.parse=function(t){return!t||"object"!=typeof t&&"string"!=typeof t?t:new D.Http.UploadCursor(t)},t.prototype.tag=null,t.prototype.offset=null,t.prototype.expiresAt=null,t.prototype.json=function(){return this._json||(this._json={upload_id:this.tag,offset:this.offset,expires:this.expiresAt.toUTCString()})},t.prototype.replace=function(t){return"object"==typeof t?(this.tag=t.upload_id||null,this.offset=t.offset||0,this.expiresAt=D.Util.parseDate(t.expires)||Date.now(),this._json=t):(this.tag=t||null,this.offset=0,this.expiresAt=new Date(1e3*Math.floor(Date.now()/1e3)),this._json=null),this},t}(),"function"==typeof D.Env.global.atob&&"function"==typeof D.Env.global.btoa?(D.Util.atob=function(t){return D.Env.global.atob(t)},D.Util.btoa=function(t){return D.Env.global.btoa(t)}):D.Env.global.require&&D.Env.global.Buffer?(D.Util.atob=function(t){var e,n;return e=new Buffer(t,"base64"),function(){var t,r,i;for(i=[],n=t=0,r=e.length;r>=0?r>t:t>r;n=r>=0?++t:--t)i.push(String.fromCharCode(e[n]));return i}().join("")},D.Util.btoa=function(t){var e,n;return e=new Buffer(function(){var e,r,i;for(i=[],n=e=0,r=t.length;r>=0?r>e:e>r;n=r>=0?++e:--e)i.push(t.charCodeAt(n));return i}()),e.toString("base64")}):function(){var t,e,n;return e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(t,n,r){var i,o;for(o=3-n,t<<=8*o,i=3;i>=o;)r.push(e.charAt(63&t>>6*i)),i-=1;for(i=n;3>i;)r.push("="),i+=1;return null},t=function(t,e,n){var r,i;for(i=4-e,t<<=6*i,r=2;r>=i;)n.push(String.fromCharCode(255&t>>8*r)),r-=1;return null},D.Util.btoa=function(t){var e,r,i,o,s,a;for(o=[],e=0,r=0,i=s=0,a=t.length;a>=0?a>s:s>a;i=a>=0?++s:--s)e=e<<8|t.charCodeAt(i),r+=1,3===r&&(n(e,r,o),e=r=0);return r>0&&n(e,r,o),o.join("")},D.Util.atob=function(n){var r,i,o,s,a,u,l;for(a=[],r=0,o=0,s=u=0,l=n.length;(l>=0?l>u:u>l)&&(i=n.charAt(s),"="!==i);s=l>=0?++u:--u)r=r<<6|e.indexOf(i),o+=1,4===o&&(t(r,o,a),r=o=0);return o>0&&t(r,o,a),a.join("")}}(),function(){var t,e,n,r,i,o,s,a,u,l,c;if(D.Util.hmac=function(e,r){return t(n(u(e),u(r),e.length,r.length))},D.Util.sha1=function(e){return t(i(u(e),e.length))},D.Util.sha256=function(e){return t(o(u(e),e.length))},D.Env.require)try{e=D.Env.require("crypto"),e.createHmac&&e.createHash&&(D.Util.hmac=function(t,n){var r;return r=e.createHmac("sha1",n),r.update(t),r.digest("base64")},D.Util.sha1=function(t){var n;return n=e.createHash("sha1"),n.update(t),n.digest("base64")},D.Util.sha256=function(t){var n;return n=e.createHash("sha256"),n.update(t),n.digest("base64")})}catch(h){r=h}return n=function(t,e,n,r){var o,s,a,u;return e.length>16&&(e=i(e,r)),a=function(){var t,n;for(n=[],s=t=0;16>t;s=++t)n.push(909522486^e[s]);return n}(),u=function(){var t,n;for(n=[],s=t=0;16>t;s=++t)n.push(1549556828^e[s]);return n}(),o=i(a.concat(t),64+n),i(u.concat(o),84)},i=function(t,e){var n,r,i,o,s,a,u,l,c,h,f,d,p,g,m,_,v;for(t[e>>2]|=1<<31-((3&e)<<3),t[(e+8>>6<<4)+15]=e<<3,m=Array(80),n=1732584193,i=4023233417,s=2562383102,u=271733878,c=3285377520,f=0,p=t.length;p>f;){for(r=n,o=i,a=s,l=u,h=c,d=v=0;80>v;d=++v)16>d?m[d]=0|t[f+d<<2>>2]:(g=(0|m[d-3<<2>>2])^(0|m[d-8<<2>>2])^(0|m[d-14<<2>>2])^(0|m[d-16<<2>>2]),m[d]=g<<1|g>>>31),_=0|(0|(n<<5|n>>>27)+c)+m[d<<2>>2],_=20>d?0|_+(0|(i&s|~i&u)+1518500249):40>d?0|_+(0|(i^s^u)+1859775393):60>d?0|(0|_+((i&s|i&u|s&u)-1894007588)):0|_+(0|(i^s^u)-899497514),c=u,u=s,s=i<<30|i>>>2,i=n,n=_;n=0|r+n,i=0|o+i,s=0|a+s,u=0|l+u,c=0|h+c,f=0|f+16}return[n,i,s,u,c]},o=function(t,e){var n,r,i,o,u,l,c,h,f,d,p,g,m,_,v,y,b,w,x,k,S,T,D,E,C,A,O,N,P,L,M,j;for(t[e>>2]|=1<<31-((3&e)<<3),t[(e+8>>6<<4)+15]=e<<3,P=Array(80),n=s[0],i=s[1],u=s[2],h=s[3],d=s[4],g=s[5],_=s[6],k=s[7],T=0,E=t.length;E>T;){for(r=n,o=i,l=u,f=h,p=d,m=g,v=_,S=k,D=j=0;64>j;D=++j)16>D?N=P[D]=0|t[T+D<<2>>2]:(b=0|P[D-15<<2>>2],y=(b<<25|b>>>7)^(b<<14|b>>>18)^b>>>3,x=0|P[D-2<<2>>2],w=(x<<15|x>>>17)^(x<<13|x>>>19)^x>>>10,N=P[D]=0|(0|y+(0|P[D-7<<2>>2]))+(0|w+(0|P[D-16<<2>>2]))),c=d&g^~d&_,C=n&i^n&u^i&u,A=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),O=(d<<26|d>>>6)^(d<<21|d>>>11)^(d<<7|d>>>25),L=0|(0|(0|k+O)+(0|c+N))+(0|a[D<<2>>2]),M=0|A+C,k=_,_=g,g=d,d=0|h+L,h=u,u=i,i=n,n=0|L+M;n=0|r+n,i=0|o+i,u=0|l+u,h=0|f+h,d=0|p+d,g=0|m+g,_=0|v+_,k=0|S+k,T+=16}return[n,i,u,h,d,g,_,k]},l=function(t){return 0>t&&(t=4*(1<<30)+t),t.toString(16)},s=[],a=[],function(){var t,e,n,r,i,o,u;for(e=function(t){return 0|4294967296*(t-Math.floor(t))},i=2,u=[],n=o=0;64>o;n=++o){for(;;){for(r=!0,t=2;i>=t*t;){if(0===i%t){r=!1;break}t+=1}if(r)break;i+=1}8>n&&(s[n]=e(Math.pow(i,.5))),a[n]=e(Math.pow(i,1/3)),u.push(i+=1)}return u}(),t=function(t){var e,n,r,i,o;for(i="",e=0,r=4*t.length;r>e;)n=e,o=(255&t[n>>2]>>(3-(3&n)<<3))<<16,n+=1,o|=(255&t[n>>2]>>(3-(3&n)<<3))<<8,n+=1,o|=255&t[n>>2]>>(3-(3&n)<<3),i+=c[63&o>>18],i+=c[63&o>>12],e+=1,i+=e>=r?"=":c[63&o>>6],e+=1,i+=e>=r?"=":c[63&o],e+=1;return i},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(t){var e,n,r,i,o;for(e=[],r=255,n=i=0,o=t.length;o>=0?o>i:i>o;n=o>=0?++i:--i)e[n>>2]|=(t.charCodeAt(n)&r)<<(3-(3&n)<<3);return e}}(),D.Util.Oauth=function(){function t(t){this._id=null,this._secret=null,this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this._appHash=null,this._loaded=null,this.setCredentials(t)}return t.prototype.setCredentials=function(t){if(t.key)this._id=t.key;else{if(!t.token)throw new Error("No API key supplied");this._id=null}return this._secret=t.secret||null,this._appHash=null,this._error=null,this._loaded=!0,this.reset(),t.token?(this._token=t.token,t.tokenKey&&(this._tokenKey=t.tokenKey,this._tokenKid=t.tokenKid)):t.oauthCode?this._authCode=t.oauthCode:t.oauthStateParam&&(this._stateParam=t.oauthStateParam),this},t.prototype.credentials=function(){var t;return t={},this._id&&(t.key=this._id),this._secret&&(t.secret=this._secret),null!==this._token?(t.token=this._token,this._tokenKey&&(t.tokenKey=this._tokenKey,t.tokenKid=this._tokenKid)):null!==this._authCode?t.oauthCode=this._authCode:null!==this._stateParam&&(t.oauthStateParam=this._stateParam),t},t.prototype.step=function(){return null!==this._token?D.Client.DONE:null!==this._authCode?D.Client.AUTHORIZED:null!==this._stateParam?this._loaded?D.Client.PARAM_LOADED:D.Client.PARAM_SET:null!==this._error?D.Client.ERROR:D.Client.RESET},t.prototype.setAuthStateParam=function(t){if(null===this._id)throw new Error("No API key supplied, cannot do authorization");return this.reset(),this._loaded=!1,this._stateParam=t,this},t.prototype.checkAuthStateParam=function(t){return this._stateParam===t&&null!==this._stateParam},t.prototype.authStateParam=function(){return this._stateParam},t.prototype.error=function(){return this._error},t.prototype.processRedirectParams=function(t){var e;if(t.error){if(null===this._id)throw new Error("No API key supplied, cannot process errors");return this.reset(),this._error=new D.AuthError(t),!0}if(t.code){if(null===this._id)throw new Error("No API key supplied, cannot do Authorization Codes");return this.reset(),this._loaded=!1,this._authCode=t.code,!0}if(e=t.token_type){if(e=e.toLowerCase(),"bearer"!==e&&"mac"!==e)throw new Error("Unimplemented token type "+e);if(this.reset(),this._loaded=!1,"mac"===e){if("hmac-sha-1"!==t.mac_algorithm)throw new Error("Unimplemented MAC algorithms "+t.mac_algorithm);this._tokenKey=t.mac_key,this._tokenKid=t.kid}return this._token=t.access_token,!0}return!1},t.prototype.authHeader=function(t,e,n){var r,i;return null===this._token?(i=null===this._secret?D.Util.btoa(""+this._id+":"):D.Util.btoa(""+this._id+":"+this._secret),"Basic "+i):null===this._tokenKey?"Bearer "+this._token:(r=this.macParams(t,e,n),"MAC kid="+r.kid+" ts="+r.ts+" "+("access_token="+this._token+" mac="+r.mac))},t.prototype.addAuthParams=function(t,e,n){var r;return null===this._token?(n.client_id=this._id,null!==this._secret&&(n.client_secret=this._secret)):(null!==this._tokenKey&&(r=this.macParams(t,e,n),n.kid=r.kid,n.ts=r.ts,n.mac=r.mac),n.access_token=this._token),n},t.prototype.authorizeUrlParams=function(t,e){var n;if("token"!==t&&"code"!==t)throw new Error("Unimplemented /authorize response type "+t);return n={client_id:this._id,state:this._stateParam,response_type:t},e&&(n.redirect_uri=e),n},t.prototype.accessTokenParams=function(t){var e;return e={grant_type:"authorization_code",code:this._authCode},t&&(e.redirect_uri=t),e},t.queryParamsFromUrl=function(t){var e,n,r,i,o,s,a,u,l,c;if(i=/^[^?#]+(\?([^\#]*))?(\#(.*))?$/.exec(t),!i)return{};for(a=i[2]||"","/"===a.substring(0,1)&&(a=a.substring(1)),e=i[4]||"",n=e.indexOf("?"),-1!==n&&(e=e.substring(n+1)),"/"===e.substring(0,1)&&(e=e.substring(1)),s={},c=a.split("&").concat(e.split("&")),u=0,l=c.length;l>u;u++)r=c[u],o=r.indexOf("="),-1!==o&&(s[decodeURIComponent(r.substring(0,o))]=decodeURIComponent(r.substring(o+1)));return s},t.prototype.macParams=function(t,e,n){var r,i;return r={kid:this._tokenKid,ts:D.Util.Oauth.timestamp()},i=t.toUpperCase()+"&"+D.Util.Xhr.urlEncodeValue(e)+"&"+D.Util.Xhr.urlEncodeValue(D.Util.Xhr.urlEncode(n)),r.mac=D.Util.hmac(i,this._tokenKey),r},t.prototype.appHash=function(){return this._appHash?this._appHash:this._appHash=D.Util.sha1("oauth2-"+this._id).replace(/[\/+=]/g,"")},t.prototype.reset=function(){return this._stateParam=null,this._authCode=null,this._token=null,this._tokenKey=null,this._tokenKid=null,this._error=null,this},t.timestamp=function(){return Math.floor(Date.now()/1e3)},t.randomAuthStateParam=function(){return["oas",Date.now().toString(36),Math.random().toString(36)].join("_")},t}(),null==Date.now&&(D.Util.Oauth.timestamp=function(){return Math.floor((new Date).getTime()/1e3)}),2274814865e3===new Date("Fri, 31 Jan 2042 21:01:05 +0000").valueOf()?D.Util.parseDate=function(t){return new Date(t)}:2274814865e3===Date.parse("Fri, 31 Jan 2042 21:01:05 +0000")?D.Util.parseDate=function(t){return new Date(Date.parse(t))}:function(){var t,e;return e=/^\w+\, (\d+) (\w+) (\d+) (\d+)\:(\d+)\:(\d+) (\+\d+|UTC|GMT)$/,t={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},D.Util.parseDate=function(n){var r;return(r=e.exec(n))?new Date(Date.UTC(parseInt(r[3]),t[r[2]],parseInt(r[1]),parseInt(r[4]),parseInt(r[5]),parseInt(r[6]),0)):0/0}}(),D.Util.countUtf8Bytes=function(t){var e,n,r,i,o;for(e=0,r=i=0,o=t.length;o>=0?o>i:i>o;r=o>=0?++i:--i)n=t.charCodeAt(r),127>=n?e+=1:2047>=n?e+=2:n>=55296&&57343>=n?e+=2:65535>=n?e+=3:re(!1);return e},D.Env.global.XMLHttpRequest?(!D.Env.global.XDomainRequest||"withCredentials"in new XMLHttpRequest?(b=XMLHttpRequest,y=!1,_="undefined"!=typeof FormData&&-1===navigator.userAgent.indexOf("Firefox")):(b=XDomainRequest,y=!0,_=!1),v=!0):(b=D.Env.require("xhr2"),y=!1,_=!1,v=!1),D.Env.global.Uint8Array)if(Object.getPrototypeOf?m=Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array(0))).constructor:Object.__proto__&&(m=new Uint8Array(0).__proto__.__proto__.constructor),D.Env.global.Blob){try{!function(){return 2===new Blob([new Uint8Array(2)]).size?(x=!0,w=!0):(w=!1,x=2===new Blob([new ArrayBuffer(2)]).size)}()}catch(ce){w=!1,x=!1,D.Env.global.WebKitBlobBuilder&&-1!==navigator.userAgent.indexOf("Android")&&(_=!1)}m===Object&&(w=!1)}else x=!1,w=!0;else m=null,x=!1,w=!1;D.Util.Xhr=function(){function t(t,e){this.method=t,this.isGet="GET"===this.method,this.url=e,this.wantHeaders=!1,this.headers={},this.params=null,this.body=null,this.preflight=!(this.isGet||"POST"===this.method),this.signed=!1,this.completed=!1,this.responseType=null,this.callback=null,this.xhr=null,this.onError=null}return t.Request=b,t.ieXdr=y,t.canSendForms=_,t.doesPreflight=v,t.ArrayBufferView=m,t.sendArrayBufferView=w,t.wrapBlob=x,t.prototype.xhr=null,t.prototype.onError=null,t.prototype.setParams=function(t){if(this.signed)throw new Error("setParams called after addOauthParams or addOauthHeader");if(this.params)throw new Error("setParams cannot be called twice");return this.params=t,this},t.prototype.setCallback=function(t){return this.callback=t,this},t.prototype.signWithOauth=function(t,e){return D.Util.Xhr.ieXdr?this.addOauthParams(t):this.preflight||!D.Util.Xhr.doesPreflight?this.addOauthHeader(t):this.isGet&&e?this.addOauthHeader(t):this.addOauthParams(t)},t.prototype.addOauthParams=function(t){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),t.addAuthParams(this.method,this.url,this.params),this.signed=!0,this},t.prototype.addOauthHeader=function(t){if(this.signed)throw new Error("Request already has an OAuth signature");return this.params||(this.params={}),this.signed=!0,this.setHeader("Authorization",t.authHeader(this.method,this.url,this.params))},t.prototype.setBody=function(t){if(this.isGet)throw new Error("setBody cannot be called on GET requests");if(null!==this.body)throw new Error("Request already has a body");return"string"==typeof t||"undefined"!=typeof FormData&&t instanceof FormData||(this.headers["Content-Type"]="application/octet-stream",this.preflight=!0),this.body=t,this},t.prototype.setResponseType=function(t){return this.responseType=t,this},t.prototype.setHeader=function(t,e){var n;if(this.headers[t])throw n=this.headers[t],new Error("HTTP header "+t+" already set to "+n);if("Content-Type"===t)throw new Error("Content-Type is automatically computed based on setBody");return this.preflight=!0,this.headers[t]=e,this},t.prototype.reportResponseHeaders=function(){return this.wantHeaders=!0},t.prototype.setFileField=function(t,e,n,r){var i,o,s,a,u;if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("setFileField cannot be called on GET requests");if("object"==typeof n){"undefined"!=typeof ArrayBuffer&&(n instanceof ArrayBuffer?D.Util.Xhr.sendArrayBufferView&&(n=new Uint8Array(n)):!D.Util.Xhr.sendArrayBufferView&&0===n.byteOffset&&n.buffer instanceof ArrayBuffer&&(n=n.buffer)),r||(r="application/octet-stream");try{n=new Blob([n],{type:r})}catch(l){o=l,window.WebKitBlobBuilder&&(a=new WebKitBlobBuilder,a.append(n),(i=a.getBlob(r))&&(n=i))}"undefined"!=typeof File&&n instanceof File&&(n=new Blob([n],{type:n.type})),u=n instanceof Blob}else u=!1;return u?(this.body=new FormData,this.body.append(t,n,e)):(r||(r="application/octet-stream"),s=this.multipartBoundary(),this.headers["Content-Type"]="multipart/form-data; boundary="+s,this.body=["--",s,"\r\n",'Content-Disposition: form-data; name="',t,'"; filename="',e,'"\r\n',"Content-Type: ",r,"\r\n","Content-Transfer-Encoding: binary\r\n\r\n",n,"\r\n","--",s,"--","\r\n"].join(""))},t.prototype.multipartBoundary=function(){return[Date.now().toString(36),Math.random().toString(36)].join("----")},t.prototype.paramsToUrl=function(){var t;return this.params&&(t=D.Util.Xhr.urlEncode(this.params),0!==t.length&&(this.url=[this.url,"?",t].join("")),this.params=null),this},t.prototype.paramsToBody=function(){if(this.params){if(null!==this.body)throw new Error("Request already has a body");if(this.isGet)throw new Error("paramsToBody cannot be called on GET requests");this.headers["Content-Type"]="application/x-www-form-urlencoded",this.body=D.Util.Xhr.urlEncode(this.params),this.params=null}return this},t.prototype.prepare=function(){var t,e,n,r,i=this;if(e=D.Util.Xhr.ieXdr,this.isGet||null!==this.body||e?(this.paramsToUrl(),null!==this.body&&"string"==typeof this.body&&(this.headers["Content-Type"]="text/plain; charset=utf8")):this.paramsToBody(),this.xhr=new D.Util.Xhr.Request,e?(this.xhr.onload=function(){return i.onXdrLoad()},this.xhr.onerror=function(){return i.onXdrError()},this.xhr.ontimeout=function(){return i.onXdrError()},this.xhr.onprogress=function(){}):this.xhr.onreadystatechange=function(){return i.onReadyStateChange()},this.xhr.open(this.method,this.url,!0),!e){r=this.headers;for(t in r)se.call(r,t)&&(n=r[t],this.xhr.setRequestHeader(t,n))}return this.responseType&&("b"===this.responseType?this.xhr.overrideMimeType&&this.xhr.overrideMimeType("text/plain; charset=x-user-defined"):this.xhr.responseType=this.responseType),this},t.prototype.send=function(t){var e,n;if(this.callback=t||this.callback,null!==this.body){e=this.body,D.Util.Xhr.sendArrayBufferView?e instanceof ArrayBuffer&&(e=new Uint8Array(e)):0===e.byteOffset&&e.buffer instanceof ArrayBuffer&&(e=e.buffer);try{this.xhr.send(e)}catch(r){if(n=r,D.Util.Xhr.sendArrayBufferView||!D.Util.Xhr.wrapBlob)throw n;e=new Blob([e],{type:"application/octet-stream"}),this.xhr.send(e)}}else this.xhr.send();return this},t.urlEncode=function(t){var e,n,r;e=[];for(n in t)r=t[n],e.push(this.urlEncodeValue(n)+"="+this.urlEncodeValue(r));return e.sort().join("&")},t.urlEncodeValue=function(t){return encodeURIComponent(t.toString()).replace(/\!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},t.urlDecode=function(t){var e,n,r,i,o,s;for(n={},s=t.split("&"),i=0,o=s.length;o>i;i++)r=s[i],e=r.split("="),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return n},t.prototype.onReadyStateChange=function(){var t,e,n,r,i,o,s,a,u,l,c,h,f,d,p;if(4!==this.xhr.readyState)return!0;if(this.completed)return!0;if(this.completed=!0,this.xhr.status<200||this.xhr.status>=300)return e=new D.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(e,this.callback):this.callback(e),!0;if(this.wantHeaders?(t=this.xhr.getAllResponseHeaders(),s=t?D.Util.Xhr.parseResponseHeaders(t):this.guessResponseHeaders(),c=s["x-dropbox-metadata"]):(s=void 0,c=this.xhr.getResponseHeader("x-dropbox-metadata")),null!=c?c.length:void 0)try{l=JSON.parse(c)}catch(g){if(u=g,o=c.search(/\}\,\s*\{/),-1!==o)try{c=c.substring(0,o+1),l=JSON.parse(c)}catch(g){u=g,l=void 0}else l=void 0}else l=void 0;if(this.responseType){if("b"===this.responseType){for(i=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,n=[],a=d=0,p=i.length;p>=0?p>d:d>p;a=p>=0?++d:--d)n.push(String.fromCharCode(255&i.charCodeAt(a)));f=n.join(""),this.callback(null,f,l,s)}else this.callback(null,this.xhr.response,l,s);return!0}switch(f=null!=this.xhr.responseText?this.xhr.responseText:this.xhr.response,r=this.xhr.getResponseHeader("Content-Type"),r&&(h=r.indexOf(";"),-1!==h&&(r=r.substring(0,h))),r){case"application/x-www-form-urlencoded":this.callback(null,D.Util.Xhr.urlDecode(f),l,s);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(f),l,s);break;default:this.callback(null,f,l,s)}return!0},t.parseResponseHeaders=function(t){var e,n,r,i,o,s,a,u;for(r={},n=t.split("\n"),a=0,u=n.length;u>a;a++)i=n[a],e=i.indexOf(":"),o=i.substring(0,e).trim().toLowerCase(),s=i.substring(e+1).trim(),r[o]=s;return r},t.prototype.guessResponseHeaders=function(){var t,e,n,r,i,o;for(t={},o=["cache-control","content-language","content-range","content-type","expires","last-modified","pragma","x-dropbox-metadata"],r=0,i=o.length;i>r;r++)e=o[r],n=this.xhr.getResponseHeader(e),n&&(t[e]=n);return t},t.prototype.onXdrLoad=function(){var t,e,n;if(this.completed)return!0;if(this.completed=!0,n=this.xhr.responseText,t=this.wantHeaders?{"content-type":this.xhr.contentType}:void 0,e=void 0,this.responseType)return this.callback(null,n,e,t),!0;switch(this.xhr.contentType){case"application/x-www-form-urlencoded":this.callback(null,D.Util.Xhr.urlDecode(n),e,t);break;case"application/json":case"text/javascript":this.callback(null,JSON.parse(n),e,t);break;default:this.callback(null,n,e,t)}return!0},t.prototype.onXdrError=function(){var t;return this.completed?!0:(this.completed=!0,t=new D.ApiError(this.xhr,this.method,this.url),this.onError?this.onError(t,this.callback):this.callback(t),!0)},t}(),ne="X-Dropbox-User-Agent",$="X-Dropbox-Request-Id",D.DatastoresClient={_dispatchDatastoreXhr:function(t,e,n,r,i,o){var s,a,l;return l=new D.Util.Xhr(t,e),i.setRequestId&&(a="xxxxxxxxxxxxxxxx".replace(/x/g,function(){return Math.floor(16*Math.random()).toString(16)}),l.setHeader($,a)),re(null==n[ne]),n=ie.clone(n),n[ne]="dropbox-js-datastore-sdk/"+u,l.setParams(n),l.signWithOauth(this.oauth,!1),s=function(t,e){var n;if(null!=t)return o(t);if(te.is_string(e)){console.log("Treating server response string as JSON:",e);try{e=JSON.parse(e)}catch(i){n=i,console.log("Error parsing response as JSON",n.stack)}}return o(null,r.fromJSON(e))},i.isLongPoll?this.dispatchLongPollXhr(l,s):this.dispatchXhr(l,s),l},_listDatastores:function(t){return this._dispatchDatastoreXhr("GET",this.urls.listDbs,{},I,{},t)},_getOrCreateDatastore:function(t,e){return this._dispatchDatastoreXhr("POST",this.urls.getOrCreateDb,{dsid:t},s,{},e)},_createDatastore:function(t,e,n){return this._dispatchDatastoreXhr("POST",this.urls.createDb,{dsid:t,key:e},s,{},n)},_getDatastore:function(t,e){return this._dispatchDatastoreXhr("GET",this.urls.getDb,{dsid:t},P,{},e)},_deleteDatastore:function(t,e){return this._dispatchDatastoreXhr("POST",this.urls.deleteDb,{handle:t},S,{setRequestId:!0},e)},_putDelta:function(t,e,n){return this._dispatchDatastoreXhr("POST",this.urls.putDelta,{handle:t,rev:e.rev,nonce:e.nonce,changes:JSON.stringify(e.changes)},W,{setRequestId:!0},n)},_getSnapshot:function(t,e){return this._dispatchDatastoreXhr("GET",this.urls.getSnapshot,{handle:t},M,{},e)},_datastoreAwait:function(e,n,r){return this._dispatchDatastoreXhr("GET",this.urls.datastoreAwait,{get_deltas:JSON.stringify({cursors:e}),list_datastores:JSON.stringify({token:n})},t,{isLongPoll:!0},r)},getDatastoreManager:function(){var t,e=this;return null==this._datastoreManager&&(this._datastoreManager=new D.Datastore.DatastoreManager(this),t=function(){return e.authStep===D.Client.SIGNED_OUT?(e._datastoreManager.close(),e._datastoreManager=null,e.onAuthStepChange.removeListener(t)):void 0},this.onAuthStepChange.addListener(t)),this._datastoreManager}},function(){var t,e,n,r;n=D.DatastoresClient,r=[];for(e in n)t=n[e],r.push(D.Client.prototype[e]=t);return r}(),D.File.PublicUrl=D.File.ShareUrl,D.UserInfo=D.AccountInfo}.call(this),define("datastore",["jquery"],function(t){return function(){var e;return e||t.datastore}}(this)),function(t){t.fn.serializeForm=function(){if(this.length<1)return!1;var e={},n=e,r=':input[type!="checkbox"][type!="radio"], input:checked',i=function(){var r=this.name.replace(/\[([^\]]+)?\]/g,",$1").split(","),i=r.length-1,o=t(this);if(r[0]){for(var s=0;i>s;s++)n=n[r[s]]=n[r[s]]||(""===r[s+1]?[]:{});void 0!==n.length?n.push(o.val()):n[r[i]]=o.val(),n=e}};return this.filter(r).each(i),this.find(r).each(i),e}}(jQuery),define("serializeForm",["jquery"],function(t){return function(){var e;return e||t.serializeForm}}(this)),define("config",[],function(){var t={};return t.apiKey="lfksu2l4dhmimfm",_.templateSettings={interpolate:/\{\{(.+?)\}\}/g},t}),define("gapi",["config"],function(t){function e(t){var e=t;this.dropboxAuth(e)}var n=new Dropbox.Client({key:t.apiKey});return e.prototype.dropboxAuth=function(){n.authenticate(),n.isAuthenticated()&&(this.dataStoreManager=n.getDatastoreManager(),this.client=n)},Backbone.sync=function(t,e,n){var r,i,o,s;switch(n=n||{},t){case"read":r=dStore.dataStore.getTable(e.url),i=r.query(),Backbone.gapiRequest(i,t,e,n);break;case"create":o=dStore.dataStore.getTable(e.url),i=o.insert(e.toDropbox()),s=i.getFields(),s.id=i.getId(),n.success(s),dStore.collections[e.url].add(s);break;case"update":o=dStore.dataStore.getTable(e.url),s=o.get(e.id),s.update(e.toDropbox()),n.success(e.toJSON());break;case"delete":o=dStore.dataStore.getTable(e.url),s=o.get(e.id),s.deleteRecord(),n.success(e)}},Backbone.gapiRequest=function(t,e,n,r){for(var i,o,s=[],a=0;a<t.length;a++)i=t[a],o=i.getFields(),o.id=i.getId(),s.push(o);r.success(s)},e}),define("models/task",[],function(){var t=Backbone.Model.extend({url:"tasks",parse:function(t){return t},toDropbox:function(){var t=_.clone(this.attributes);return delete t.id,t},toggle:function(){this.save({completed:!this.get("completed")})}});return t}),define("collections/tasklists",["models/task"],function(t){var e=Backbone.Collection.extend({model:t,url:"tasks"});return e}),define("text",["module"],function(t){var e,n,r,i,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),h=l&&location.hostname,f=l&&(location.port||void 0),d={},p=t.config&&t.config()||{};return e={version:"2.0.10",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(u);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){n=s[e];try{t=new ActiveXObject(n)}catch(r){}if(t){s=[n];break}}return t},parseName:function(t){var e,n,r,i=!1,o=t.indexOf("."),s=0===t.indexOf("./")||0===t.indexOf("../");return-1!==o&&(!s||o>1)?(e=t.substring(0,o),n=t.substring(o+1,t.length)):e=t,r=n||e,o=r.indexOf("!"),-1!==o&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:e=r),{moduleName:e,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,n,r,i){var o,s,a,u=e.xdRegExp.exec(t);return u?(o=u[2],s=u[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==n||s&&s.toLowerCase()!==r.toLowerCase()||(a||s)&&a!==i)):!0},finishLoad:function(t,n,r,i){r=n?e.strip(r):r,p.isBuild&&(d[t]=r),i(r)},load:function(t,n,r,i){if(i.isBuild&&!i.inlineText)return r(),void 0;p.isBuild=i.isBuild;var o=e.parseName(t),s=o.moduleName+(o.ext?"."+o.ext:""),a=n.toUrl(s),u=p.useXhr||e.useXhr;return 0===a.indexOf("empty:")?(r(),void 0):(!l||u(a,c,h,f)?e.get(a,function(n){e.finishLoad(t,o.strip,n,r)},function(t){r.error&&r.error(t)}):n([s],function(t){e.finishLoad(o.moduleName+"."+o.ext,o.strip,t,r)}),void 0)},write:function(t,n,r){if(d.hasOwnProperty(n)){var i=e.jsEscape(d[n]);r.asModule(t+"!"+n,"define(function () { return '"+i+"';});\n")}},writeFile:function(t,n,r,i,o){var s=e.parseName(n),a=s.ext?"."+s.ext:"",u=s.moduleName+a,l=r.toUrl(s.moduleName+a)+".js";e.load(u,r,function(){var n=function(t){return i(l,t)};n.asModule=function(t,e){return i.asModule(t,l,e)},e.write(t,u,n,o)},o)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),e.get=function(t,e,r){try{var i=n.readFileSync(t,"utf8");0===i.indexOf("﻿")&&(i=i.substring(1)),e(i)}catch(o){r(o)}}):"xhr"===p.env||!p.env&&e.createXhr()?e.get=function(t,n,r,i){var o,s=e.createXhr();if(s.open("GET",t,!0),i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);p.onXhr&&p.onXhr(s,t),s.onreadystatechange=function(){var e,i;4===s.readyState&&(e=s.status,e>399&&600>e?(i=new Error(t+" HTTP status: "+e),i.xhr=s,r(i)):n(s.responseText),p.onXhrComplete&&p.onXhrComplete(s,t))},s.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var n,r,i="utf-8",o=new java.io.File(t),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),u="";try{for(n=new java.lang.StringBuffer,r=a.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=a.readLine());)n.append(s),n.append(r);u=String(n.toString())}finally{a.close()}e(u)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in r,e.get=function(t,e){var n,s,a,u={};o&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(a,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),u),s.close(),n.close(),e(u.value)}catch(l){throw new Error((a&&a.path||"")+": "+l)}}),e}),define("text!templates/scaffold.html",[],function(){return'<nav class="navbar navbar-default navbar-static-top" role="navigation"></nav>\r\n\r\n<div id="container">\r\n	<h1 class="intro">To Do List</h1>\r\n	<h4>&nbsp;\r\n		<span class="label label-danger">\r\n			<span><span class="countTasks">count</span>\r\n				<span>&nbsp;\r\n					<span class="glyphicon glyphicon-star"></span>\r\n				</span>\r\n			</span>\r\n		</span>\r\n		&nbsp;\r\n		<span class="label label-primary" style="cursor:pointer;" id="showFormButton">\r\n			Add Task\r\n		</span>\r\n	</h4>\r\n	\r\n	<div class="formView"></div>\r\n	<div class="tableView"></div>\r\n		\r\n</div>'}),define("text!templates/tasksTable.html",[],function(){return'\r\n<table class="table table-striped taskTable">\r\n	<thead>\r\n	  <tr>\r\n		<th>#</th>\r\n		<th><span class="glyphicon glyphicon-ok"></span></th>\r\n		<th>Date</th>\r\n		<th><span class="glyphicon glyphicon-list-alt"></span></th>\r\n		<th>actions</th>\r\n	  </tr>\r\n	</thead>\r\n	<tbody></tbody>\r\n</table>\r\n'
}),define("text!templates/tasksTr.html",[],function(){return'\r\n	<td class="task_no">task id</td>\r\n	<td class="task_completed">\r\n		<input type="checkbox" name="completed" class="isCompleted"></input>\r\n	</td>\r\n	<td class="task_date">task date</td>\r\n	<td class="task_name">task name</td>\r\n	<td class="task_edit noStrikethrough">\r\n		<a href="#" class="btn-edit-task"><span class="glyphicon glyphicon-pencil"></span></a>\r\n		<a href="#" class="btn-del-task"><span class="glyphicon glyphicon-trash"></span></a>\r\n	</td>'}),define("views/tasksView",["text!templates/tasksTr.html"],function(t){var e=Backbone.View.extend({tagName:"tr",template:_.template(t),initialize:function(t){this.dispatcher=t.dispatcher,this.listenTo(this.model,"destroy removeView",this.remove),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"change:archive",this.archive)},events:{"click .btn-edit-task":"editTask","click .btn-del-task":"delTask","click .isCompleted":"toggleDone"},bindings:{".task_name":{observe:"taskname",updateModel:!1},".task_date":{observe:"created",onGet:"format_created_date"},".isCompleted":{observe:"completed",updateModel:!1},".task_ref":{observe:"tasksFileRef",onGet:function(t){return t},updateModel:!1,afterUpdate:function(t){t.fadeOut(500,function(){$(this).fadeIn(500)})}},".task_no":{observe:"id",update:function(t,e,n){t.text(n.collection.indexOf(n)+1)}}},toggleDone:function(){this.model.toggle()},archive:function(){this.remove(),this.model.collection.remove(this.model,{silent:!0})},format_created_date:function(t){var e;return e=t?dStore.moment(t).format("ddd, D MMMM @ h:mm a"):""},editTask:function(t){t.preventDefault(),document.getElementById("inputTask").focus(),this.dispatcher.trigger("updateForm",this.model),this.dispatcher.trigger("toggleFormButton")},delTask:function(t){t.preventDefault(),this.model.destroy()},render:function(){var t=this;return this.$el.html(this.template(this.model.toJSON())),this.$el.children().not(".noStrikethrough").toggleClass("completed",this.model.get("completed")),t.stickit(),this}});return e}),define("views/taskTableView",["text!templates/tasksTable.html","views/tasksView"],function(t,e){var n=Backbone.View.extend({template:_.template(t),initialize:function(t){this.dispatcher=t.dispatcher,this.listenTo(this.collection,"add",this.newTask)},events:{"click .search":"searchTable"},bindings:{},archive:function(){var t=this.collection.where({completed:!0});_.each(t,function(t){t.archive()})},filterTable:function(t){var e=new RegExp(t,"gi");t.length>1&&(this.results=this.collection.filter(function(t){return e.test(t.get("taskname"))}),this.filteredCollection=new Backbone.Collection(this.results),this.render())},newTask:function(t){var n,r=this;n=new e({model:t,dispatcher:r.dispatcher}),this.$el.find("tbody").append(n.render().el)},render:function(){var t=this,n=this.collection;return this.$el.html(this.template()),n.each(function(n){trRow=new e({model:n,dispatcher:t.dispatcher}),container.appendChild(trRow.render().el)}),this.$el.find("tbody").append(container),this}});return n}),define("text!templates/tasksForm.html",[],function(){return'	<!-- Form to collect new tasks -->\r\n	<form id="addTasksForm" role="form" class="form-horizontal">\r\n					\r\n		<div class="form-group">\r\n			<label for="inputTask" class="col-lg-2 col-xs-2 control-label">Task</label>\r\n			<div class="col-lg-6 col-xs-6">\r\n				<input type="text" name="taskname" class="form-control taskname" id="inputTask" placeholder="Enter a new task..." value="" >\r\n			</div>\r\n		</div>\r\n		\r\n		<div class="form-group">\r\n			<div class="col-lg-offset-2 col-lg-10">\r\n				<button type="submit" class="btn btn-primary">Add Task</button>\r\n				<button type="button" class="btn btn-danger closeForm pull-right">Close</button>\r\n			</div>\r\n	  </div>\r\n		\r\n	</form>\r\n	'}),define("views/formViewTasks",["text!templates/tasksForm.html","models/task"],function(t,e){var n=Backbone.View.extend({template:_.template(t),initialize:function(t){this.files=t.files,this.dispatcher=t.dispatcher,this.dispatcher.on("updateForm",this.updateForm,this)},events:{"click button[type=submit]":"submit","click .closeForm":"closeForm"},bindings:{".taskid":{observe:"id"},".taskname":{observe:"taskname",updateModel:!1}},updateForm:function(t){this.model=t,this.stickit(),this.$el.is(":visible")||this.$el.slideDown()},closeForm:function(t){var e=this;t.preventDefault(),e.$el.is(":visible")&&e.$el.slideToggle(function(){e.dispatcher.trigger("toggleFormButton")}),e.newTask()},slideToggle:function(){this.$el.is(":visible")||this.$el.slideToggle(),this.newTask()},submit:function(t){t.preventDefault();var e=this;m=e.model.set(this.$el.serializeForm(),{validate:!0}),m&&(m.save({created:new Date,completed:!1}),this.newTask())},newTask:function(){this.$el.find("#inputTask").focus(),$("#addTasksForm").find("input:text, input:password, input:file, input:hidden, select, textarea").val(""),this.model=new e},render:function(){var t=this;return this.$el.html(this.template()),t.stickit(),this}});return n}),define("text!templates/navbar.html",[],function(){return'	<!-- Brand and toggle get grouped for better mobile display -->\r\n	<div class="navbar-header">\r\n		<a class="navbar-brand" href="#">Backbone-Dropbox Datastore Example</a>\r\n	</div>	\r\n	\r\n	<!-- Collect the nav links, forms, and other content for toggling -->\r\n	<div class="collapse navbar-collapse navbar-ex1-collapse">\r\n		<p class="navbar-text pull-right">Signed in as <a href="#" class="navbar-link login">{{login}}</a></p>\r\n	</div>'}),define("views/navbarView",["text!templates/navbar.html"],function(t){var e=Backbone.View.extend({navBarTemplate:_.template(t),initialize:function(){},events:{},render:function(){return this.$el.html(this.navBarTemplate({login:dStore.userName})),this}});return e}),define("views/appView",["text!templates/scaffold.html","views/taskTableView","views/formViewTasks","views/navbarView","models/task"],function(t,e,n,r,i){var o=Backbone.View.extend({tagName:"div",className:"container",template:_.template(t),initialize:function(t){this.navbarView=new r,this.dispatcher=t.dispatcher,this.form=document.getElementById("addTasksForm"),this.dispatcher.on("toggleFormButton",this.toggleFormButton,this),this.listenTo(this.collection,"add remove",this.stats,this)},events:{"click #showFormButton":"toggleForm"},stats:function(){var t=document.getElementsByClassName("countTasks")[0];t&&(t.innerHTML=this.collection.length)},toggleForm:function(t){$(t.currentTarget).hide(),this.dispatcher.trigger("updateForm",new i)},toggleFormButton:function(){var t=document.getElementById("addTasksForm"),e=document.getElementById("showFormButton");$(t).is(":visible")?$(e).hide():$(e).show()},render:function(){var t=this;return container=document.createDocumentFragment(),this.$el.html(this.template()),this.navbarView.setElement(this.$(".navbar")).render(),new n({model:new i,dispatcher:t.dispatcher}).setElement(this.$(".formView")).render(),new e({collection:t.collection,dispatcher:t.dispatcher}).setElement(this.$(".tableView")).render(),_.defer(function(){t.toggleFormButton(),t.stats()}),this}});return o}),define("app",["jquery","backbone","gapi","moment","collections/tasklists","views/appView"],function(t,e,n,r,i,o){var s=function(){this.dispatcher=_.extend({},e.Events),this.collections.tasks=new i,this.connectDropbox(),this.moment=r};return s.prototype={views:{},collections:{},variables:{},connectDropbox:function(){var e=this;this.apiManager=new n(this),e.apiManager.client.getAccountInfo(function(t,n){e.userEmail=n.email,e.userName=n.name}),e.apiManager.dataStoreManager&&e.apiManager.dataStoreManager.openDefaultDatastore(function(n,r){n&&console.dir("Error opening default datastore: "+n),e.dataStore=r,r.recordsChanged.addListener(function(t){if(!t.isLocal()){var n,r=t.affectedRecordsForTable("tasks"),i=e.collections.tasks,o=i.get(r[0].getId());o?r[0].isDeleted()?(o.trigger("removeView",o),o.clear({silent:!0})):o.set(r[0].getFields()):(n=r[0].getFields(),n.id=r[0].getId(),i.add(n,{newTask:!0}))}}),e.views.appView=new o({collection:e.collections.tasks,dispatcher:e.dispatcher}),e.collections.tasks.fetch({success:function(){var n=e.views.appView.render().el;t("body").hide().html(n).fadeIn(500)}})})}},s}),define("ga",[],function(){var t=function(t){var e=e||[];window&&(window._gaq=e),e.push(["_setAccount",t]),e.push(["_trackPageview"]),function(t,e){var n=t.createElement(e),r=t.getElementsByTagName(e)[0];n.src="//www.google-analytics.com/ga.js",r.parentNode.insertBefore(n,r)}(document,"script")};return t}),requirejs.config({baseUrl:"js",urlArgs:"bust=v1",paths:{text:"lib/requirejs-text/text",font:"lib/requirejs-plugins/src/font",propertyParser:"lib/requirejs-plugins/src/propertyParser",jquery:"lib/jquery/jquery.min",underscore:"lib/lodash/dist/lodash.underscore.min",backbone:"lib/backbone/backbone-min",stickit:"lib/backbone.stickit/backbone.stickit",datastore:"lib/dropbox-datastore/dropbox-datastores-1.0-latest",serializeForm:"lib/jquery-serializeForm/src/serializeForm",moment:"lib/momentjs/moment",app:"app"},shim:{underscore:{exports:"_"},backbone:{deps:["jquery","underscore"],exports:"Backbone"},stickit:{deps:["backbone"],exports:"Backbone.Stickit"},datastore:{deps:["jquery"],exports:"datastore"},serializeForm:{deps:["jquery"],exports:"serializeForm"},app:{deps:["stickit","moment","datastore","serializeForm"],exports:"app"}}}),requirejs(["app","ga"],function(t,e){window.dStore=new t,window.ga=new e("41587087")}),define("main",function(){});
//# sourceMappingURL=main.js.map